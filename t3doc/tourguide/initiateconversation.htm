<html><head><meta name="generator" content="Help & Manual 2.7.0"><title>initiateConversation</title><meta name="keywords" content="initiateConversation"></meta></head>
<body bgcolor="#FFFFFF">
<table width="100%" border="0" cellspacing="0" cellpadding="3" bgcolor="#C0C0C0"><tr><td align="left">
<font face="Arial" size="3" color="#000000"><b>initiateConversation
<br>
</b></font>

</td><td align="right"><font face="Arial" size="2"><a href="specialtopic.htm">[Previous]</a> <a href="generalintroduction.htm">[Main]</a> <a href="agendaitem.htm">[Next]</a></font></td></tr></table><br>

<font face="Arial" size="2" color="#000000">While we can use the &lt;.convnode&gt; tag to have an NPC move into a <a href="conversationnodes-overview.htm">Conversation Node</a> in the middle of a conversation, and perhaps pose a question to the Player Character (PC) at that point, you might want a truly proactive NPC actually to start a conversation. To achieve that, you can call the <b>NPC's initiateConversation(ActorState, node)</b> method, where ActorState is the ActorState you want the NPC to change to (normally an <a href="inconversationstate.htm">InConversationState</a>), or nil if you don't want a change of ActorState, and node is the Conversation Node that you want to become active. Note that the node parameter can either be the ConvNode's object name, or the quoted string used at the ConvNode's tag. We'll illustrate both below:
<br>

<br>
We'll start with the ghost; we'll handle his entire appearance through ConvNodes, and we'll get him started with a call to initiateTopic(). First change the definition of graveyard.roomDaemon so it now reads:
<br>

<br>
<font face="Courier New" size="2" color="#000000">roomDaemon
<br>
&nbsp;&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inherited;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!ghost.moved&nbsp;&amp;&amp;&nbsp;!statue.isPulled)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ghost.moveInto(self);
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ghost.initiateConversation(ghostTalking,&nbsp;ghostNode);
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ghostAppearingEvent.triggerEvent(ghost);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br>
&nbsp;&nbsp;&nbsp;}
<br>

<br>
</font><font face="Arial" size="2" color="#000000">Now we may define the two ConvNodes for the ghost, together with their associated topics. Note how we have a very simple threaded conversation, that progresses from the first node to the second once the player accedes to the ghost's request (not that he has any real choice in the matter).
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">+&nbsp;ghostNode&nbsp;:&nbsp;ConvNode&nbsp;'ghostQuestion'
<br>
&nbsp;&nbsp;npcGreetingMsg&nbsp;=&nbsp;"&lt;.p&gt;A&nbsp;pale&nbsp;ghost&nbsp;rises&nbsp;slowly&nbsp;from&nbsp;one&nbsp;of&nbsp;the&nbsp;tombs,&nbsp;
<br>
&nbsp;&nbsp;then&nbsp;turns&nbsp;to&nbsp;you,&nbsp;pointing&nbsp;its&nbsp;ghostly&nbsp;finger&nbsp;straight&nbsp;at&nbsp;you.
<br>
&nbsp;&nbsp;\b&lt;q&gt;You!&lt;/q&gt;&nbsp;the&nbsp;ghost&nbsp;cries,
<br>
&nbsp;&nbsp;&lt;q&gt;Yes&nbsp;you&nbsp;-&nbsp;the&nbsp;disturber&nbsp;of&nbsp;my&nbsp;statue!&nbsp;You&nbsp;are&nbsp;the&nbsp;one&nbsp;who&nbsp;must
<br>
&nbsp;&nbsp;carry&nbsp;out&nbsp;the&nbsp;sacred&nbsp;task!&nbsp;You&nbsp;are&nbsp;the&nbsp;one&nbsp;who&nbsp;must&nbsp;retrieve&nbsp;the
<br>
&nbsp;&nbsp;Golden&nbsp;Banana&nbsp;of&nbsp;Discord&nbsp;and&nbsp;cast&nbsp;it&nbsp;into&nbsp;the&nbsp;fires&nbsp;of&nbsp;Mount&nbsp;Gloom
<br>
&nbsp;&nbsp;before&nbsp;it&nbsp;falls&nbsp;into&nbsp;the&nbsp;hands&nbsp;of&nbsp;the&nbsp;Cabal!&nbsp;Will&nbsp;you&nbsp;carry&nbsp;out
<br>
&nbsp;&nbsp;this&nbsp;sacred&nbsp;quest?&nbsp;Will&nbsp;you?&lt;/q&gt;&nbsp;&nbsp;&lt;&lt;gSetKnown(goldenBanana)&gt;&gt;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;gPlayerChar.setHasSeen(ghost)&gt;&gt;"
<br>
&nbsp;&nbsp;canEndConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;switch(reason)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;endConvTravel:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"You&nbsp;are&nbsp;rooted&nbsp;to&nbsp;the&nbsp;spot.&nbsp;";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;endConvBye:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&lt;q&gt;Oh&nbsp;no,&nbsp;you&nbsp;don't&nbsp;get&nbsp;rid&nbsp;of&nbsp;me&nbsp;that&nbsp;easily!&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cries&nbsp;the&nbsp;ghost.&nbsp;";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}
<br>
&nbsp;&nbsp;}
<br>
&nbsp;&nbsp;npcContinueMsg&nbsp;=&nbsp;"The&nbsp;ghost&nbsp;lets&nbsp;out&nbsp;a&nbsp;low&nbsp;moan&nbsp;and&nbsp;whispers
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;My&nbsp;answer!&nbsp;My&nbsp;answer!&nbsp;I&nbsp;will&nbsp;have&nbsp;my&nbsp;answer!&nbsp;Do&nbsp;you
<br>
&nbsp;&nbsp;&nbsp;accept&nbsp;your&nbsp;quest?&lt;/q&gt;&nbsp;"
<br>
;
<br>

<br>
++&nbsp;NoTopic,&nbsp;SuggestedNoTopic
<br>
&nbsp;&nbsp;"&lt;q&gt;Er,&nbsp;no&nbsp;thanks.&nbsp;I'm&nbsp;off&nbsp;sacred&nbsp;quests&nbsp;at&nbsp;the&nbsp;moment...&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;begin&nbsp;feebly.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;No&nbsp;is&nbsp;not&nbsp;the&nbsp;right&nbsp;answer!&lt;/q&gt;&nbsp;the&nbsp;ghost&nbsp;interrupts&nbsp;you,
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;By&nbsp;toppling&nbsp;my&nbsp;statue&nbsp;you&nbsp;have&nbsp;shown&nbsp;you&nbsp;are&nbsp;the&nbsp;one!
<br>
&nbsp;&nbsp;&nbsp;So&nbsp;-&nbsp;will&nbsp;you&nbsp;accept&nbsp;your&nbsp;responsibilities&nbsp;and&nbsp;take&nbsp;up&nbsp;the
<br>
&nbsp;&nbsp;&nbsp;quest?&lt;/q&gt;&lt;.convstay&gt;"
<br>
;
<br>

<br>
++&nbsp;YesTopic,&nbsp;SuggestedYesTopic
<br>
&nbsp;&nbsp;"&lt;q&gt;Well,&nbsp;if&nbsp;you&nbsp;insist...&lt;/q&gt;&nbsp;you&nbsp;begin.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;I&nbsp;&lt;i&gt;do&lt;/i&gt;&nbsp;insist!&lt;/q&gt;&nbsp;roars&nbsp;the&nbsp;ghost,&nbsp;&lt;q&gt;So,
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;have&nbsp;accepted&nbsp;the&nbsp;quest.&nbsp;Do&nbsp;you&nbsp;have&nbsp;any
<br>
&nbsp;&nbsp;&nbsp;questions&nbsp;about&nbsp;it?&lt;/q&gt;&lt;.convnode&nbsp;quest-questions&gt;&nbsp;"
<br>
;
<br>

<br>
++&nbsp;AskTopic,&nbsp;SuggestedAskTopic&nbsp;@goldenBanana
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;What&nbsp;is&nbsp;this&nbsp;Golden&nbsp;Banana&nbsp;you're&nbsp;on&nbsp;about,&nbsp;anyway?&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;ask.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;It&nbsp;is&nbsp;that&nbsp;which&nbsp;you&nbsp;must&nbsp;find&nbsp;and&nbsp;destroy&nbsp;in&nbsp;your
<br>
&nbsp;&nbsp;&nbsp;quest!&lt;/q&gt;&nbsp;the&nbsp;ghost&nbsp;answers,&nbsp;&lt;q&gt;Now,&nbsp;does&nbsp;this&nbsp;mean&nbsp;that
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;are&nbsp;accepting&nbsp;your&nbsp;sacred&nbsp;task?&lt;/q&gt;&lt;.convstay&gt;"
<br>
&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'the&nbsp;golden&nbsp;banana'
<br>
;
<br>

<br>
++&nbsp;DefaultAnyTopic
<br>
&nbsp;&nbsp;"&lt;q&gt;Trying&nbsp;to&nbsp;change&nbsp;the&nbsp;subject&nbsp;will&nbsp;avail&nbsp;you&nbsp;nothing!&lt;/q&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;the&nbsp;ghost&nbsp;tells&nbsp;you,&nbsp;&lt;q&gt;When&nbsp;you've&nbsp;been&nbsp;dead&nbsp;as&nbsp;long&nbsp;as&nbsp;I&nbsp;have
<br>
&nbsp;&nbsp;you&nbsp;become&nbsp;&lt;i&gt;very&lt;/i&gt;&nbsp;single&nbsp;minded&nbsp;-&nbsp;almost&nbsp;monomaniac&nbsp;-
<br>
&nbsp;&nbsp;so&nbsp;I&nbsp;&lt;i&gt;will&lt;/i&gt;&nbsp;have&nbsp;my&nbsp;answer&nbsp;and&nbsp;you&nbsp;&lt;i&gt;shall&lt;/i&gt;&nbsp;not&nbsp;leave
<br>
&nbsp;&nbsp;this&nbsp;spot&nbsp;until&nbsp;I&nbsp;do.&nbsp;So,&nbsp;I&nbsp;ask&nbsp;again,&nbsp;do&nbsp;you&nbsp;accept&nbsp;the&nbsp;Sacred
<br>
&nbsp;&nbsp;Quest&nbsp;of&nbsp;the&nbsp;Golden&nbsp;Banana?&lt;/q&gt;&lt;.convstay&gt;"&nbsp;&nbsp;
<br>
;&nbsp;&nbsp;
<br>

<br>
+&nbsp;ConvNode&nbsp;'quest-questions'
<br>
&nbsp;&nbsp;npcContinueMsg&nbsp;=&nbsp;"&lt;q&gt;Do&nbsp;you&nbsp;have&nbsp;any&nbsp;further&nbsp;questions?&lt;/q&gt;&nbsp;{the&nbsp;ghost/he}
<br>
&nbsp;&nbsp;&nbsp;asks&nbsp;patiently.&nbsp;"
<br>
&nbsp;&nbsp;canEndConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(reason==endConvTravel)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"You&nbsp;are&nbsp;too&nbsp;absorbed&nbsp;with&nbsp;{the&nbsp;ghost/him}&nbsp;to&nbsp;leave&nbsp;right&nbsp;now.&nbsp;";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;}
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
<br>
&nbsp;&nbsp;}&nbsp;
<br>
&nbsp;&nbsp;endConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"&lt;q&gt;Well,&nbsp;goodbye&nbsp;then.&lt;/q&gt;&nbsp;you&nbsp;say.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;Farewell,&nbsp;Banana-Quester!&lt;/q&gt;&nbsp;{the&nbsp;ghost/he}&nbsp;replies,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;if&nbsp;you&nbsp;are&nbsp;sure&nbsp;you&nbsp;have&nbsp;no&nbsp;further&nbsp;questions?&lt;/q&gt;\b";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;nestedAction(No);
<br>
&nbsp;&nbsp;}
<br>
;
<br>

<br>
++&nbsp;NoTopic,&nbsp;SuggestedNoTopic
<br>
&nbsp;&nbsp;topicResponse
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;No,&nbsp;I&nbsp;don't&nbsp;think&nbsp;so.&lt;/q&gt;&nbsp;you&nbsp;reply.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;Very&nbsp;well,&nbsp;&lt;/q&gt;&nbsp;he&nbsp;sighs,&nbsp;&lt;q&gt;Then&nbsp;I&nbsp;may&nbsp;depart,&nbsp;my&nbsp;job&nbsp;is&nbsp;done.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Should&nbsp;you&nbsp;need&nbsp;to&nbsp;know&nbsp;more,&nbsp;consult&nbsp;the&nbsp;Great&nbsp;History&nbsp;in&nbsp;the&nbsp;Old
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Library.&nbsp;Nunc&nbsp;dimittis&nbsp;servum&nbsp;tuum&nbsp;Domine...&nbsp;&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;a&nbsp;final&nbsp;moan,&nbsp;{the&nbsp;ghost/he}&nbsp;fades&nbsp;out&nbsp;of&nbsp;sight.&nbsp;";
<br>
&nbsp;&nbsp;&nbsp;ghost.moveInto(nil);
<br>
&nbsp;&nbsp;}
<br>
;
<br>

<br>
++&nbsp;YesTopic,&nbsp;SuggestedYesTopic
<br>
&nbsp;&nbsp;"&lt;q&gt;Yes,&nbsp;I&nbsp;do.&lt;/q&gt;&nbsp;you&nbsp;reply.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;Would&nbsp;you&nbsp;care&nbsp;to&nbsp;be&nbsp;more&nbsp;specific?&lt;/q&gt;&nbsp;{the&nbsp;ghost/he}&nbsp;suggests.&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&lt;.convstay&gt;"
<br>
;
<br>

<br>
++&nbsp;AskTopic,&nbsp;SuggestedAskTopic,&nbsp;StopEventList&nbsp;@ghost
<br>
&nbsp;&nbsp;[
<br>
&nbsp;&nbsp;&nbsp;{:&nbsp;"&lt;q&gt;Yes,&nbsp;who&nbsp;are&nbsp;you?&lt;/q&gt;&nbsp;you&nbsp;demand.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;I&nbsp;am&nbsp;-&nbsp;or&nbsp;was&nbsp;-&nbsp;&lt;&lt;ghost.makeProper()&gt;&gt;&nbsp;the&nbsp;Banana-Bearer.&lt;/q&gt;&nbsp;he
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tells&nbsp;you.&nbsp;&lt;q&gt;I&nbsp;it&nbsp;was&nbsp;who&nbsp;countless&nbsp;aeons&nbsp;ago&nbsp;-&nbsp;or&nbsp;last&nbsp;week&nbsp;-&nbsp;ghosts
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;don't&nbsp;have&nbsp;such&nbsp;a&nbsp;good&nbsp;sense&nbsp;of&nbsp;time,&nbsp;you&nbsp;see,&nbsp;time&nbsp;doesn't&nbsp;mean&nbsp;much
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;you're&nbsp;dead.&nbsp;Ah,&nbsp;where&nbsp;was&nbsp;I?&nbsp;Oh&nbsp;yes,&nbsp;I&nbsp;it&nbsp;was&nbsp;who&nbsp;countless
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ages&nbsp;ago&nbsp;chanced&nbsp;life&nbsp;and&nbsp;limb&nbsp;and&nbsp;sanity&nbsp;itself&nbsp;to&nbsp;snatch&nbsp;the
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Golden&nbsp;Banana&nbsp;of&nbsp;Discord&nbsp;from&nbsp;the&nbsp;slopes&nbsp;of&nbsp;Mount&nbsp;Gloom,&nbsp;and&nbsp;smuggle
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;past&nbsp;the&nbsp;dread&nbsp;demons&nbsp;of&nbsp;Hell-Fire&nbsp;Cavern&nbsp;into&nbsp;the&nbsp;world&nbsp;of&nbsp;men!
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;great&nbsp;hero&nbsp;men&nbsp;thought&nbsp;me!&nbsp;A&nbsp;great&nbsp;fool&nbsp;I&nbsp;was.&nbsp;Oh&nbsp;woe!&nbsp;Woe!&nbsp;Woe!&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;His&nbsp;moaning&nbsp;complete,&nbsp;the&nbsp;ghost&nbsp;enquires,&nbsp;&lt;q&gt;Right,&nbsp;any&nbsp;more&nbsp;questions?&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;.convstay&gt;"&nbsp;},
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'&lt;q&gt;But&nbsp;who&nbsp;are&nbsp;you?&lt;/q&gt;&nbsp;you&nbsp;ask.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;I&nbsp;told&nbsp;you&nbsp;I&nbsp;am&nbsp;-&nbsp;or&nbsp;was&nbsp;-&nbsp;Benedict&nbsp;the&nbsp;Banana-Bearer.&lt;/q&gt;&nbsp;he
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reminds&nbsp;you.&nbsp;&lt;q&gt;Anything&nbsp;else?&lt;/q&gt;&nbsp;&lt;.convstay&gt;'
<br>
&nbsp;&nbsp;]
<br>
&nbsp;&nbsp;name&nbsp;=&nbsp;'himself'
<br>
;
<br>

<br>
++&nbsp;AskTopic,&nbsp;SuggestedAskTopic,&nbsp;StopEventList&nbsp;@goldenBanana
<br>
&nbsp;&nbsp;[
<br>
&nbsp;&nbsp;&nbsp;&nbsp;'&lt;q&gt;So&nbsp;what&nbsp;exactly&nbsp;is&nbsp;this&nbsp;Golden&nbsp;Banana&nbsp;thingy?&nbsp;And&nbsp;why\'s
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;so&nbsp;important?&lt;/q&gt;&nbsp;you&nbsp;enquire.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;The&nbsp;Golden&nbsp;Banana&nbsp;of&nbsp;Discord&nbsp;is&nbsp;the&nbsp;most&nbsp;Awesome&nbsp;Artifact&nbsp;in
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Universe!&lt;/q&gt;&nbsp;cries&nbsp;{the&nbsp;ghost/he},&nbsp;&lt;q&gt;When&nbsp;I&nbsp;fetched&nbsp;it&nbsp;from
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;slopes&nbsp;of&nbsp;Mount&nbsp;Gloom&nbsp;I&nbsp;thought&nbsp;I&nbsp;was&nbsp;conferring&nbsp;immeasurable
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;benefits&nbsp;on&nbsp;my&nbsp;fellow&nbsp;man&nbsp;-&nbsp;health,&nbsp;wealth,&nbsp;happiness,&nbsp;power&nbsp;-
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;everything.&nbsp;Fool&nbsp;that&nbsp;I&nbsp;was!&nbsp;Oh&nbsp;yes,&nbsp;the&nbsp;Golden&nbsp;Banana&nbsp;is&nbsp;powerful
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;right.&nbsp;Too&nbsp;powerful!&nbsp;And&nbsp;it&nbsp;is&nbsp;a&nbsp;terrible&nbsp;power!&nbsp;It&nbsp;is&nbsp;best
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;do&nbsp;not&nbsp;know&nbsp;too&nbsp;much&nbsp;about&nbsp;it,&nbsp;lest&nbsp;you&nbsp;be&nbsp;tempted&nbsp;to&nbsp;imitate
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;folly&nbsp;of&nbsp;others.&nbsp;But&nbsp;know&nbsp;this,&nbsp;should&nbsp;the&nbsp;Golden&nbsp;Banana&nbsp;of
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Discord&nbsp;fall&nbsp;into&nbsp;the&nbsp;wrong&nbsp;hands,&nbsp;then&nbsp;all&nbsp;is&nbsp;lost,&nbsp;all!&nbsp;It&nbsp;will
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;the&nbsp;end&nbsp;of&nbsp;life,&nbsp;death&nbsp;and&nbsp;Interactive&nbsp;Fiction&nbsp;as&nbsp;we&nbsp;know&nbsp;it!
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horrible!&nbsp;Terrible!&nbsp;So&nbsp;I&nbsp;implore&nbsp;you,&nbsp;find&nbsp;it&nbsp;and&nbsp;destroy&nbsp;it&nbsp;as
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;soon&nbsp;as&nbsp;you&nbsp;can&nbsp;-&nbsp;the&nbsp;only&nbsp;way&nbsp;it&nbsp;can&nbsp;be&nbsp;destroyed,&nbsp;by&nbsp;being&nbsp;cast
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;the&nbsp;fires&nbsp;of&nbsp;Mount&nbsp;Gloom!&nbsp;So,&nbsp;is&nbsp;there&nbsp;anything&nbsp;else&nbsp;you
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;would&nbsp;know?&lt;/q&gt;&nbsp;&lt;.convstay&gt;',
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'&lt;q&gt;Is&nbsp;there&nbsp;anything&nbsp;else&nbsp;you&nbsp;can&nbsp;tell&nbsp;me&nbsp;about&nbsp;this&nbsp;Golden
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Banana?&lt;/q&gt;&nbsp;you&nbsp;enquire.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;I&nbsp;have&nbsp;told&nbsp;you&nbsp;all&nbsp;you&nbsp;need&nbsp;to&nbsp;know.&lt;/q&gt;&nbsp;{the&nbsp;ghost/he}
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assures&nbsp;you.&nbsp;&lt;q&gt;It&nbsp;is&nbsp;a&nbsp;terrible,&nbsp;powerful&nbsp;artifact&nbsp;that&nbsp;must
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;destroyed.&nbsp;For&nbsp;you&nbsp;to&nbsp;know&nbsp;more&nbsp;is&nbsp;too&nbsp;dangerous.&nbsp;Any&nbsp;other
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;questions?&lt;/q&gt;&lt;.convstay&gt;'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;]
<br>
&nbsp;&nbsp;name&nbsp;=&nbsp;'the&nbsp;Golden&nbsp;Banana&nbsp;of&nbsp;Discord'
<br>
;
<br>

<br>
++&nbsp;AskTopic,&nbsp;SuggestedAskTopic&nbsp;@tCabal
<br>
&nbsp;&nbsp;"&lt;q&gt;Who&nbsp;or&nbsp;what&nbsp;is&nbsp;this&nbsp;cabal&nbsp;you're&nbsp;so&nbsp;worried&nbsp;about?&lt;/q&gt;&nbsp;you&nbsp;wonder.\b
<br>
&nbsp;&nbsp;&nbsp;{The&nbsp;ghost/he}&nbsp;looks&nbsp;distinctly&nbsp;shifty&nbsp;as&nbsp;he&nbsp;replies,&nbsp;&lt;q&gt;That's&nbsp;the
<br>
&nbsp;&nbsp;&nbsp;problem,&nbsp;no&nbsp;one&nbsp;knows!&lt;/q&gt;&nbsp;he&nbsp;tells&nbsp;you,&nbsp;&lt;q&gt;That's&nbsp;why&nbsp;they're&nbsp;so
<br>
&nbsp;&nbsp;&nbsp;terrifying&nbsp;-&nbsp;they&nbsp;could&nbsp;be&nbsp;anyone,&nbsp;anyone&nbsp;at&nbsp;all!&nbsp;But&nbsp;whoever&nbsp;they&nbsp;
<br>
&nbsp;&nbsp;&nbsp;are,&nbsp;you&nbsp;&lt;i&gt;mustn't&lt;/i&gt;&nbsp;let&nbsp;them&nbsp;get&nbsp;the&nbsp;Golden&nbsp;Banana&nbsp;-&nbsp;or&nbsp;else&nbsp;-
<br>
&nbsp;&nbsp;&nbsp;or&nbsp;else&nbsp;we're&nbsp;all&nbsp;doomed&nbsp;-&nbsp;doomed!&lt;/q&gt;&nbsp;He&nbsp;blinks&nbsp;a&nbsp;few&nbsp;more&nbsp;times,
<br>
&nbsp;&nbsp;&nbsp;then&nbsp;asks,&nbsp;&lt;q&gt;Was&nbsp;there&nbsp;anything&nbsp;else&nbsp;you&nbsp;wanted&nbsp;to&nbsp;know?&lt;/q&gt;&lt;.convstay&gt;"
<br>
&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'the&nbsp;Cabal'
<br>
;
<br>

<br>
++&nbsp;DefaultAnyTopic
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;Such&nbsp;things&nbsp;no&nbsp;longer&nbsp;concern&nbsp;me,&lt;/q&gt;&nbsp;{the&nbsp;ghost/he}&nbsp;sighs,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;I&nbsp;am&nbsp;dead,&nbsp;after&nbsp;all.&nbsp;Now,&nbsp;was&nbsp;there&nbsp;anything&nbsp;else?&lt;/q&gt;&lt;.convstay&gt;&nbsp;"
<br>
;
<br>

<br>
tCabal&nbsp;:&nbsp;Topic&nbsp;'cabal'&nbsp;;&nbsp;&nbsp;
<br>
</font><font face="Arial" size="2" color="#000000">
<p>When copying this code make sure that the final line (the definition of the tCabal Topic) doesn't get mixed up with your objecty hierarchy; you might want it to move it to somewhere safe, such as the end of the file.</p>

Note the use of the endConversation method in the second ConvNode to call a nested No command in the event of the player typing BYE; this way the code in the NoTopic is run whether the player leaves the ConvNode by typing BYE or NO. Note also that in order to make it work properly we have to give the first ConvNode a name property ('ghostQuestion') even though we entered it by referring to its object name (ghostNode).
<br>

<br>
If you try this out you'll find there's a small problem: if Sarah is accompanying the player character when the two of them encounter the ghost, an initiateTopic is triggered on Sarah, so <i>she</i> becomes the current interlocutor, with the result that if the player directs a response to the ghost or tries a TOPICS command, it'll be taken as directed at Sarah, which isn't what we want. There may be more than one way round this, but the way we'll use is to modify Sarah's InitiateTopic so that it deflects conversation back to the ghost, like this:
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">+&nbsp;InitiateTopic&nbsp;@ghostAppearingEvent
<br>
&nbsp;&nbsp;topicResponse
<br>
&nbsp;&nbsp;{&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;"\b&lt;q&gt;Eek!&lt;/q&gt;&nbsp;cries&nbsp;{the&nbsp;sarah/she},&nbsp;clutching&nbsp;at&nbsp;your&nbsp;arm.&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;getActor.setHasSeen(ghost)&gt;&gt;&lt;.p&gt;";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;replaceAction(AskAbout,&nbsp;ghost,&nbsp;sarah);
<br>
&nbsp;&nbsp;}
<br>
;
<br>
</font><font face="Arial" size="2" color="#000000">
<br>
Now we need to add an appropriate AskTopic in the ghostNode ConvNode to field this question:
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">++&nbsp;AskTopic&nbsp;@sarah
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;Never&nbsp;mind&nbsp;her,&lt;/q&gt;&nbsp;the&nbsp;ghost&nbsp;insists,&nbsp;&lt;q&gt;just&nbsp;answer&nbsp;my
<br>
&nbsp;&nbsp;&nbsp;question.&lt;/q&gt;&lt;.convstay&gt;&lt;.topics&gt;&lt;.p&gt;"
<br>
&nbsp;&nbsp;&nbsp;isActive&nbsp;=&nbsp;(gPlayerChar.canSee(sarah))
<br>
;
<br>
</font><font face="Arial" size="2" color="#000000">
<br>
This will work fine after Sarah clutching the player character's arm, but will also be fine as a response to ASK GHOST ABOUT SARAH.
<br>

<br>
Well, that's quite enough about the ghost. Let's move on to the king. When the player character suddenly walks in on King Solomon, appearing as if by magic out of his hitherto empty bedroom, it's likely to give the monarch a bit of a shock, so you would imagine that Solomon won't wait to be addressed, but will ask who the intruder is. Again, we can use initiateConversation to handle this:
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">++&nbsp;solomonExamining&nbsp;:&nbsp;ConversationReadyState
<br>
&nbsp;&nbsp;specialDesc&nbsp;{inherited;&nbsp;stateDesc;&nbsp;}
<br>
&nbsp;&nbsp;stateDesc&nbsp;=&nbsp;"He's&nbsp;staring&nbsp;at&nbsp;the&nbsp;table,&nbsp;deep&nbsp;in&nbsp;thought.&nbsp;"
<br>
&nbsp;&nbsp;isInitState&nbsp;=&nbsp;true
<br>
&nbsp;&nbsp;<b>afterTravel(traveler,&nbsp;connector)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(traveler==gPlayerChar&nbsp;&amp;&amp;&nbsp;!getActor.isProperName)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getActor.initiateConversation(solomonTalking,&nbsp;'solomon-surprised');
<br>
&nbsp;&nbsp;}</b>
<br>
;
<br>
</font><font face="Arial" size="2" color="#000000">
<br>
Then we then add a couple of ConvNodes (located in solomon) to get the conversation started:
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">+&nbsp;ConvNode&nbsp;'solomon-surprised'
<br>
&nbsp;&nbsp;npcGreetingMsg&nbsp;=&nbsp;"{The&nbsp;solomon/he}&nbsp;looks&nbsp;up,&nbsp;startled&nbsp;at&nbsp;your
<br>
&nbsp;&nbsp;&nbsp;appearance,&nbsp;and&nbsp;then&nbsp;says&nbsp;something&nbsp;that&nbsp;sounds&nbsp;like:
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;Shlomo&nbsp;ani,&nbsp;melek&nbsp;yisrael,&nbsp;ha-hakhim&nbsp;ha-gadhol.&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;At&nbsp;that&nbsp;point&nbsp;your&nbsp;ears&nbsp;mysteriously&nbsp;tune&nbsp;into&nbsp;the&nbsp;ancient&nbsp;tongue&nbsp;and
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;realize&nbsp;that&nbsp;what&nbsp;he&nbsp;just&nbsp;said&nbsp;was,&nbsp;&lt;q&gt;I&nbsp;am&nbsp;&lt;&lt;solomon.makeProper()&gt;&gt;,
<br>
&nbsp;&nbsp;&nbsp;King&nbsp;of&nbsp;Israel,&nbsp;the&nbsp;great&nbsp;sage.&lt;/q&gt;&nbsp;He&nbsp;continues,&nbsp;&lt;q&gt;Who&nbsp;are&nbsp;you,
<br>
&nbsp;&nbsp;&nbsp;where&nbsp;are&nbsp;you&nbsp;from,&nbsp;how&nbsp;did&nbsp;you&nbsp;get&nbsp;here?&nbsp;I&nbsp;know&nbsp;my&nbsp;bedroom&nbsp;was&nbsp;empty
<br>
&nbsp;&nbsp;&nbsp;just&nbsp;now,&nbsp;and&nbsp;no&nbsp;one&nbsp;could&nbsp;have&nbsp;got&nbsp;in,&nbsp;so&nbsp;who&nbsp;are&nbsp;you?&lt;/q&gt;&nbsp;"
<br>
&nbsp;&nbsp;npcContinueMsg&nbsp;=&nbsp;"&lt;q&gt;I'm&nbsp;still&nbsp;waiting&nbsp;for&nbsp;your&nbsp;reply.&lt;/q&gt;&nbsp;{the&nbsp;solomon/he}
<br>
&nbsp;&nbsp;&nbsp;reminds&nbsp;you.&nbsp;&lt;q&gt;Who&nbsp;are&nbsp;you?&nbsp;Why&nbsp;are&nbsp;you&nbsp;here?&lt;/q&gt;&nbsp;"&nbsp;
<br>
&nbsp;&nbsp;canEndConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dontEndSolomonConversation(reason);
<br>
&nbsp;&nbsp;}&nbsp;
<br>
&nbsp;&nbsp;limitSuggestions&nbsp;=&nbsp;true
<br>
;
<br>

<br>
++&nbsp;SpecialTopic&nbsp;'explain&nbsp;that&nbsp;you&nbsp;are&nbsp;from&nbsp;the&nbsp;future'
<br>
&nbsp;&nbsp;&nbsp;['explain',&nbsp;'that',&nbsp;'you',&nbsp;'you\'re',&nbsp;'from',&nbsp;'the',&nbsp;'future']
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;Actually,&nbsp;I'm&nbsp;a&nbsp;time-traveller,&nbsp;from&nbsp;about&nbsp;three&nbsp;thousand&nbsp;years
<br>
&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;your&nbsp;future.&lt;/q&gt;&nbsp;you&nbsp;tell&nbsp;him.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;You&nbsp;travel&nbsp;in&nbsp;time?&lt;/q&gt;&nbsp;he&nbsp;queries,&nbsp;&lt;q&gt;Then&nbsp;you&nbsp;must&nbsp;be&nbsp;some&nbsp;kind
<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;angel,&nbsp;a&nbsp;messenger&nbsp;of&nbsp;the&nbsp;Lord?&nbsp;So&nbsp;what&nbsp;message&nbsp;do&nbsp;you&nbsp;bear?
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Speak!&lt;/q&gt;&lt;.convnode&nbsp;solomon-angel&gt;"
<br>
;
<br>

<br>
++&nbsp;SpecialTopic&nbsp;'lie'&nbsp;['lie']
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;Well,&nbsp;actually&nbsp;I'm&nbsp;an&nbsp;angel&nbsp;in&nbsp;human&nbsp;form.&lt;/q&gt;&nbsp;you&nbsp;lie.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;king&nbsp;nods&nbsp;sagely,&nbsp;&lt;q&gt;Well,&nbsp;you&nbsp;certainly&nbsp;look&nbsp;like&nbsp;no&nbsp;man
<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;ever&nbsp;seen.&lt;/q&gt;&nbsp;he&nbsp;concurs,&nbsp;&lt;q&gt;So&nbsp;perhaps&nbsp;an&nbsp;angel&nbsp;is&nbsp;what&nbsp;you
<br>
&nbsp;&nbsp;&nbsp;&nbsp;must&nbsp;be.&nbsp;What&nbsp;message&nbsp;do&nbsp;you&nbsp;bring?&lt;/q&gt;&lt;.convnode&nbsp;solomon-angel&gt;"
<br>
;
<br>

<br>
++&nbsp;DefaultAnyTopic,&nbsp;StopEventList&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;&nbsp;[
<br>
&nbsp;&nbsp;&nbsp;&nbsp;'&lt;q&gt;I&nbsp;think&nbsp;we&nbsp;should&nbsp;establish&nbsp;who&nbsp;you&nbsp;are&nbsp;before&nbsp;we&nbsp;attend&nbsp;to
<br>
&nbsp;&nbsp;&nbsp;&nbsp;anything&nbsp;else.&lt;/q&gt;&nbsp;the&nbsp;king&nbsp;insists,&nbsp;&lt;q&gt;After&nbsp;all,&nbsp;it\'s&nbsp;not&nbsp;every&nbsp;day
<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;strangers&nbsp;suddenly&nbsp;emerge&nbsp;from&nbsp;my&nbsp;bedroom.&nbsp;So,&nbsp;what&nbsp;account&nbsp;do
<br>
&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;have&nbsp;to&nbsp;give&nbsp;of&nbsp;yourself?&lt;/q&gt;&lt;.convstay&gt;',
<br>
&nbsp;&nbsp;&nbsp;&nbsp;'&lt;q&gt;First&nbsp;tell&nbsp;me&nbsp;who&nbsp;you&nbsp;are.&lt;/q&gt;&nbsp;{the&nbsp;solomon/he}&nbsp;insists.&lt;.convstay&gt;&nbsp;'
<br>
&nbsp;&nbsp;&nbsp;]
<br>
;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
+&nbsp;ConvNode&nbsp;'solomon-angel'
<br>
&nbsp;&nbsp;limitSuggestions&nbsp;=&nbsp;true
<br>
&nbsp;&nbsp;canEndConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dontEndSolomonConversation(reason);
<br>
&nbsp;&nbsp;}
<br>
;&nbsp;
<br>

<br>
++&nbsp;SpecialTopic&nbsp;'warn&nbsp;him&nbsp;about&nbsp;his&nbsp;son&nbsp;Rehoboam'&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;['warn'&nbsp;,'king',&nbsp;'solomon',&nbsp;'him',&nbsp;'about',&nbsp;'his',&nbsp;'son',&nbsp;'rehoboam']
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;I've&nbsp;come&nbsp;to&nbsp;warn&nbsp;you&nbsp;about&nbsp;your&nbsp;son&nbsp;Rehoboam.&lt;/q&gt;&nbsp;you&nbsp;improvise,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;If&nbsp;you&nbsp;don't&nbsp;keep&nbsp;the&nbsp;lad&nbsp;in&nbsp;check,&nbsp;he'll&nbsp;split&nbsp;your&nbsp;kingdom&nbsp;after
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you've&nbsp;gone!&nbsp;Er,&nbsp;Thus&nbsp;says&nbsp;the&nbsp;Lord,&nbsp;because&nbsp;Rehoboam&nbsp;will&nbsp;chastise
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my&nbsp;people&nbsp;with&nbsp;scorpions,&nbsp;I&nbsp;shall&nbsp;tear&nbsp;them&nbsp;out&nbsp;of&nbsp;his&nbsp;hands,&nbsp;but&nbsp;I
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shall&nbsp;leave&nbsp;two&nbsp;tribes&nbsp;only&nbsp;for&nbsp;the&nbsp;sake&nbsp;of&nbsp;my&nbsp;servant&nbsp;David.&lt;/q&gt;\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;You&nbsp;have&nbsp;been&nbsp;sent&nbsp;to&nbsp;warn&nbsp;me&nbsp;about&nbsp;my&nbsp;son?&lt;/q&gt;&nbsp;Solomon&nbsp;muses,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;Then&nbsp;I&nbsp;must&nbsp;watch&nbsp;him.&nbsp;It&nbsp;is&nbsp;true&nbsp;the&nbsp;company&nbsp;he&nbsp;keeps&nbsp;is&nbsp;not
<br>
&nbsp;&nbsp;&nbsp;&nbsp;everything&nbsp;I&nbsp;could&nbsp;wish.&lt;/q&gt;&lt;&lt;hiramNode.npcGreetingMsg&gt;&gt;&lt;.convnode&nbsp;hiram&gt;"
<br>
;&nbsp;
<br>

<br>
++&nbsp;SpecialTopic&nbsp;'condemn&nbsp;his&nbsp;foreign&nbsp;wives'
<br>
&nbsp;&nbsp;&nbsp;['condemn',&nbsp;'his',&nbsp;'foreign',&nbsp;'wives'&nbsp;]
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;Er&nbsp;-&nbsp;Thus&nbsp;says&nbsp;the&nbsp;Lord,&nbsp;because&nbsp;you&nbsp;have&nbsp;not&nbsp;been&nbsp;content&nbsp;with&nbsp;a
<br>
&nbsp;&nbsp;&nbsp;&nbsp;few&nbsp;wives,&nbsp;but&nbsp;have&nbsp;taken&nbsp;many&nbsp;unto&nbsp;yourself,&nbsp;and&nbsp;because&nbsp;you&nbsp;have&nbsp;allowed
<br>
&nbsp;&nbsp;&nbsp;&nbsp;yourself&nbsp;to&nbsp;be&nbsp;led&nbsp;after&nbsp;the&nbsp;foreign&nbsp;gods&nbsp;that&nbsp;are&nbsp;no&nbsp;gods&nbsp;that&nbsp;these
<br>
&nbsp;&nbsp;&nbsp;&nbsp;foreign&nbsp;women&nbsp;worship,&nbsp;I&nbsp;shall&nbsp;turn&nbsp;my&nbsp;face&nbsp;from&nbsp;you,&nbsp;and&nbsp;the&nbsp;kingdom
<br>
&nbsp;&nbsp;&nbsp;&nbsp;shall&nbsp;be&nbsp;torn&nbsp;in&nbsp;two!&lt;/q&gt;&nbsp;you&nbsp;improvise.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;My&nbsp;wives!&lt;/q&gt;&nbsp;the&nbsp;King&nbsp;tries&nbsp;to&nbsp;sound&nbsp;indignant,&nbsp;but&nbsp;looks&nbsp;more&nbsp;than
<br>
&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;little&nbsp;guilty.&lt;&lt;hiramNode.npcGreetingMsg&gt;&gt;&nbsp;&lt;.convnode&nbsp;hiram&gt;"
<br>
;
<br>

<br>
++&nbsp;SpecialTopic&nbsp;'complain&nbsp;about&nbsp;his&nbsp;labour&nbsp;policy'
<br>
&nbsp;&nbsp;&nbsp;['complain',&nbsp;'about',&nbsp;'his',&nbsp;'labour',&nbsp;'policy']
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;You've&nbsp;been&nbsp;using&nbsp;too&nbsp;much&nbsp;forced&nbsp;labour&nbsp;on&nbsp;your&nbsp;building&nbsp;projects.&lt;/q&gt;
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;tell&nbsp;him,&nbsp;&lt;q&gt;The&nbsp;Lord&nbsp;is&nbsp;not&nbsp;pleased&nbsp;with&nbsp;this&nbsp;social&nbsp;injustice!&lt;/q&gt;\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;Social&nbsp;injustice?&lt;/q&gt;&nbsp;Solomon&nbsp;echoes,&nbsp;&lt;q&gt;What&nbsp;kind&nbsp;of&nbsp;language&nbsp;is&nbsp;that?
<br>
&nbsp;&nbsp;&nbsp;Besides,&nbsp;I&nbsp;am&nbsp;building&nbsp;a&nbsp;Temple&nbsp;to&nbsp;the&nbsp;Lord,&nbsp;and&nbsp;the&nbsp;people&nbsp;are&nbsp;happy&nbsp;to
<br>
&nbsp;&nbsp;&nbsp;participate&nbsp;in&nbsp;this&nbsp;great&nbsp;work!&lt;/q&gt;&lt;&lt;hiramNode.npcGreetingMsg&gt;&gt;
<br>
&nbsp;&nbsp;&nbsp;&lt;.convnode&nbsp;hiram&gt;"
<br>
;
<br>

<br>
+&nbsp;hiramNode&nbsp;:&nbsp;ConvNode&nbsp;'hiram'
<br>
&nbsp;&nbsp;npcGreetingMsg&nbsp;=&nbsp;"&lt;.p&gt;Solomon&nbsp;frowns&nbsp;at&nbsp;you&nbsp;thoughtfully&nbsp;for&nbsp;a&nbsp;moment,
<br>
&nbsp;&nbsp;&nbsp;then&nbsp;continues&nbsp;slowly,&nbsp;&lt;q&gt;Angel&nbsp;or&nbsp;no&nbsp;angel,&nbsp;perhaps&nbsp;you&nbsp;have&nbsp;been&nbsp;sent
<br>
&nbsp;&nbsp;&nbsp;to&nbsp;me&nbsp;to&nbsp;solve&nbsp;my&nbsp;problem&nbsp;with&nbsp;Hiram.&lt;/q&gt;&nbsp;"
<br>
&nbsp;&nbsp;npcContinueMsg&nbsp;=&nbsp;"&lt;q&gt;Yes,&nbsp;Hiram,&lt;/q&gt;&nbsp;Solomon&nbsp;nods,&nbsp;&lt;q&gt;you&nbsp;must&nbsp;be&nbsp;here
<br>
&nbsp;&nbsp;&nbsp;about&nbsp;Hiram.&lt;/q&gt;"&nbsp;
<br>
&nbsp;&nbsp;limitSuggestions&nbsp;=&nbsp;true
<br>
&nbsp;&nbsp;canEndConversation(actor,&nbsp;reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dontEndSolomonConversation(reason);
<br>
&nbsp;&nbsp;}
<br>
;
<br>

<br>
++&nbsp;DefaultAnyTopic
<br>
&nbsp;&nbsp;"&lt;q&gt;Your&nbsp;majesty...&lt;/q&gt;&nbsp;you&nbsp;begin.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;If&nbsp;you&nbsp;can&nbsp;solve&nbsp;my&nbsp;problem,&nbsp;I'll&nbsp;reward&nbsp;you&nbsp;whether
<br>
&nbsp;&nbsp;&nbsp;you're&nbsp;angel&nbsp;or&nbsp;no.&lt;/q&gt;&nbsp;Solomon&nbsp;continues,&nbsp;evidently&nbsp;totally&nbsp;intent
<br>
&nbsp;&nbsp;&nbsp;on&nbsp;this&nbsp;topic.&nbsp;&lt;q&gt;My&nbsp;neighbour&nbsp;King&nbsp;Hiram&nbsp;of&nbsp;Tyre&nbsp;has&nbsp;donated
<br>
&nbsp;&nbsp;&nbsp;a&nbsp;fine&nbsp;bronze&nbsp;vessel&nbsp;for&nbsp;the&nbsp;temple.&nbsp;Unfortunately&nbsp;it&nbsp;has&nbsp;gone&nbsp;missing.
<br>
&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;very&nbsp;unfortunate;&nbsp;Hiram&nbsp;was&nbsp;displeased&nbsp;with&nbsp;the&nbsp;Galilean&nbsp;cities
<br>
&nbsp;&nbsp;&nbsp;I&nbsp;gave&nbsp;him&nbsp;in&nbsp;payment&nbsp;for&nbsp;his&nbsp;contributions&nbsp;to&nbsp;my&nbsp;work&nbsp;on&nbsp;the&nbsp;Temple,
<br>
&nbsp;&nbsp;&nbsp;and&nbsp;he&nbsp;is&nbsp;coming&nbsp;to&nbsp;discuss&nbsp;the&nbsp;matter.&nbsp;If&nbsp;he&nbsp;finds&nbsp;that&nbsp;I&nbsp;have&nbsp;mislaid&nbsp;the
<br>
&nbsp;&nbsp;&nbsp;bronze&nbsp;bowl&nbsp;he&nbsp;specifically&nbsp;sent&nbsp;me&nbsp;to&nbsp;be&nbsp;dedicated&nbsp;on&nbsp;his&nbsp;behalf,&nbsp;he
<br>
&nbsp;&nbsp;&nbsp;will&nbsp;&lt;i&gt;not&lt;/i&gt;&nbsp;be&nbsp;pleased&nbsp;-&nbsp;and&nbsp;I&nbsp;cannot&nbsp;afford&nbsp;to&nbsp;upset&nbsp;him.&nbsp;So,
<br>
&nbsp;&nbsp;&nbsp;you&nbsp;must&nbsp;recover&nbsp;this&nbsp;vessel&nbsp;for&nbsp;me.&lt;/q&gt;&lt;&lt;gSetKnown(bronzeBowl)&gt;&gt;"
<br>
;
<br>

<br>
dontEndSolomonConversation(reason)
<br>
{
<br>
&nbsp;&nbsp;switch(reason)
<br>
&nbsp;&nbsp;{
<br>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;endConvTravel:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;endConvBye:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Even&nbsp;you&nbsp;realize&nbsp;that&nbsp;you&nbsp;don't&nbsp;just&nbsp;walk&nbsp;out&nbsp;on&nbsp;a&nbsp;king.&nbsp;";
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;default:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nil;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
}
<br>

<br>
</font><font face="Arial" size="2" color="#000000">Note how we've defined the dontEndSolomonConversation function to avoid having to repeat the same code in three ConvNodes. In both the above examples we've really only offered the player the illusion of choice: the path through the ConvNodes is the same whichever response the player chooses. It would, however, be possible to devise a branching conversation by having the NPC switch to different ConvNodes depending on the topic chosen. Note also the calls to &lt;&lt;</font><font face="Courier New" size="2" color="#000000">hiramNode.npcGreetingMsg</font><font face="Arial" size="2" color="#000000">&gt;&gt; in the various SpecialTopics in the previous ConvNode; after some experimentation this proved about the only method of getting this message displayed in the right place. The point is to give the player some illusion of freedom in conversing with Solomon, but to have the preoccupied king discuss Hiram and the missing bronze bowl no matter what.
<br>

<br>
Since Solomon introduces these topics into the conversation, it might be as well to add a couple of AskTopics in Solomon's solomonTalking state to handle them:
<br>

<br>
</font><font face="Courier New" size="2" color="#000000">++&nbsp;AskTopic,&nbsp;SuggestedAskTopic&nbsp;@bronzeBowl
<br>
&nbsp;&nbsp;&nbsp;"&lt;q&gt;What&nbsp;is&nbsp;this&nbsp;bowl&nbsp;you've&nbsp;lost,&nbsp;exactly?&lt;/q&gt;&nbsp;you&nbsp;ask.\b
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;q&gt;It's&nbsp;a&nbsp;vessel&nbsp;for&nbsp;the&nbsp;temple&nbsp;service&nbsp;-&nbsp;a&nbsp;sacred&nbsp;vessel.&lt;/q&gt;&nbsp;the
<br>
&nbsp;&nbsp;&nbsp;&nbsp;king&nbsp;tells&nbsp;you,&nbsp;&lt;q&gt;About&nbsp;a&nbsp;cubit&nbsp;in&nbsp;diameter,&nbsp;and&nbsp;decorated&nbsp;with
<br>
&nbsp;&nbsp;&nbsp;&nbsp;rows&nbsp;of&nbsp;pomegranates.&lt;/q&gt;&nbsp;"
<br>
&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'the&nbsp;bronze&nbsp;bowl'
<br>
;
<br>

<br>
++&nbsp;AskTopic,&nbsp;SuggestedAskTopic&nbsp;@tHiram
<br>
&nbsp;&nbsp;"&lt;q&gt;So&nbsp;why's&nbsp;this&nbsp;Hiram&nbsp;fellow&nbsp;so&nbsp;important?&lt;/q&gt;&nbsp;you&nbsp;want&nbsp;to&nbsp;know.\b
<br>
&nbsp;&nbsp;&nbsp;&lt;q&gt;Tyre&nbsp;is&nbsp;a&nbsp;rich&nbsp;and&nbsp;powerful&nbsp;neighbour.&lt;/q&gt;&nbsp;Solomon&nbsp;explains,&nbsp;&lt;q&gt;I
<br>
&nbsp;&nbsp;&nbsp;&nbsp;can't&nbsp;afford&nbsp;to&nbsp;offend&nbsp;them.&nbsp;Hiram&nbsp;has&nbsp;been&nbsp;most&nbsp;co-operative&nbsp;in
<br>
&nbsp;&nbsp;&nbsp;&nbsp;supplying&nbsp;material&nbsp;for&nbsp;the&nbsp;building&nbsp;of&nbsp;the&nbsp;Temple,&nbsp;but&nbsp;if&nbsp;he
<br>
&nbsp;&nbsp;&nbsp;&nbsp;thinks&nbsp;I've&nbsp;spurned&nbsp;his&nbsp;gift...&lt;/q&gt;"
<br>
&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'Hiram'
<br>
;
<br>

<br>
tHiram&nbsp;:&nbsp;Topic&nbsp;'king&nbsp;hiram/tyre';
<br>

<br>
</font></font>

</body></html>
