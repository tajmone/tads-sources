<html><head><link rel=stylesheet type="text/css" href="../libref.css"><title>msg_neu.t</title></head><body>
<table class=ban><tr><td><h1>msg_neu.t</h1><td align=right><a href="../file/msg_neu.t.html">documentation</a></table><pre>
<a name="1"></a>#charset "us-ascii"
<a name="2"></a>
<a name="3"></a>/*
<a name="4"></a> *   Copyright (c) 2000, 2006 Michael J. Roberts.  All Rights Reserved.
<a name="5"></a> *
<a name="6"></a> *   TADS 3 Library - "neutral" messages for US English
<a name="7"></a> *
<a name="8"></a> *   This module provides standard library messages with a parser/narrator
<a name="9"></a> *   that's as invisible (neutral) as possible.  These messages are designed
<a name="10"></a> *   to reduce the presence of the computer as mediator in the story, to
<a name="11"></a> *   give the player the most direct contact that we can with the scenario.
<a name="12"></a> *
<a name="13"></a> *   The parser almost always refers to itself in the third person (by
<a name="14"></a> *   calling itself something like "this story") rather than in the first
<a name="15"></a> *   person, and, whenever possible, avoids referring to itself in the first
<a name="16"></a> *   place.  Our ideal phrasing is either second-person, describing things
<a name="17"></a> *   directly in terms of the player character's experience, or "no-person,"
<a name="18"></a> *   simply describing things without mentioning the speaker or listener at
<a name="19"></a> *   all.  For example, rather than saying "I don't see that here," we say
<a name="20"></a> *   "you don't see that here," or "that's not here."  We occasionally stray
<a name="21"></a> *   from this ideal where achieving it would be too awkward.
<a name="22"></a> *
<a name="23"></a> *   In the earliest days of adventure games, the parser was usually a
<a name="24"></a> *   visible presence: the early parsers frequently reported things in the
<a name="25"></a> *   first person, and some even had specific personalities.  This
<a name="26"></a> *   conspicuous parser style has become less prevalent in modern games,
<a name="27"></a> *   though, and authors now usually prefer to treat the parser as just
<a name="28"></a> *   another part of the user interface, which like all good UI's is best
<a name="29"></a> *   when the user doesn't notice it.
<a name="30"></a> */
<a name="31"></a>
<a name="32"></a>#include "adv3.h"
<a name="33"></a>#include "en_us.h"
<a name="34"></a>
<a name="35"></a>/* ------------------------------------------------------------------------ */
<a name="36"></a>/*
<a name="37"></a> *   Build a message parameter string with the given parameter type and
<a name="38"></a> *   name.
<a name="39"></a> *
<a name="40"></a> *   This is useful when we have a name from a variable, and we need to
<a name="41"></a> *   build the message substitution string for embedding in a larger
<a name="42"></a> *   string.  We can't just embed the name variable using &lt;&lt;var&gt;&gt;, because
<a name="43"></a> *   that would process the output piecewise - the output filter needs to
<a name="44"></a> *   see the whole {typ var} expression in one go.  So, instead of writing
<a name="45"></a> *   this:
<a name="46"></a> *
<a name="47"></a> *.     {The/he &lt;&lt;var&gt;&gt;} {is} ...
<a name="48"></a> *
<a name="49"></a> *   write this:
<a name="50"></a> *
<a name="51"></a> *.     &lt;&lt;buildParam('The/he', var)&gt;&gt; {is} ...
<a name="52"></a> */
<a name="53"></a>buildParam(typeString, nm)
<a name="54"></a>{
<a name="55"></a>    return '{' + typeString + ' ' + nm + '}';
<a name="56"></a>}
<a name="57"></a>
<a name="58"></a>/*
<a name="59"></a> *   Synthesize a message parameter, and build it into a parameter string
<a name="60"></a> *   with the given substitution type.
<a name="61"></a> *
<a name="62"></a> *   For example, buildSynthParam('abc', obj) returns '{abc xxx}', where
<a name="63"></a> *   'xxx' is a synthesized message parameter name (created using
<a name="64"></a> *   gSynthMessageParam) for the object obj.
<a name="65"></a> */
<a name="66"></a>buildSynthParam(typeString, obj)
<a name="67"></a>{
<a name="68"></a>    return '{' + typeString + ' ' + gSynthMessageParam(obj) + '}';
<a name="69"></a>}
<a name="70"></a>
<a name="71"></a>
<a name="72"></a>/* ------------------------------------------------------------------------ */
<a name="73"></a>/*
<a name="74"></a> *   Library Messages
<a name="75"></a> */
<a name="76"></a>libMessages: MessageHelper
<a name="77"></a>    /*
<a name="78"></a>     *   The pronoun to use for the objective form of the personal
<a name="79"></a>     *   interrogative pronoun.  Strictly speaking, the right word for
<a name="80"></a>     *   this usage is "whom"; but regardless of what the grammar books
<a name="81"></a>     *   say, most American English speakers these days use "who" for both
<a name="82"></a>     *   the subjective and objective cases; to many ears, "whom" sounds
<a name="83"></a>     *   old-fashioned, overly formal, or even pretentious.  (Case in
<a name="84"></a>     *   point: a recent television ad tried to make a little kid look
<a name="85"></a>     *   ultra-sophisticated by having him answer the phone by asking
<a name="86"></a>     *   "*whom* may I ask is calling?", with elaborate emphasis on the
<a name="87"></a>     *   "whom."  Of course, the correct usage in this case is "who," so
<a name="88"></a>     *   the ad only made the kid look pretentious.  It goes to show that,
<a name="89"></a>     *   at least in the mind of the writer of the ad, "whom" is just the
<a name="90"></a>     *   snooty, formal version of "who" that serves only to signal the
<a name="91"></a>     *   speaker's sophistication.)
<a name="92"></a>     *
<a name="93"></a>     *   By default, we distinguish "who" and "whom."  Authors who prefer
<a name="94"></a>     *   to use "who" everywhere can do so by changing this property's
<a name="95"></a>     *   value to 'who'.
<a name="96"></a>     */
<a name="97"></a>    whomPronoun = 'whom'
<a name="98"></a>
<a name="99"></a>    /*
<a name="100"></a>     *   Flag: offer an explanation of the "OOPS" command when it first
<a name="101"></a>     *   comes up.  We'll only show this the first time the player enters
<a name="102"></a>     *   an unknown word.  If you never want to offer this message at all,
<a name="103"></a>     *   simply set this flag to nil initially.
<a name="104"></a>     *
<a name="105"></a>     *   See also oopsNote() below.
<a name="106"></a>     */
<a name="107"></a>    offerOopsNote = true
<a name="108"></a>
<a name="109"></a>    /*
<a name="110"></a>     *   some standard commands for insertion into &lt;a&gt; tags - these are in
<a name="111"></a>     *   the messages so they can translated along with the command set
<a name="112"></a>     */
<a name="113"></a>    commandLookAround = 'look around'
<a name="114"></a>    commandFullScore = 'full score'
<a name="115"></a>
<a name="116"></a>    /* announce a completely remapped action */
<a name="117"></a>    announceRemappedAction(action)
<a name="118"></a>    {
<a name="119"></a>        return '&lt;./p0&gt;\n&lt;.assume&gt;' + action.getParticiplePhrase()
<a name="120"></a>            + '&lt;./assume&gt;\n';
<a name="121"></a>    }
<a name="122"></a>
<a name="123"></a>    /*
<a name="124"></a>     *   Get a string to announce an implicit action.  This announces the
<a name="125"></a>     *   current global action.  'ctx' is an ImplicitAnnouncementContext
<a name="126"></a>     *   object describing the context in which the message is being
<a name="127"></a>     *   displayed.
<a name="128"></a>     */
<a name="129"></a>    announceImplicitAction(action, ctx)
<a name="130"></a>    {
<a name="131"></a>        /* build the announcement from the basic verb phrase */
<a name="132"></a>        return ctx.buildImplicitAnnouncement(action.getImplicitPhrase(ctx));
<a name="133"></a>    }
<a name="134"></a>
<a name="135"></a>    /*
<a name="136"></a>     *   Announce a silent implied action.  This allows an implied action
<a name="137"></a>     *   to work exactly as normal (including the suppression of a default
<a name="138"></a>     *   response message), but without any announcement of the implied
<a name="139"></a>     *   action.
<a name="140"></a>     */
<a name="141"></a>    silentImplicitAction(action, ctx) { return ''; }
<a name="142"></a>
<a name="143"></a>    /*
<a name="144"></a>     *   Get a string to announce that we're implicitly moving an object to
<a name="145"></a>     *   a bag of holding to make room for taking something new.  If
<a name="146"></a>     *   'trying' is true, it means we want to phrase the message as merely
<a name="147"></a>     *   trying the action, not actually performing it.
<a name="148"></a>     */
<a name="149"></a>    announceMoveToBag(action, ctx)
<a name="150"></a>    {
<a name="151"></a>        /* build the announcement, adding an explanation */
<a name="152"></a>        return ctx.buildImplicitAnnouncement(
<a name="153"></a>            action.getImplicitPhrase(ctx) + ' to make room');
<a name="154"></a>    }
<a name="155"></a>
<a name="156"></a>    /* show a library credit (for a CREDITS listing) */
<a name="157"></a>    showCredit(name, byline) { "&lt;&lt;name&gt;&gt; &lt;&lt;byline&gt;&gt;"; }
<a name="158"></a>
<a name="159"></a>    /* show a library version number (for a VERSION listing) */
<a name="160"></a>    showVersion(name, version) { "&lt;&lt;name&gt;&gt; version &lt;&lt;version&gt;&gt;"; }
<a name="161"></a>
<a name="162"></a>    /* there's no "about" information in this game */
<a name="163"></a>    noAboutInfo = "&lt;.parser&gt;This story has no ABOUT information.&lt;./parser&gt; "
<a name="164"></a>
<a name="165"></a>    /*
<a name="166"></a>     *   Show a list state name - this is extra state information that we
<a name="167"></a>     *   show for an object in a listing involving the object.  For
<a name="168"></a>     *   example, a light source might add a state like "(providing
<a name="169"></a>     *   light)".  We simply show the list state name in parentheses.
<a name="170"></a>     */
<a name="171"></a>    showListState(state) { " (&lt;&lt;state&gt;&gt;)"; }
<a name="172"></a>
<a name="173"></a>    /* a set of equivalents are all in a given state */
<a name="174"></a>    allInSameListState(lst, stateName)
<a name="175"></a>        { " (&lt;&lt;lst.length() == 2 ? 'both' : 'all'&gt;&gt; &lt;&lt;stateName&gt;&gt;)"; }
<a name="176"></a>
<a name="177"></a>    /* generic long description of a Thing from a distance */
<a name="178"></a>    distantThingDesc(obj)
<a name="179"></a>    {
<a name="180"></a>        gMessageParams(obj);
<a name="181"></a>        "{It's obj} too far away to make out any detail. ";
<a name="182"></a>    }
<a name="183"></a>
<a name="184"></a>    /* generic long description of a Thing under obscured conditions */
<a name="185"></a>    obscuredThingDesc(obj, obs)
<a name="186"></a>    {
<a name="187"></a>        gMessageParams(obj, obs);
<a name="188"></a>        "{You/he} {can\'t} make out any detail through {the obs/him}. ";
<a name="189"></a>    }
<a name="190"></a>
<a name="191"></a>    /* generic "listen" description of a Thing at a distance */
<a name="192"></a>    distantThingSoundDesc(obj)
<a name="193"></a>        { "{You/he} {can\'t} hear any detail from this distance. "; }
<a name="194"></a>
<a name="195"></a>    /* generic obscured "listen" description */
<a name="196"></a>    obscuredThingSoundDesc(obj, obs)
<a name="197"></a>    {
<a name="198"></a>        gMessageParams(obj, obs);
<a name="199"></a>        "{You/he} {can\'t} hear any detail through {the obs/him}. ";
<a name="200"></a>    }
<a name="201"></a>
<a name="202"></a>    /* generic "smell" description of a Thing at a distance */
<a name="203"></a>    distantThingSmellDesc(obj)
<a name="204"></a>        { "{You/he} {can\'t} smell much at this distance. "; }
<a name="205"></a>
<a name="206"></a>    /* generic obscured "smell" description */
<a name="207"></a>    obscuredThingSmellDesc(obj, obs)
<a name="208"></a>    {
<a name="209"></a>        gMessageParams(obj, obs);
<a name="210"></a>        "{You/he} {can\'t} smell much through {the obs/him}. ";
<a name="211"></a>    }
<a name="212"></a>
<a name="213"></a>    /* generic "taste" description of a Thing */
<a name="214"></a>    thingTasteDesc(obj)
<a name="215"></a>    {
<a name="216"></a>        gMessageParams(obj);
<a name="217"></a>        "{It/he obj} taste{s/d} much as {you/he} would {|have}
<a name="218"></a>        expect{|ed}. ";
<a name="219"></a>    }
<a name="220"></a>
<a name="221"></a>    /* generic "feel" description of a Thing */
<a name="222"></a>    thingFeelDesc(obj)
<a name="223"></a>        { "{You/he} {feel[s]|felt} nothing out of the ordinary. "; }
<a name="224"></a>
<a name="225"></a>    /* obscured "read" description */
<a name="226"></a>    obscuredReadDesc(obj)
<a name="227"></a>    {
<a name="228"></a>        gMessageParams(obj);
<a name="229"></a>        "{You/he} {can\'t} see {that obj/him} well enough to read
<a name="230"></a>        {it/him}. ";
<a name="231"></a>    }
<a name="232"></a>
<a name="233"></a>    /* dim light "read" description */
<a name="234"></a>    dimReadDesc(obj)
<a name="235"></a>    {
<a name="236"></a>        gMessageParams(obj);
<a name="237"></a>        "There{&amp;rsquo;s| was} not enough light to read {that obj/him}. ";
<a name="238"></a>    }
<a name="239"></a>
<a name="240"></a>    /* lit/unlit match description */
<a name="241"></a>    litMatchDesc(obj) { "\^&lt;&lt;obj.nameIs&gt;&gt; lit. "; }
<a name="242"></a>    unlitMatchDesc(obj) { "\^&lt;&lt;obj.nameIs&gt;&gt; an ordinary match. "; }
<a name="243"></a>
<a name="244"></a>    /* lit candle description */
<a name="245"></a>    litCandleDesc(obj) { "\^&lt;&lt;obj.nameIs&gt;&gt; lit. "; }
<a name="246"></a>
<a name="247"></a>    /*
<a name="248"></a>     *   Prepositional phrases for putting objects into different types of
<a name="249"></a>     *   objects.
<a name="250"></a>     */
<a name="251"></a>    putDestContainer(obj) { return 'into ' + obj.theNameObj; }
<a name="252"></a>    putDestSurface(obj) { return 'onto ' + obj.theNameObj; }
<a name="253"></a>    putDestUnder(obj) { return 'under ' + obj.theNameObj; }
<a name="254"></a>    putDestBehind(obj) { return 'behind ' + obj.theNameObj; }
<a name="255"></a>    putDestFloor(obj) { return 'to ' + obj.theNameObj; }
<a name="256"></a>    putDestRoom(obj) { return 'into ' + obj.theNameObj; }
<a name="257"></a>
<a name="258"></a>    /* the list separator character in the middle of a list */
<a name="259"></a>    listSepMiddle = ", "
<a name="260"></a>
<a name="261"></a>    /* the list separator character for a two-element list */
<a name="262"></a>    listSepTwo = " and "
<a name="263"></a>
<a name="264"></a>    /* the list separator for the end of a list of at least three elements */
<a name="265"></a>    listSepEnd = ", and "
<a name="266"></a>
<a name="267"></a>    /*
<a name="268"></a>     *   the list separator for the middle of a long list (a list with
<a name="269"></a>     *   embedded lists not otherwise set off, such as by parentheses)
<a name="270"></a>     */
<a name="271"></a>    longListSepMiddle = "; "
<a name="272"></a>
<a name="273"></a>    /* the list separator for a two-element list of sublists */
<a name="274"></a>    longListSepTwo = ", and "
<a name="275"></a>
<a name="276"></a>    /* the list separator for the end of a long list */
<a name="277"></a>    longListSepEnd = "; and "
<a name="278"></a>
<a name="279"></a>    /* show the basic score message */
<a name="280"></a>    showScoreMessage(points, maxPoints, turns)
<a name="281"></a>    {
<a name="282"></a>        "In &lt;&lt;turns&gt;&gt; move&lt;&lt;turns == 1 ? '' : 's'&gt;&gt;, you have
<a name="283"></a>        scored &lt;&lt;points&gt;&gt; of a possible &lt;&lt;maxPoints&gt;&gt; point&lt;&lt;
<a name="284"></a>          maxPoints == 1 ? '' : 's'&gt;&gt;. ";
<a name="285"></a>    }
<a name="286"></a>
<a name="287"></a>    /* show the basic score message with no maximum */
<a name="288"></a>    showScoreNoMaxMessage(points, turns)
<a name="289"></a>    {
<a name="290"></a>        "In &lt;&lt;turns&gt;&gt; move&lt;&lt;turns == 1 ? '' : 's'&gt;&gt;, you have
<a name="291"></a>        scored &lt;&lt;points&gt;&gt; point&lt;&lt;points == 1 ? '' : 's'&gt;&gt;. ";
<a name="292"></a>    }
<a name="293"></a>
<a name="294"></a>    /* show the full message for a given score rank string */
<a name="295"></a>    showScoreRankMessage(msg) { "This makes you &lt;&lt;msg&gt;&gt;. "; }
<a name="296"></a>
<a name="297"></a>    /*
<a name="298"></a>     *   show the list prefix for the full score listing; this is shown on
<a name="299"></a>     *   a line by itself before the list of full score items, shown
<a name="300"></a>     *   indented and one item per line
<a name="301"></a>     */
<a name="302"></a>    showFullScorePrefix = "Your score consists of:"
<a name="303"></a>
<a name="304"></a>    /*
<a name="305"></a>     *   show the item prefix, with the number of points, for a full score
<a name="306"></a>     *   item - immediately after this is displayed, we'll display the
<a name="307"></a>     *   description message for the achievement
<a name="308"></a>     */
<a name="309"></a>    fullScoreItemPoints(points)
<a name="310"></a>    {
<a name="311"></a>        "&lt;&lt;points&gt;&gt; point&lt;&lt;points == 1 ? '' : 's'&gt;&gt; for ";
<a name="312"></a>    }
<a name="313"></a>
<a name="314"></a>    /* score change - first notification */
<a name="315"></a>    firstScoreChange(delta)
<a name="316"></a>    {
<a name="317"></a>        scoreChange(delta);
<a name="318"></a>        scoreChangeTip.showTip();
<a name="319"></a>    }
<a name="320"></a>
<a name="321"></a>    /* score change - notification other than the first time */
<a name="322"></a>    scoreChange(delta)
<a name="323"></a>    {
<a name="324"></a>        "&lt;.commandsep&gt;&lt;.notification&gt;&lt;&lt;
<a name="325"></a>        basicScoreChange(delta)&gt;&gt;&lt;./notification&gt; ";
<a name="326"></a>    }
<a name="327"></a>
<a name="328"></a>    /*
<a name="329"></a>     *   basic score change notification message - this is an internal
<a name="330"></a>     *   service routine for scoreChange and firstScoreChange
<a name="331"></a>     */
<a name="332"></a>    basicScoreChange(delta)
<a name="333"></a>    {
<a name="334"></a>        "Your &lt;&lt;aHref(commandFullScore, 'score', 'Show full score')&gt;&gt;
<a name="335"></a>        has just &lt;&lt;delta &gt; 0 ? 'in' : 'de'&gt;&gt;creased by
<a name="336"></a>        &lt;&lt;spellInt(delta &gt; 0 ? delta : -delta)&gt;&gt;
<a name="337"></a>        point&lt;&lt;delta is in (1, -1) ? '' : 's'&gt;&gt;.";
<a name="338"></a>    }
<a name="339"></a>
<a name="340"></a>    /* acknowledge turning tips on or off */
<a name="341"></a>    acknowledgeTipStatus(stat)
<a name="342"></a>    {
<a name="343"></a>        "&lt;.parser&gt;Tips are now turned &lt;&lt;stat ? 'on' : 'off'&gt;&gt;.&lt;./parser&gt; ";
<a name="344"></a>    }
<a name="345"></a>
<a name="346"></a>    /* describe the tip mode setting */
<a name="347"></a>    tipStatusShort(stat)
<a name="348"></a>    {
<a name="349"></a>        "TIPS &lt;&lt;stat ? 'ON' : 'OFF'&gt;&gt;";
<a name="350"></a>    }
<a name="351"></a>
<a name="352"></a>    /* get the string to display for a footnote reference */
<a name="353"></a>    footnoteRef(num)
<a name="354"></a>    {
<a name="355"></a>        /* set up a hyperlink for the note that enters the "note n" command */
<a name="356"></a>        return '&lt;sup&gt;[&lt;&lt;aHref('footnote ' + num, toString(num))&gt;&gt;]&lt;/sup&gt;';
<a name="357"></a>    }
<a name="358"></a>
<a name="359"></a>    /* first footnote notification */
<a name="360"></a>    firstFootnote()
<a name="361"></a>    {
<a name="362"></a>        footnotesTip.showTip();
<a name="363"></a>    }
<a name="364"></a>
<a name="365"></a>    /* there is no such footnote as the given number */
<a name="366"></a>    noSuchFootnote(num)
<a name="367"></a>    {
<a name="368"></a>        "&lt;.parser&gt;The story has never referred to any such
<a name="369"></a>        footnote.&lt;./parser&gt; ";
<a name="370"></a>    }
<a name="371"></a>
<a name="372"></a>    /* show the current footnote status */
<a name="373"></a>    showFootnoteStatus(stat)
<a name="374"></a>    {
<a name="375"></a>        "The current setting is FOOTNOTES ";
<a name="376"></a>        switch(stat)
<a name="377"></a>        {
<a name="378"></a>        case FootnotesOff:
<a name="379"></a>            "OFF, which hides all footnote references.
<a name="380"></a>            Type &lt;&lt;aHref('footnotes medium', 'FOOTNOTES MEDIUM',
<a name="381"></a>                         'Set footnotes to Medium')&gt;&gt; to
<a name="382"></a>            show references to footnotes except those you&amp;rsquo;ve
<a name="383"></a>            already seen, or &lt;&lt;aHref('footnotes full', 'FOOTNOTES FULL',
<a name="384"></a>                                     'Set footnotes to Full')&gt;&gt;
<a name="385"></a>            to show all footnote references. ";
<a name="386"></a>            break;
<a name="387"></a>
<a name="388"></a>        case FootnotesMedium:
<a name="389"></a>            "MEDIUM, which shows references to unread footnotes, but
<a name="390"></a>            hides references to those you&amp;rsquo;ve already read.  Type
<a name="391"></a>            &lt;&lt;aHref('footnotes off', 'FOOTNOTES OFF',
<a name="392"></a>                    'Turn off footnotes')&gt;&gt; to hide
<a name="393"></a>            footnote references entirely, or &lt;&lt;aHref(
<a name="394"></a>                'footnotes full', 'FOOTNOTES FULL',
<a name="395"></a>                'Set footnotes to Full')&gt;&gt; to show every reference, even to
<a name="396"></a>            notes you&amp;rsquo;ve already read. ";
<a name="397"></a>            break;
<a name="398"></a>
<a name="399"></a>        case FootnotesFull:
<a name="400"></a>            "FULL, which shows every footnote reference, even to
<a name="401"></a>            notes you&amp;rsquo;ve already read.  Type &lt;&lt;aHref('footnotes medium',
<a name="402"></a>            'FOOTNOTES MEDIUM', 'Set footnotes to Medium')&gt;&gt; to show
<a name="403"></a>            only references to notes you
<a name="404"></a>            haven&amp;rsquo;t yet read, or &lt;&lt;
<a name="405"></a>              aHref('footnotes off', 'FOOTNOTES OFF', 'Turn off footnotes')&gt;&gt;
<a name="406"></a>            to hide footnote references entirely. ";
<a name="407"></a>            break;
<a name="408"></a>        }
<a name="409"></a>    }
<a name="410"></a>
<a name="411"></a>    /* acknowledge a change in the footnote status */
<a name="412"></a>    acknowledgeFootnoteStatus(stat)
<a name="413"></a>    {
<a name="414"></a>        "&lt;.parser&gt;The setting is now
<a name="415"></a>        &lt;&lt;shortFootnoteStatus(stat)&gt;&gt;.&lt;./parser&gt; ";
<a name="416"></a>    }
<a name="417"></a>
<a name="418"></a>    /* show the footnote status, in short form */
<a name="419"></a>    shortFootnoteStatus(stat)
<a name="420"></a>    {
<a name="421"></a>        "FOOTNOTES &lt;&lt;
<a name="422"></a>          stat == FootnotesOff ? 'OFF'
<a name="423"></a>          : stat == FootnotesMedium ? 'MEDIUM'
<a name="424"></a>          : 'FULL' &gt;&gt;";
<a name="425"></a>    }
<a name="426"></a>
<a name="427"></a>    /*
<a name="428"></a>     *   Show the main command prompt.
<a name="429"></a>     *
<a name="430"></a>     *   'which' is one of the rmcXxx phase codes indicating what kind of
<a name="431"></a>     *   command we're reading.  This default implementation shows the
<a name="432"></a>     *   same prompt for every type of input, but games can use the
<a name="433"></a>     *   'which' value to show different prompts for different types of
<a name="434"></a>     *   queries, if desired.
<a name="435"></a>     */
<a name="436"></a>    mainCommandPrompt(which) { "\b&amp;gt;"; }
<a name="437"></a>
<a name="438"></a>    /*
<a name="439"></a>     *   Show a pre-resolved error message string.  This simply displays
<a name="440"></a>     *   the given string.
<a name="441"></a>     */
<a name="442"></a>    parserErrorString(actor, msg) { say(msg); }
<a name="443"></a>
<a name="444"></a>    /* show the response to an empty command line */
<a name="445"></a>    emptyCommandResponse = "&lt;.parser&gt;I beg your pardon?&lt;./parser&gt; "
<a name="446"></a>
<a name="447"></a>    /* invalid token (i.e., punctuation) in command line */
<a name="448"></a>    invalidCommandToken(ch)
<a name="449"></a>    {
<a name="450"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t know how to use the character
<a name="451"></a>        &amp;lsquo;&lt;&lt;ch&gt;&gt;&amp;rsquo; in a command.&lt;./parser&gt; ";
<a name="452"></a>    }
<a name="453"></a>
<a name="454"></a>    /*
<a name="455"></a>     *   Command group prefix - this is displayed after a command line and
<a name="456"></a>     *   before the first command results shown after the command line.
<a name="457"></a>     *
<a name="458"></a>     *   By default, we'll show the "zero-space paragraph" marker, which
<a name="459"></a>     *   acts like a paragraph break in that it swallows up immediately
<a name="460"></a>     *   following paragraph breaks, but doesn't actually add any space.
<a name="461"></a>     *   This will ensure that we don't add any space between the command
<a name="462"></a>     *   input line and the next text.
<a name="463"></a>     */
<a name="464"></a>    commandResultsPrefix = '&lt;.p0&gt;'
<a name="465"></a>
<a name="466"></a>    /*
<a name="467"></a>     *   Command "interruption" group prefix.  This is displayed after an
<a name="468"></a>     *   interrupted command line - a command line editing session that
<a name="469"></a>     *   was interrupted by a timeout event - just before the text that
<a name="470"></a>     *   interrupted the command line.
<a name="471"></a>     *
<a name="472"></a>     *   By default, we'll show a paragraph break here, to set off the
<a name="473"></a>     *   interrupting text from the command line under construction.
<a name="474"></a>     */
<a name="475"></a>    commandInterruptionPrefix = '&lt;.p&gt;'
<a name="476"></a>
<a name="477"></a>    /*
<a name="478"></a>     *   Command separator - this is displayed after the results from a
<a name="479"></a>     *   command when another command is about to be executed without any
<a name="480"></a>     *   more user input.  That is, when a command line contains more than
<a name="481"></a>     *   one command, this message is displayed between each successive
<a name="482"></a>     *   command, to separate the results visually.
<a name="483"></a>     *
<a name="484"></a>     *   This is not shown before the first command results after a
<a name="485"></a>     *   command input line, and is not shown after the last results
<a name="486"></a>     *   before a new input line.  Furthermore, this is shown only between
<a name="487"></a>     *   adjacent commands for which output actually occurs; if a series
<a name="488"></a>     *   of commands executes without any output, we won't show any
<a name="489"></a>     *   separators between the silent commands.
<a name="490"></a>     *
<a name="491"></a>     *   By default, we'll just start a new paragraph.
<a name="492"></a>     */
<a name="493"></a>    commandResultsSeparator = '&lt;.p&gt;'
<a name="494"></a>
<a name="495"></a>    /*
<a name="496"></a>     *   "Complex" result separator - this is displayed between a group of
<a name="497"></a>     *   messages for a "complex" result set and adjoining messages.  A
<a name="498"></a>     *   command result list is "complex" when it's built up out of
<a name="499"></a>     *   several generated items, such as object identification prefixes
<a name="500"></a>     *   or implied command prefixes.  We use additional visual separation
<a name="501"></a>     *   to set off these groups of messages from adjoining messages,
<a name="502"></a>     *   which is especially important for commands on multiple objects,
<a name="503"></a>     *   where we would otherwise have several results shown together.  By
<a name="504"></a>     *   default, we use a paragraph break.
<a name="505"></a>     */
<a name="506"></a>    complexResultsSeparator = '&lt;.p&gt;'
<a name="507"></a>
<a name="508"></a>    /*
<a name="509"></a>     *   Internal results separator - this is displayed to visually
<a name="510"></a>     *   separate the results of an implied command from the results for
<a name="511"></a>     *   the initiating command, which are shown after the results from
<a name="512"></a>     *   the implied command.  By default, we show a paragraph break.
<a name="513"></a>     */
<a name="514"></a>    internalResultsSeparator = '&lt;.p&gt;'
<a name="515"></a>
<a name="516"></a>    /*
<a name="517"></a>     *   Command results suffix - this is displayed just before a new
<a name="518"></a>     *   command line is about to be read if any command results have been
<a name="519"></a>     *   shown since the last command line.
<a name="520"></a>     *
<a name="521"></a>     *   By default, we'll show nothing extra.
<a name="522"></a>     */
<a name="523"></a>    commandResultsSuffix = ''
<a name="524"></a>
<a name="525"></a>    /*
<a name="526"></a>     *   Empty command results - this is shown when we read a command line
<a name="527"></a>     *   and then go back and read another without having displaying
<a name="528"></a>     *   anything.
<a name="529"></a>     *
<a name="530"></a>     *   By default, we'll return a message indicating that nothing
<a name="531"></a>     *   happened.
<a name="532"></a>     */
<a name="533"></a>    commandResultsEmpty =
<a name="534"></a>        ('Nothing obvious happen' + tSel('s', 'ed') + '.&lt;.p&gt;')
<a name="535"></a>
<a name="536"></a>    /*
<a name="537"></a>     *   Intra-command report separator.  This is used to separate report
<a name="538"></a>     *   messages within a single command's results.  By default, we show
<a name="539"></a>     *   a paragraph break.
<a name="540"></a>     */
<a name="541"></a>    intraCommandSeparator = '&lt;.p&gt;'
<a name="542"></a>
<a name="543"></a>    /*
<a name="544"></a>     *   separator for "smell" results - we ordinarily show each item's
<a name="545"></a>     *   odor description as a separate paragraph
<a name="546"></a>     */
<a name="547"></a>    smellDescSeparator()
<a name="548"></a>    {
<a name="549"></a>        "&lt;.p&gt;";
<a name="550"></a>    }
<a name="551"></a>
<a name="552"></a>    /*
<a name="553"></a>     *   separator for "listen" results
<a name="554"></a>     */
<a name="555"></a>    soundDescSeparator()
<a name="556"></a>    {
<a name="557"></a>        "&lt;.p&gt;";
<a name="558"></a>    }
<a name="559"></a>
<a name="560"></a>    /* a command was issued to a non-actor */
<a name="561"></a>    cannotTalkTo(targetActor, issuingActor)
<a name="562"></a>    {
<a name="563"></a>        "\^&lt;&lt;targetActor.nameIs&gt;&gt; not something &lt;&lt;issuingActor.itNom&gt;&gt;
<a name="564"></a>        &lt;&lt;issuingActor.verbCan&gt;&gt; talk to. ";
<a name="565"></a>    }
<a name="566"></a>
<a name="567"></a>    /* greeting actor while actor is already talking to us */
<a name="568"></a>    alreadyTalkingTo(actor, greeter)
<a name="569"></a>    {
<a name="570"></a>        "\^&lt;&lt;greeter.theName&gt;&gt; already &lt;&lt;greeter.verbToHave&gt;&gt;
<a name="571"></a>        &lt;&lt;actor.theNamePossAdj&gt;&gt; attention. ";
<a name="572"></a>    }
<a name="573"></a>
<a name="574"></a>    /* no topics to suggest when we're not talking to anyone */
<a name="575"></a>    noTopicsNotTalking = "&lt;.parser&gt;{You're} not currently talking
<a name="576"></a>                          to anyone.&lt;./parser&gt; "
<a name="577"></a>
<a name="578"></a>    /*
<a name="579"></a>     *   Show a note about the OOPS command.  This is, by default, added
<a name="580"></a>     *   to the "I don't know that word" error the first time that error
<a name="581"></a>     *   occurs.
<a name="582"></a>     */
<a name="583"></a>    oopsNote()
<a name="584"></a>    {
<a name="585"></a>        oopsTip.showTip();
<a name="586"></a>    }
<a name="587"></a>
<a name="588"></a>    /* can't use OOPS right now */
<a name="589"></a>    oopsOutOfContext = "&lt;.parser&gt;You can only use OOPS to correct
<a name="590"></a>        a misspelling immediately after the story points out a word
<a name="591"></a>        it doesn&amp;rsquo;t know.&lt;./parser&gt; "
<a name="592"></a>
<a name="593"></a>    /* OOPS in context, but without the word to correct */
<a name="594"></a>    oopsMissingWord = "&lt;.parser&gt;To use OOPS to correct a misspelling,
<a name="595"></a>        put the corrected word after OOPS, as in OOPS BOOK.&lt;./parser&gt; "
<a name="596"></a>
<a name="597"></a>    /* acknowledge setting VERBOSE mode (true) or TERSE mode (nil) */
<a name="598"></a>    acknowledgeVerboseMode(verbose)
<a name="599"></a>    {
<a name="600"></a>        if (verbose)
<a name="601"></a>            "&lt;.parser&gt;VERBOSE mode is now selected.&lt;./parser&gt; ";
<a name="602"></a>        else
<a name="603"></a>            "&lt;.parser&gt;TERSE mode is now selected.&lt;./parser&gt; ";
<a name="604"></a>    }
<a name="605"></a>
<a name="606"></a>    /* show the current VERBOSE setting, in short form */
<a name="607"></a>    shortVerboseStatus(stat) { "&lt;&lt;stat ? 'VERBOSE' : 'TERSE'&gt;&gt; mode"; }
<a name="608"></a>
<a name="609"></a>    /* show the current score notify status */
<a name="610"></a>    showNotifyStatus(stat)
<a name="611"></a>    {
<a name="612"></a>        "&lt;.parser&gt;Score notifications are
<a name="613"></a>        currently &lt;&lt;stat ? 'on' : 'off'&gt;&gt;.&lt;./parser&gt; ";
<a name="614"></a>    }
<a name="615"></a>
<a name="616"></a>    /* show the current score notify status, in short form */
<a name="617"></a>    shortNotifyStatus(stat) { "NOTIFY &lt;&lt;stat ? 'ON' : 'OFF'&gt;&gt;"; }
<a name="618"></a>
<a name="619"></a>    /* acknowledge a change in the score notification status */
<a name="620"></a>    acknowledgeNotifyStatus(stat)
<a name="621"></a>    {
<a name="622"></a>        "&lt;.parser&gt;Score notifications are now
<a name="623"></a>        &lt;&lt;stat ? 'on' : 'off'&gt;&gt;.&lt;./parser&gt; ";
<a name="624"></a>    }
<a name="625"></a>
<a name="626"></a>    /*
<a name="627"></a>     *   Announce the current object of a set of multiple objects on which
<a name="628"></a>     *   we're performing an action.  This is used to tell the player
<a name="629"></a>     *   which object we're acting upon when we're iterating through a set
<a name="630"></a>     *   of objects specified in a command targeting multiple objects.
<a name="631"></a>     */
<a name="632"></a>    announceMultiActionObject(obj, whichObj, action)
<a name="633"></a>    {
<a name="634"></a>        /*
<a name="635"></a>         *   get the display name - we only need to differentiate this
<a name="636"></a>         *   object from the other objects in the iteration
<a name="637"></a>         */
<a name="638"></a>        local nm = obj.getAnnouncementDistinguisher(
<a name="639"></a>            action.getResolvedObjList(whichObj)).name(obj);
<a name="640"></a>
<a name="641"></a>        /* build the announcement */
<a name="642"></a>        return '&lt;./p0&gt;\n&lt;.announceObj&gt;' + nm + ':&lt;./announceObj&gt; &lt;.p0&gt;';
<a name="643"></a>    }
<a name="644"></a>
<a name="645"></a>    /*
<a name="646"></a>     *   Announce a singleton object that we selected from a set of
<a name="647"></a>     *   ambiguous objects.  This is used when we disambiguate a command
<a name="648"></a>     *   and choose an object over other objects that are also logical but
<a name="649"></a>     *   are less likely.  In such cases, it's courteous to tell the
<a name="650"></a>     *   player what we chose, because it's possible that the user meant
<a name="651"></a>     *   one of the other logical objects - announcing this type of choice
<a name="652"></a>     *   helps reduce confusion by making it immediately plain to the
<a name="653"></a>     *   player when we make a choice other than what they were thinking.
<a name="654"></a>     */
<a name="655"></a>    announceAmbigActionObject(obj, whichObj, action)
<a name="656"></a>    {
<a name="657"></a>        /*
<a name="658"></a>         *   get the display name - distinguish the object from everything
<a name="659"></a>         *   else in scope, since we chose from a set of ambiguous options
<a name="660"></a>         */
<a name="661"></a>        local nm = obj.getAnnouncementDistinguisher(gActor.scopeList())
<a name="662"></a>            .theName(obj);
<a name="663"></a>
<a name="664"></a>        /* announce the object in "assume" style, ending with a newline */
<a name="665"></a>        return '&lt;.assume&gt;' + nm + '&lt;./assume&gt;\n';
<a name="666"></a>    }
<a name="667"></a>
<a name="668"></a>    /*
<a name="669"></a>     *   Announce a singleton object we selected as a default for a
<a name="670"></a>     *   missing noun phrase.
<a name="671"></a>     *
<a name="672"></a>     *   'resolvedAllObjects' indicates where we are in the command
<a name="673"></a>     *   processing: this is true if we've already resolved all of the
<a name="674"></a>     *   other objects in the command, nil if not.  We use this
<a name="675"></a>     *   information to get the phrasing right according to the situation.
<a name="676"></a>     */
<a name="677"></a>    announceDefaultObject(obj, whichObj, action, resolvedAllObjects)
<a name="678"></a>    {
<a name="679"></a>        /*
<a name="680"></a>         *   put the action's default-object message in "assume" style,
<a name="681"></a>         *   and start a new line after it
<a name="682"></a>         */
<a name="683"></a>        return '&lt;.assume&gt;'
<a name="684"></a>            + action.announceDefaultObject(obj, whichObj, resolvedAllObjects)
<a name="685"></a>            + '&lt;./assume&gt;\n';
<a name="686"></a>    }
<a name="687"></a>
<a name="688"></a>    /* 'again' used with no prior command */
<a name="689"></a>    noCommandForAgain()
<a name="690"></a>    {
<a name="691"></a>        "&lt;.parser&gt;There&amp;rsquo;s nothing to repeat.&lt;./parser&gt; ";
<a name="692"></a>    }
<a name="693"></a>
<a name="694"></a>    /* 'again' cannot be directed to a different actor */
<a name="695"></a>    againCannotChangeActor()
<a name="696"></a>    {
<a name="697"></a>        "&lt;.parser&gt;To repeat a command like &lt;q&gt;turtle, go north,&lt;/q&gt;
<a name="698"></a>        just say &lt;q&gt;again,&lt;/q&gt; not &lt;q&gt;turtle, again.&lt;/q&gt;&lt;./parser&gt; ";
<a name="699"></a>    }
<a name="700"></a>
<a name="701"></a>    /* 'again': can no longer talk to target actor */
<a name="702"></a>    againCannotTalkToTarget(issuer, target)
<a name="703"></a>    {
<a name="704"></a>        "\^&lt;&lt;issuer.theName&gt;&gt; &lt;&lt;issuer.verbCannot&gt;&gt; repeat that command. ";
<a name="705"></a>    }
<a name="706"></a>
<a name="707"></a>    /* the last command cannot be repeated in the present context */
<a name="708"></a>    againNotPossible(issuer)
<a name="709"></a>    {
<a name="710"></a>        "That command cannot be repeated now. ";
<a name="711"></a>    }
<a name="712"></a>
<a name="713"></a>    /* system actions cannot be directed to non-player characters */
<a name="714"></a>    systemActionToNPC()
<a name="715"></a>    {
<a name="716"></a>        "&lt;.parser&gt;This command cannot be directed to another
<a name="717"></a>        character in the story.&lt;./parser&gt; ";
<a name="718"></a>    }
<a name="719"></a>
<a name="720"></a>    /* confirm that we really want to quit */
<a name="721"></a>    confirmQuit()
<a name="722"></a>    {
<a name="723"></a>        "Do you really want to quit?\ (&lt;&lt;aHref('y', 'Y', 'Confirm quitting')
<a name="724"></a>        &gt;&gt; is affirmative) &gt;\ ";
<a name="725"></a>    }
<a name="726"></a>
<a name="727"></a>    /*
<a name="728"></a>     *   QUIT message.  We display this to acknowledge an explicit player
<a name="729"></a>     *   command to quit the game.  This is the last message the game
<a name="730"></a>     *   displays on the way out; there is no need to offer any options at
<a name="731"></a>     *   this point, because the player has decided to exit the game.
<a name="732"></a>     *
<a name="733"></a>     *   By default, we show nothing; games can override this to display an
<a name="734"></a>     *   acknowledgment if desired.  Note that this isn't a general
<a name="735"></a>     *   end-of-game 'goodbye' message; the library only shows this to
<a name="736"></a>     *   acknowledge an explicit QUIT command from the player.
<a name="737"></a>     */
<a name="738"></a>    okayQuitting() { }
<a name="739"></a>
<a name="740"></a>    /*
<a name="741"></a>     *   "not terminating" confirmation - this is displayed when the
<a name="742"></a>     *   player doesn't acknowledge a 'quit' command with an affirmative
<a name="743"></a>     *   response to our confirmation question
<a name="744"></a>     */
<a name="745"></a>    notTerminating()
<a name="746"></a>    {
<a name="747"></a>        "&lt;.parser&gt;Continuing the story.&lt;./parser&gt; ";
<a name="748"></a>    }
<a name="749"></a>
<a name="750"></a>    /* confirm that they really want to restart */
<a name="751"></a>    confirmRestart()
<a name="752"></a>    {
<a name="753"></a>        "Do you really want to start over?\ (&lt;&lt;aHref('Y', 'Y',
<a name="754"></a>        'Confirm restart')&gt;&gt; is affirmative) &gt;\ ";
<a name="755"></a>    }
<a name="756"></a>
<a name="757"></a>    /* "not restarting" confirmation */
<a name="758"></a>    notRestarting() { "&lt;.parser&gt;Continuing the story.&lt;./parser&gt; "; }
<a name="759"></a>
<a name="760"></a>    /*
<a name="761"></a>     *   Show a game-finishing message - we use the conventional "*** You
<a name="762"></a>     *   have won! ***" format that text games have been using since the
<a name="763"></a>     *   dawn of time.
<a name="764"></a>     */
<a name="765"></a>    showFinishMsg(msg) { "&lt;.p&gt;*** &lt;&lt;msg&gt;&gt;\ ***&lt;.p&gt;"; }
<a name="766"></a>
<a name="767"></a>    /* standard game-ending messages for the common outcomes */
<a name="768"></a>    finishDeathMsg = '{YOU/HE pc} {[HAVE]|} DIED'
<a name="769"></a>    finishVictoryMsg = ('YOU ' + tSel('HAVE ', '') + 'WON')
<a name="770"></a>    finishFailureMsg = ('YOU ' + tSel('HAVE ', '') + 'FAILED')
<a name="771"></a>    finishGameOverMsg = 'GAME OVER'
<a name="772"></a>
<a name="773"></a>    /*
<a name="774"></a>     *   Get the save-game file prompt.  Note that this must return a
<a name="775"></a>     *   single-quoted string value, not display a value itself, because
<a name="776"></a>     *   this prompt is passed to inputFile().
<a name="777"></a>     */
<a name="778"></a>    getSavePrompt = 'Save game to file'
<a name="779"></a>
<a name="780"></a>    /* get the restore-game prompt */
<a name="781"></a>    getRestorePrompt = 'Restore game from file'
<a name="782"></a>
<a name="783"></a>    /* successfully saved */
<a name="784"></a>    saveOkay() { "&lt;.parser&gt;Saved.&lt;./parser&gt; "; }
<a name="785"></a>
<a name="786"></a>    /* save canceled */
<a name="787"></a>    saveCanceled() { "&lt;.parser&gt;Canceled.&lt;./parser&gt; "; }
<a name="788"></a>
<a name="789"></a>    /* saved failed due to a file write or similar error */
<a name="790"></a>    saveFailed(exc)
<a name="791"></a>    {
<a name="792"></a>        "&lt;.parser&gt;Failed; your computer might be running low
<a name="793"></a>        on disk space, or you might not have the necessary permissions
<a name="794"></a>        to write this file.&lt;./parser&gt; ";
<a name="795"></a>    }
<a name="796"></a>
<a name="797"></a>    /* save failed due to storage server request error */
<a name="798"></a>    saveFailedOnServer(exc)
<a name="799"></a>    {
<a name="800"></a>        "&lt;.parser&gt;Failed, because of a problem accessing the storage server:
<a name="801"></a>        &lt;&lt;makeSentence(exc.errMsg)&gt;&gt;&lt;./parser&gt;";
<a name="802"></a>    }
<a name="803"></a>
<a name="804"></a>    /*
<a name="805"></a>     *   make an error message into a sentence, by capitalizing the first
<a name="806"></a>     *   letter and adding a period at the end if it doesn't already have
<a name="807"></a>     *   one
<a name="808"></a>     */
<a name="809"></a>    makeSentence(msg)
<a name="810"></a>    {
<a name="811"></a>        return rexReplace(
<a name="812"></a>            ['^&lt;space&gt;*[a-z]', '(?&lt;=[^.?! ])&lt;space&gt;*$'], msg,
<a name="813"></a>            [{m: m.toUpper()}, '.']);
<a name="814"></a>    }
<a name="815"></a>
<a name="816"></a>    /* note that we're restoring at startup via a saved-position launch */
<a name="817"></a>    noteMainRestore() { "&lt;.parser&gt;Restoring saved game...&lt;./parser&gt;\n"; }
<a name="818"></a>
<a name="819"></a>    /* successfully restored */
<a name="820"></a>    restoreOkay() { "&lt;.parser&gt;Restored.&lt;./parser&gt; "; }
<a name="821"></a>
<a name="822"></a>    /* restore canceled */
<a name="823"></a>    restoreCanceled() { "&lt;.parser&gt;Canceled.&lt;./parser&gt; "; }
<a name="824"></a>
<a name="825"></a>    /* restore failed due to storage server request error */
<a name="826"></a>    restoreFailedOnServer(exc)
<a name="827"></a>    {
<a name="828"></a>        "&lt;.parser&gt;Failed, because of a problem accessing the storage server:
<a name="829"></a>        &lt;&lt;makeSentence(exc.errMsg)&gt;&gt;&lt;./parser&gt;";
<a name="830"></a>    }
<a name="831"></a>
<a name="832"></a>    /* restore failed because the file was not a valid saved game file */
<a name="833"></a>    restoreInvalidFile()
<a name="834"></a>    {
<a name="835"></a>        "&lt;.parser&gt;Failed: this is not a valid saved
<a name="836"></a>        position file.&lt;./parser&gt; ";
<a name="837"></a>    }
<a name="838"></a>
<a name="839"></a>    /* restore failed because the file was corrupted */
<a name="840"></a>    restoreCorruptedFile()
<a name="841"></a>    {
<a name="842"></a>        "&lt;.parser&gt;Failed: this saved state file appears to be
<a name="843"></a>        corrupted.  This can occur if the file was modified by another
<a name="844"></a>        program, or the file was copied between computers in a non-binary
<a name="845"></a>        transfer mode, or the physical media storing the file were
<a name="846"></a>        damaged.&lt;./parser&gt; ";
<a name="847"></a>    }
<a name="848"></a>
<a name="849"></a>    /* restore failed because the file was for the wrong game or version */
<a name="850"></a>    restoreInvalidMatch()
<a name="851"></a>    {
<a name="852"></a>        "&lt;.parser&gt;Failed: the file was not saved by this
<a name="853"></a>        story (or was saved by an incompatible version of
<a name="854"></a>        the story).&lt;./parser&gt; ";
<a name="855"></a>    }
<a name="856"></a>
<a name="857"></a>    /* restore failed for some reason other than those distinguished above */
<a name="858"></a>    restoreFailed(exc)
<a name="859"></a>    {
<a name="860"></a>        "&lt;.parser&gt;Failed: the position could not be
<a name="861"></a>        restored.&lt;./parser&gt; ";
<a name="862"></a>    }
<a name="863"></a>
<a name="864"></a>    /* error showing the input file dialog (or character-mode equivalent) */
<a name="865"></a>    filePromptFailed()
<a name="866"></a>    {
<a name="867"></a>        "&lt;.parser&gt;A system error occurred asking for a filename.
<a name="868"></a>        Your computer might be running low on memory, or might have a
<a name="869"></a>        configuration problem.&lt;./parser&gt; ";
<a name="870"></a>    }
<a name="871"></a>
<a name="872"></a>    /* error showing the input file dialog, with a system error message */
<a name="873"></a>    filePromptFailedMsg(msg)
<a name="874"></a>    {
<a name="875"></a>        "&lt;.parser&gt;Failed: &lt;&lt;makeSentence(msg)&gt;&gt;&lt;./parser&gt; ";
<a name="876"></a>    }
<a name="877"></a>
<a name="878"></a>    /* Web UI inputFile error: uploaded file is too large */
<a name="879"></a>    webUploadTooBig = 'The file you selected is too large to upload.'
<a name="880"></a>
<a name="881"></a>    /* PAUSE prompt */
<a name="882"></a>    pausePrompt()
<a name="883"></a>    {
<a name="884"></a>        "&lt;.parser&gt;The story is now paused.  Please press
<a name="885"></a>        the space bar when you are ready to resume the story, or
<a name="886"></a>        press the &amp;lsquo;S&amp;rsquo; key to save the current
<a name="887"></a>        position.&lt;./parser&gt;&lt;.p&gt;";
<a name="888"></a>    }
<a name="889"></a>
<a name="890"></a>    /* saving from within a pause */
<a name="891"></a>    pauseSaving()
<a name="892"></a>    {
<a name="893"></a>        "&lt;.parser&gt;Saving the story...&lt;./parser&gt;&lt;.p&gt;";
<a name="894"></a>    }
<a name="895"></a>
<a name="896"></a>    /* PAUSE ended */
<a name="897"></a>    pauseEnded()
<a name="898"></a>    {
<a name="899"></a>        "&lt;.parser&gt;Resuming the story.&lt;./parser&gt; ";
<a name="900"></a>    }
<a name="901"></a>
<a name="902"></a>    /* acknowledge starting an input script */
<a name="903"></a>    inputScriptOkay(fname)
<a name="904"></a>    {
<a name="905"></a>        "&lt;.parser&gt;Reading commands from &lt;q&gt;&lt;&lt;
<a name="906"></a>          File.getRootName(fname).htmlify()&gt;&gt;&lt;/q&gt;...&lt;./parser&gt;\n ";
<a name="907"></a>    }
<a name="908"></a>
<a name="909"></a>    /* error opening input script */
<a name="910"></a>    inputScriptFailed = "&lt;.parser&gt;Failed; the script input file could
<a name="911"></a>        not be opened.&lt;./parser&gt; "
<a name="912"></a>
<a name="913"></a>    /* exception opening input script */
<a name="914"></a>    inputScriptFailedException(exc)
<a name="915"></a>    {
<a name="916"></a>        "&lt;.parser&gt;Failed; &lt;&lt;exc.displayException&gt;&gt;&lt;./parser&gt; ";
<a name="917"></a>    }
<a name="918"></a>
<a name="919"></a>    /* get the scripting inputFile prompt message */
<a name="920"></a>    getScriptingPrompt = 'Please select a name for the new script file'
<a name="921"></a>
<a name="922"></a>    /* acknowledge scripting on */
<a name="923"></a>    scriptingOkay()
<a name="924"></a>    {
<a name="925"></a>        "&lt;.parser&gt;The transcript will be saved to the file.
<a name="926"></a>        Type &lt;&lt;aHref('script off', 'SCRIPT OFF', 'Turn off scripting')&gt;&gt; to
<a name="927"></a>        discontinue scripting.&lt;./parser&gt; ";
<a name="928"></a>    }
<a name="929"></a>
<a name="930"></a>    scriptingOkayWebTemp()
<a name="931"></a>    {
<a name="932"></a>        "&lt;.parser&gt;The transcript will be saved.
<a name="933"></a>        Type &lt;&lt;aHref('script off', 'SCRIPT OFF', 'Turn off scripting')&gt;&gt;
<a name="934"></a>        to discontinue scripting and download the saved
<a name="935"></a>        transcript.&lt;./parser&gt; ";
<a name="936"></a>    }
<a name="937"></a>
<a name="938"></a>    /* scripting failed */
<a name="939"></a>    scriptingFailed = "&lt;.parser&gt;Failed; an error occurred opening
<a name="940"></a>        the script file.&lt;./parser&gt; "
<a name="941"></a>
<a name="942"></a>    /* scripting failed with an exception */
<a name="943"></a>    scriptingFailedException(exc)
<a name="944"></a>    {
<a name="945"></a>        "&lt;.parser&gt;Failed; &lt;&lt;exc.displayException&gt;&gt;&lt;./parser&gt;";
<a name="946"></a>    }
<a name="947"></a>
<a name="948"></a>    /* acknowledge cancellation of script file dialog */
<a name="949"></a>    scriptingCanceled = "&lt;.parser&gt;Canceled.&lt;./parser&gt; "
<a name="950"></a>
<a name="951"></a>    /* acknowledge scripting off */
<a name="952"></a>    scriptOffOkay = "&lt;.parser&gt;Scripting ended.&lt;./parser&gt; "
<a name="953"></a>
<a name="954"></a>    /* SCRIPT OFF ignored because we're not in a script file */
<a name="955"></a>    scriptOffIgnored = "&lt;.parser&gt;No script is currently being
<a name="956"></a>                        recorded.&lt;./parser&gt; "
<a name="957"></a>
<a name="958"></a>    /* get the RECORD prompt */
<a name="959"></a>    getRecordingPrompt = 'Please select a name for the new command log file'
<a name="960"></a>
<a name="961"></a>    /* acknowledge recording on */
<a name="962"></a>    recordingOkay = "&lt;.parser&gt;Commands will now be recorded.  Type
<a name="963"></a>                     &lt;&lt;aHref('record off', 'RECORD OFF',
<a name="964"></a>                             'Turn off recording')&gt;&gt;
<a name="965"></a>                     to stop recording commands.&lt;.parser&gt; "
<a name="966"></a>
<a name="967"></a>    /* recording failed */
<a name="968"></a>    recordingFailed = "&lt;.parser&gt;Failed; an error occurred opening
<a name="969"></a>        the command recording file.&lt;./parser&gt; "
<a name="970"></a>
<a name="971"></a>    /* recording failed with exception */
<a name="972"></a>    recordingFailedException(exc)
<a name="973"></a>    {
<a name="974"></a>        "&lt;.parser&gt;Failed; &lt;&lt;exc.displayException()&gt;&gt;&lt;./parser&gt; ";
<a name="975"></a>    }
<a name="976"></a>
<a name="977"></a>    /* acknowledge cancellation */
<a name="978"></a>    recordingCanceled = "&lt;.parser&gt;Canceled.&lt;./parser&gt; "
<a name="979"></a>
<a name="980"></a>    /* recording turned off */
<a name="981"></a>    recordOffOkay = "&lt;.parser&gt;Command recording ended.&lt;./parser&gt; "
<a name="982"></a>
<a name="983"></a>    /* RECORD OFF ignored because we're not recording commands */
<a name="984"></a>    recordOffIgnored = "&lt;.parser&gt;No command recording is currently being
<a name="985"></a>                        made.&lt;./parser&gt; "
<a name="986"></a>
<a name="987"></a>    /* REPLAY prompt */
<a name="988"></a>    getReplayPrompt = 'Please select the command log file to replay'
<a name="989"></a>
<a name="990"></a>    /* REPLAY file selection canceled */
<a name="991"></a>    replayCanceled = "&lt;.parser&gt;Canceled.&lt;./parser&gt; "
<a name="992"></a>
<a name="993"></a>    /* undo command succeeded */
<a name="994"></a>    undoOkay(actor, cmd)
<a name="995"></a>    {
<a name="996"></a>        "&lt;.parser&gt;Taking back one turn: &lt;q&gt;";
<a name="997"></a>
<a name="998"></a>        /* show the target actor prefix, if an actor was specified */
<a name="999"></a>        if (actor != nil)
<a name="1000"></a>            "&lt;&lt;actor&gt;&gt;, ";
<a name="1001"></a>
<a name="1002"></a>        /* show the command */
<a name="1003"></a>        "&lt;&lt;cmd&gt;&gt;&lt;/q&gt;.&lt;./parser&gt;&lt;.p&gt;";
<a name="1004"></a>    }
<a name="1005"></a>
<a name="1006"></a>    /* undo command failed */
<a name="1007"></a>    undoFailed()
<a name="1008"></a>    {
<a name="1009"></a>        "&lt;.parser&gt;No more undo information is
<a name="1010"></a>        available.&lt;./parser&gt; ";
<a name="1011"></a>    }
<a name="1012"></a>
<a name="1013"></a>    /* comment accepted, with or without transcript recording in effect */
<a name="1014"></a>    noteWithScript = "&lt;.parser&gt;Comment recorded.&lt;./parser&gt; "
<a name="1015"></a>    noteWithoutScript = "&lt;.parser&gt;Comment &lt;b&gt;not&lt;/b&gt; recorded.&lt;./parser&gt; "
<a name="1016"></a>
<a name="1017"></a>    /* on the first comment without transcript recording, warn about it */
<a name="1018"></a>    noteWithoutScriptWarning = "&lt;.parser&gt;Comment &lt;b&gt;not&lt;/b&gt; recorded.
<a name="1019"></a>        Use &lt;&lt;aHref('script', 'SCRIPT', 'Begin saving the transcript')
<a name="1020"></a>          &gt;&gt; if you want to start recording the transcript.&lt;./parser&gt; "
<a name="1021"></a>
<a name="1022"></a>    /* invalid finishGame response */
<a name="1023"></a>    invalidFinishOption(resp)
<a name="1024"></a>    {
<a name="1025"></a>        "\bThat isn&amp;rsquo;t one of the options. ";
<a name="1026"></a>    }
<a name="1027"></a>
<a name="1028"></a>    /* acknowledge new "exits on/off" status */
<a name="1029"></a>    exitsOnOffOkay(stat, look)
<a name="1030"></a>    {
<a name="1031"></a>        if (stat &amp;&amp; look)
<a name="1032"></a>            "&lt;.parser&gt;The list of exits will now be shown in both
<a name="1033"></a>            the status line and in each room description.&lt;./parser&gt; ";
<a name="1034"></a>        else if (!stat &amp;&amp; !look)
<a name="1035"></a>            "&lt;.parser&gt;The list of exits will no longer be shown in
<a name="1036"></a>            either the status line or room description.&lt;./parser&gt; ";
<a name="1037"></a>        else
<a name="1038"></a>            "&lt;.parser&gt;The list of exits &lt;&lt;stat ? 'will' : 'will not'&gt;&gt; be
<a name="1039"></a>            shown in the status line, and &lt;&lt;look ? 'will' : 'won&amp;rsquo;t'&gt;&gt;
<a name="1040"></a>            be included in room descriptions.&lt;./parser&gt; ";
<a name="1041"></a>    }
<a name="1042"></a>
<a name="1043"></a>    /* explain how to turn exit display on and off */
<a name="1044"></a>    explainExitsOnOff()
<a name="1045"></a>    {
<a name="1046"></a>        exitsTip.showTip();
<a name="1047"></a>    }
<a name="1048"></a>
<a name="1049"></a>    /* describe the current EXITS settings */
<a name="1050"></a>    currentExitsSettings(statusLine, roomDesc)
<a name="1051"></a>    {
<a name="1052"></a>        "EXITS ";
<a name="1053"></a>        if (statusLine &amp;&amp; roomDesc)
<a name="1054"></a>            "ON";
<a name="1055"></a>        else if (statusLine)
<a name="1056"></a>            "STATUSLINE";
<a name="1057"></a>        else if (roomDesc)
<a name="1058"></a>            "LOOK";
<a name="1059"></a>        else
<a name="1060"></a>            "OFF";
<a name="1061"></a>    }
<a name="1062"></a>
<a name="1063"></a>    /* acknowledge HINTS OFF */
<a name="1064"></a>    hintsDisabled = '&lt;.parser&gt;Hints are now disabled.&lt;./parser&gt; '
<a name="1065"></a>
<a name="1066"></a>    /* rebuff a request for hints when they've been previously disabled */
<a name="1067"></a>    sorryHintsDisabled = '&lt;.parser&gt;Sorry, but hints have been disabled
<a name="1068"></a>        for this session, as you requested.  If you&amp;rsquo;ve changed your
<a name="1069"></a>        mind, you&amp;rsquo;ll have to save your current position, exit the TADS
<a name="1070"></a>        interpreter, and start a new interpreter session.&lt;./parser&gt; '
<a name="1071"></a>
<a name="1072"></a>    /* this game has no hints */
<a name="1073"></a>    hintsNotPresent = '&lt;.parser&gt;Sorry, this story doesn&amp;rsquo;t
<a name="1074"></a>                       have any built-in hints.&lt;./parser&gt; '
<a name="1075"></a>
<a name="1076"></a>    /* there are currently no hints available (but there might be later) */
<a name="1077"></a>    currentlyNoHints = '&lt;.parser&gt;Sorry, no hints are currently available.
<a name="1078"></a>                        Please check back later.&lt;./parser&gt; '
<a name="1079"></a>
<a name="1080"></a>    /* show the hint system warning */
<a name="1081"></a>    showHintWarning =
<a name="1082"></a>       "&lt;.notification&gt;Warning: Some people don&amp;rsquo;t like built-in hints,
<a name="1083"></a>       since the temptation to ask for help prematurely can become
<a name="1084"></a>       overwhelming when hints are so close at hand.  If you&amp;rsquo;re worried
<a name="1085"></a>       that your willpower won&amp;rsquo;t hold up, you can disable hints for the
<a name="1086"></a>       rest of this session by typing &lt;&lt;aHref('hints off', 'HINTS OFF')
<a name="1087"></a>       &gt;&gt;.  If you still want to see the hints now, type
<a name="1088"></a>       &lt;&lt;aHref('hint', 'HINT')&gt;&gt;.&lt;./notification&gt; "
<a name="1089"></a>
<a name="1090"></a>    /* done with hints */
<a name="1091"></a>    hintsDone = '&lt;.parser&gt;Done.&lt;./parser&gt; '
<a name="1092"></a>
<a name="1093"></a>    /* optional command is not supported in this game */
<a name="1094"></a>    commandNotPresent = "&lt;.parser&gt;That command isn&amp;rsquo;t needed
<a name="1095"></a>                         in this story.&lt;./parser&gt; "
<a name="1096"></a>
<a name="1097"></a>    /* this game doesn't use scoring */
<a name="1098"></a>    scoreNotPresent = "&lt;.parser&gt;This story doesn&amp;rsquo;t use
<a name="1099"></a>                       scoring.&lt;./parser&gt; "
<a name="1100"></a>
<a name="1101"></a>    /* mention the FULL SCORE command */
<a name="1102"></a>    mentionFullScore()
<a name="1103"></a>    {
<a name="1104"></a>        fullScoreTip.showTip();
<a name="1105"></a>    }
<a name="1106"></a>
<a name="1107"></a>    /* SAVE DEFAULTS successful */
<a name="1108"></a>    savedDefaults()
<a name="1109"></a>    {
<a name="1110"></a>        "&lt;.parser&gt;Your current settings have been stored as the
<a name="1111"></a>        default settings for new games.  The saved settings are: ";
<a name="1112"></a>
<a name="1113"></a>        /* show all of the settings */
<a name="1114"></a>        settingsUI.showAll();
<a name="1115"></a>
<a name="1116"></a>        ".  Most newer games will apply these settings automatically
<a name="1117"></a>        whenever you start (or RESTART) the game, but note that older
<a name="1118"></a>        games will not.&lt;./parser&gt; ";
<a name="1119"></a>    }
<a name="1120"></a>
<a name="1121"></a>    /* RESTORE DEFAULTS successful */
<a name="1122"></a>    restoredDefaults()
<a name="1123"></a>    {
<a name="1124"></a>        "&lt;.parser&gt;The saved default settings have been put into
<a name="1125"></a>        effect.  The new settings are: ";
<a name="1126"></a>
<a name="1127"></a>        /* show all of the settings */
<a name="1128"></a>        settingsUI.showAll();
<a name="1129"></a>
<a name="1130"></a>        ".&lt;./parser&gt; ";
<a name="1131"></a>    }
<a name="1132"></a>
<a name="1133"></a>    /* show a separator for the settingsUI.showAll() list */
<a name="1134"></a>    settingsItemSeparator = "; "
<a name="1135"></a>
<a name="1136"></a>    /* SAVE/RESTORE DEFAULTS not supported (old interpreter version) */
<a name="1137"></a>    defaultsFileNotSupported = "&lt;.parser&gt;Sorry, but the version of the
<a name="1138"></a>        TADS interpreter you&amp;rsquo;re using doesn&amp;rsquo;t support saving
<a name="1139"></a>        or restoring defaults.  You must install a more recent version
<a name="1140"></a>        in order to use this feature.&lt;./parser&gt; "
<a name="1141"></a>
<a name="1142"></a>    /* RESTORE DEFAULTS file open/read error */
<a name="1143"></a>    defaultsFileReadError(exc)
<a name="1144"></a>    {
<a name="1145"></a>        "&lt;.parser&gt;An error occurred reading the default settings
<a name="1146"></a>        file.  The global defaults can't be restored.&lt;./parser&gt; ";
<a name="1147"></a>    }
<a name="1148"></a>
<a name="1149"></a>    /* SAVE DEFAULTS file creation error */
<a name="1150"></a>    defaultsFileWriteError = "&lt;.parser&gt;An error occurred writing
<a name="1151"></a>        the default settings file.  The defaults have not been
<a name="1152"></a>        saved.  You might be out of disk space, or you might not
<a name="1153"></a>        have the necessary permissions to write the file.&lt;./parser&gt; "
<a name="1154"></a>
<a name="1155"></a>    /*
<a name="1156"></a>     *   Command key list for the menu system.  This uses the format
<a name="1157"></a>     *   defined for MenuItem.keyList in the menu system.  Keys must be
<a name="1158"></a>     *   given as lower-case in order to match input, since the menu
<a name="1159"></a>     *   system converts input keys to lower case before matching keys to
<a name="1160"></a>     *   this list.
<a name="1161"></a>     *
<a name="1162"></a>     *   Note that the first item in each list is what will be given in
<a name="1163"></a>     *   the navigation menu, which is why the fifth list contains 'ENTER'
<a name="1164"></a>     *   as its first item, even though this will never match a key press.
<a name="1165"></a>     */
<a name="1166"></a>    menuKeyList = [
<a name="1167"></a>                   ['q'],
<a name="1168"></a>                   ['p', '[left]', '[bksp]', '[esc]'],
<a name="1169"></a>                   ['u', '[up]'],
<a name="1170"></a>                   ['d', '[down]'],
<a name="1171"></a>                   ['ENTER', '\n', '[right]', ' ']
<a name="1172"></a>                  ]
<a name="1173"></a>
<a name="1174"></a>    /* link title for 'previous menu' navigation link */
<a name="1175"></a>    prevMenuLink = '&lt;font size=-1&gt;Previous&lt;/font&gt;'
<a name="1176"></a>
<a name="1177"></a>    /* link title for 'next topic' navigation link in topic lists */
<a name="1178"></a>    nextMenuTopicLink = '&lt;font size=-1&gt;Next&lt;/font&gt;'
<a name="1179"></a>
<a name="1180"></a>    /*
<a name="1181"></a>     *   main prompt text for text-mode menus - this is displayed each
<a name="1182"></a>     *   time we ask for a keystroke to navigate a menu in text-only mode
<a name="1183"></a>     */
<a name="1184"></a>    textMenuMainPrompt(keylist)
<a name="1185"></a>    {
<a name="1186"></a>        "\bSelect a topic number, or press &amp;lsquo;&lt;&lt;
<a name="1187"></a>        keylist[M_PREV][1]&gt;&gt;&amp;rsquo; for the previous
<a name="1188"></a>        menu or &amp;lsquo;&lt;&lt;keylist[M_QUIT][1]&gt;&gt;&amp;rsquo; to quit:\ ";
<a name="1189"></a>    }
<a name="1190"></a>
<a name="1191"></a>    /* prompt text for topic lists in text-mode menus */
<a name="1192"></a>    textMenuTopicPrompt()
<a name="1193"></a>    {
<a name="1194"></a>        "\bPress the space bar to display the next line,
<a name="1195"></a>        &amp;lsquo;&lt;b&gt;P&lt;/b&gt;&amp;rsquo; to go to the previous menu, or
<a name="1196"></a>        &amp;lsquo;&lt;b&gt;Q&lt;/b&gt;&amp;rsquo; to quit.\b";
<a name="1197"></a>    }
<a name="1198"></a>
<a name="1199"></a>    /*
<a name="1200"></a>     *   Position indicator for topic list items - this is displayed after
<a name="1201"></a>     *   a topic list item to show the current item number and the total
<a name="1202"></a>     *   number of items in the list, to give the user an idea of where
<a name="1203"></a>     *   they are in the overall list.
<a name="1204"></a>     */
<a name="1205"></a>    menuTopicProgress(cur, tot) { " [&lt;&lt;cur&gt;&gt;/&lt;&lt;tot&gt;&gt;]"; }
<a name="1206"></a>
<a name="1207"></a>    /*
<a name="1208"></a>     *   Message to display at the end of a topic list.  We'll display
<a name="1209"></a>     *   this after we've displayed all available items from a
<a name="1210"></a>     *   MenuTopicItem's list of items, to let the user know that there
<a name="1211"></a>     *   are no more items available.
<a name="1212"></a>     */
<a name="1213"></a>    menuTopicListEnd = '[The End]'
<a name="1214"></a>
<a name="1215"></a>    /*
<a name="1216"></a>     *   Message to display at the end of a "long topic" in the menu
<a name="1217"></a>     *   system.  We'll display this at the end of the long topic's
<a name="1218"></a>     *   contents.
<a name="1219"></a>     */
<a name="1220"></a>    menuLongTopicEnd = '[The End]'
<a name="1221"></a>
<a name="1222"></a>    /*
<a name="1223"></a>     *   instructions text for banner-mode menus - this is displayed in
<a name="1224"></a>     *   the instructions bar at the top of the screen, above the menu
<a name="1225"></a>     *   banner area
<a name="1226"></a>     */
<a name="1227"></a>    menuInstructions(keylist, prevLink)
<a name="1228"></a>    {
<a name="1229"></a>        "&lt;tab align=right &gt;&lt;b&gt;\^&lt;&lt;keylist[M_QUIT][1]&gt;&gt;&lt;/b&gt;=Quit &lt;b&gt;\^&lt;&lt;
<a name="1230"></a>        keylist[M_PREV][1]&gt;&gt;&lt;/b&gt;=Previous Menu&lt;br&gt;
<a name="1231"></a>        &lt;&lt;prevLink != nil ? aHrefAlt('previous', prevLink, '') : ''&gt;&gt;
<a name="1232"></a>        &lt;tab align=right &gt;&lt;b&gt;\^&lt;&lt;keylist[M_UP][1]&gt;&gt;&lt;/b&gt;=Up &lt;b&gt;\^&lt;&lt;
<a name="1233"></a>        keylist[M_DOWN][1]&gt;&gt;&lt;/b&gt;=Down &lt;b&gt;\^&lt;&lt;
<a name="1234"></a>        keylist[M_SEL][1]&gt;&gt;&lt;/b&gt;=Select&lt;br&gt;";
<a name="1235"></a>    }
<a name="1236"></a>
<a name="1237"></a>    /* show a 'next chapter' link */
<a name="1238"></a>    menuNextChapter(keylist, title, hrefNext, hrefUp)
<a name="1239"></a>    {
<a name="1240"></a>        "Next: &lt;&lt;aHref(hrefNext, title)&gt;&gt;;
<a name="1241"></a>        &lt;b&gt;\^&lt;&lt;keylist[M_PREV][1]&gt;&gt;&lt;/b&gt;=&lt;&lt;aHref(hrefUp, 'Menu')&gt;&gt;";
<a name="1242"></a>    }
<a name="1243"></a>
<a name="1244"></a>    /*
<a name="1245"></a>     *   cannot reach (i.e., touch) an object that is to be manipulated in
<a name="1246"></a>     *   a command - this is a generic message used when we cannot
<a name="1247"></a>     *   identify the specific reason that the object is in scope but
<a name="1248"></a>     *   cannot be touched
<a name="1249"></a>     */
<a name="1250"></a>    cannotReachObject(obj)
<a name="1251"></a>    {
<a name="1252"></a>        "{You/he} {cannot} reach &lt;&lt;obj.theNameObj&gt;&gt;. ";
<a name="1253"></a>    }
<a name="1254"></a>
<a name="1255"></a>    /*
<a name="1256"></a>     *   cannot reach an object, because the object is inside the given
<a name="1257"></a>     *   container
<a name="1258"></a>     */
<a name="1259"></a>    cannotReachContents(obj, loc)
<a name="1260"></a>    {
<a name="1261"></a>        gMessageParams(obj, loc);
<a name="1262"></a>        return '{You/he} {cannot} reach {the obj/him} through '
<a name="1263"></a>               + '{the loc/him}. ';
<a name="1264"></a>    }
<a name="1265"></a>
<a name="1266"></a>    /* cannot reach an object because it's outisde the given container */
<a name="1267"></a>    cannotReachOutside(obj, loc)
<a name="1268"></a>    {
<a name="1269"></a>        gMessageParams(obj, loc);
<a name="1270"></a>        return '{You/he} {cannot} reach {the obj/him} through '
<a name="1271"></a>               + '{the loc/him}. ';
<a name="1272"></a>    }
<a name="1273"></a>
<a name="1274"></a>    /* sound is coming from inside/outside a container */
<a name="1275"></a>    soundIsFromWithin(obj, loc)
<a name="1276"></a>    {
<a name="1277"></a>        "\^&lt;&lt;obj.theName&gt;&gt; appear&lt;&lt;obj.verbEndingSEd&gt;&gt; to be
<a name="1278"></a>        coming from inside &lt;&lt;loc.theNameObj&gt;&gt;. ";
<a name="1279"></a>    }
<a name="1280"></a>    soundIsFromWithout(obj, loc)
<a name="1281"></a>    {
<a name="1282"></a>        "\^&lt;&lt;obj.theName&gt;&gt; appear&lt;&lt;obj.verbEndingSEd&gt;&gt; to be
<a name="1283"></a>        coming from outside &lt;&lt;loc.theNameObj&gt;&gt;. ";
<a name="1284"></a>    }
<a name="1285"></a>
<a name="1286"></a>    /* odor is coming from inside/outside a container */
<a name="1287"></a>    smellIsFromWithin(obj, loc)
<a name="1288"></a>    {
<a name="1289"></a>        "\^&lt;&lt;obj.theName&gt;&gt; appear&lt;&lt;obj.verbEndingSEd&gt;&gt; to be
<a name="1290"></a>        coming from inside &lt;&lt;loc.theNameObj&gt;&gt;. ";
<a name="1291"></a>    }
<a name="1292"></a>    smellIsFromWithout(obj, loc)
<a name="1293"></a>    {
<a name="1294"></a>        "\^&lt;&lt;obj.theName&gt;&gt; appear&lt;&lt;obj.verbEndingSEd&gt;&gt; to be
<a name="1295"></a>        coming from outside &lt;&lt;loc.theNameObj&gt;&gt;. ";
<a name="1296"></a>    }
<a name="1297"></a>
<a name="1298"></a>    /* default description of the player character */
<a name="1299"></a>    pcDesc(actor)
<a name="1300"></a>    {
<a name="1301"></a>        "\^&lt;&lt;actor.theName&gt;&gt; look&lt;&lt;actor.verbEndingSEd&gt;&gt; the same
<a name="1302"></a>        as usual. ";
<a name="1303"></a>    }
<a name="1304"></a>
<a name="1305"></a>    /*
<a name="1306"></a>     *   Show a status line addendum for the actor posture, without
<a name="1307"></a>     *   mentioning the actor's location.  We won't mention standing, since
<a name="1308"></a>     *   this is the default posture.
<a name="1309"></a>     */
<a name="1310"></a>    roomActorStatus(actor)
<a name="1311"></a>    {
<a name="1312"></a>        /* mention any posture other than standing */
<a name="1313"></a>        if (actor.posture != standing)
<a name="1314"></a>            " (&lt;&lt;actor.posture.participle&gt;&gt;)";
<a name="1315"></a>    }
<a name="1316"></a>
<a name="1317"></a>    /* show a status line addendum: standing in/on something */
<a name="1318"></a>    actorInRoomStatus(actor, room)
<a name="1319"></a>        { " (&lt;&lt;actor.posture.participle&gt;&gt; &lt;&lt;room.actorInName&gt;&gt;)"; }
<a name="1320"></a>
<a name="1321"></a>    /* generic short description of a dark room */
<a name="1322"></a>    roomDarkName = 'In the dark'
<a name="1323"></a>
<a name="1324"></a>    /* generic long description of a dark room */
<a name="1325"></a>    roomDarkDesc = "It{&amp;rsquo;s| was} pitch black. "
<a name="1326"></a>
<a name="1327"></a>    /*
<a name="1328"></a>     *   mention that an actor is here, without mentioning the enclosing
<a name="1329"></a>     *   room, as part of a room description
<a name="1330"></a>     */
<a name="1331"></a>    roomActorHereDesc(actor)
<a name="1332"></a>    {
<a name="1333"></a>        "\^&lt;&lt;actor.nameIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt;
<a name="1334"></a>        &lt;&lt;tSel('here', 'there')&gt;&gt;. ";
<a name="1335"></a>    }
<a name="1336"></a>
<a name="1337"></a>    /*
<a name="1338"></a>     *   mention that an actor is visible at a distance or remotely,
<a name="1339"></a>     *   without mentioning the enclosing room, as part of a room
<a name="1340"></a>     *   description
<a name="1341"></a>     */
<a name="1342"></a>    roomActorThereDesc(actor)
<a name="1343"></a>    {
<a name="1344"></a>        "\^&lt;&lt;actor.nameIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt; nearby. ";
<a name="1345"></a>    }
<a name="1346"></a>
<a name="1347"></a>    /*
<a name="1348"></a>     *   Mention that an actor is in a given local room, as part of a room
<a name="1349"></a>     *   description.  This is used as a default "special description" for
<a name="1350"></a>     *   an actor.
<a name="1351"></a>     */
<a name="1352"></a>    actorInRoom(actor, cont)
<a name="1353"></a>    {
<a name="1354"></a>        "\^&lt;&lt;actor.nameIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt;
<a name="1355"></a>        &lt;&lt;cont.actorInName&gt;&gt;. ";
<a name="1356"></a>    }
<a name="1357"></a>
<a name="1358"></a>    /*
<a name="1359"></a>     *   Describe an actor as standing/sitting/lying on something, as part
<a name="1360"></a>     *   of the actor's EXAMINE description.  This is additional
<a name="1361"></a>     *   information added to the actor's description, so we refer to the
<a name="1362"></a>     *   actor with a pronoun ("He's standing here").
<a name="1363"></a>     */
<a name="1364"></a>    actorInRoomPosture(actor, room)
<a name="1365"></a>    {
<a name="1366"></a>        "\^&lt;&lt;actor.itIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt;
<a name="1367"></a>        &lt;&lt;room.actorInName&gt;&gt;. ";
<a name="1368"></a>    }
<a name="1369"></a>
<a name="1370"></a>    /*
<a name="1371"></a>     *   Describe an actor's posture, as part of an actor's "examine"
<a name="1372"></a>     *   description.  If the actor is standing, don't bother mentioning
<a name="1373"></a>     *   anything, as standing is the trivial default condition.
<a name="1374"></a>     */
<a name="1375"></a>    roomActorPostureDesc(actor)
<a name="1376"></a>    {
<a name="1377"></a>        if (actor.posture != standing)
<a name="1378"></a>            "\^&lt;&lt;actor.itIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt;. ";
<a name="1379"></a>    }
<a name="1380"></a>
<a name="1381"></a>    /*
<a name="1382"></a>     *   mention that the given actor is visible, at a distance or
<a name="1383"></a>     *   remotely, in the given location; this is used in room
<a name="1384"></a>     *   descriptions when an NPC is visible in a remote or distant
<a name="1385"></a>     *   location
<a name="1386"></a>     */
<a name="1387"></a>    actorInRemoteRoom(actor, room, pov)
<a name="1388"></a>    {
<a name="1389"></a>        /* say that the actor is in the room, using its remote in-name */
<a name="1390"></a>        "\^&lt;&lt;actor.nameIs&gt;&gt; &lt;&lt;actor.posture.participle&gt;&gt;
<a name="1391"></a>        &lt;&lt;room.inRoomName(pov)&gt;&gt;. ";
<a name="1392"></a>    }
<a name="1393"></a>
<a name="1394"></a>    /*
<a name="1395"></a>     *   mention that the given actor is visible, at a distance or
<a name="1396"></a>     *   remotely, in the given nested room within the given outer
<a name="1397"></a>     *   location; this is used in room descriptions
<a name="1398"></a>     */
<a name="1399"></a>    actorInRemoteNestedRoom(actor, inner, outer, pov)
<a name="1400"></a>    {
<a name="1401"></a>        /*
<a name="1402"></a>         *   say that the actor is in the nested room, in the current
<a name="1403"></a>         *   posture, and add then add that we're in the outer room as
<a name="1404"></a>         *   well
<a name="1405"></a>         */
<a name="1406"></a>        "\^&lt;&lt;actor.nameIs&gt;&gt; &lt;&lt;outer.inRoomName(pov)&gt;&gt;,
<a name="1407"></a>        &lt;&lt;actor.posture.participle&gt;&gt; &lt;&lt;inner.actorInName&gt;&gt;. ";
<a name="1408"></a>    }
<a name="1409"></a>
<a name="1410"></a>    /*
<a name="1411"></a>     *   Prefix/suffix messages for listing actors in a room description,
<a name="1412"></a>     *   for cases when the actors are in the local room in a nominal
<a name="1413"></a>     *   container that we want to mention: "Bob and Bill are sitting on
<a name="1414"></a>     *   the couch."
<a name="1415"></a>     */
<a name="1416"></a>    actorInGroupPrefix(posture, cont, lst) { "\^"; }
<a name="1417"></a>    actorInGroupSuffix(posture, cont, lst)
<a name="1418"></a>    {
<a name="1419"></a>        " &lt;&lt;lst.length() == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;
<a name="1420"></a>        &lt;&lt;posture.participle&gt;&gt; &lt;&lt;cont.actorInName&gt;&gt;. ";
<a name="1421"></a>    }
<a name="1422"></a>
<a name="1423"></a>    /*
<a name="1424"></a>     *   Prefix/suffix messages for listing actors in a room description,
<a name="1425"></a>     *   for cases when the actors are inside a nested room that's inside
<a name="1426"></a>     *   a remote location: "Bob and Bill are in the courtyard, sitting on
<a name="1427"></a>     *   the bench."
<a name="1428"></a>     */
<a name="1429"></a>    actorInRemoteGroupPrefix(pov, posture, cont, remote, lst) { "\^"; }
<a name="1430"></a>    actorInRemoteGroupSuffix(pov, posture, cont, remote, lst)
<a name="1431"></a>    {
<a name="1432"></a>        " &lt;&lt;lst.length() == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;
<a name="1433"></a>        &lt;&lt;remote.inRoomName(pov)&gt;&gt;, &lt;&lt;posture.participle&gt;&gt;
<a name="1434"></a>        &lt;&lt;cont.actorInName&gt;&gt;. ";
<a name="1435"></a>    }
<a name="1436"></a>
<a name="1437"></a>    /*
<a name="1438"></a>     *   Prefix/suffix messages for listing actors in a room description,
<a name="1439"></a>     *   for cases when the actors' nominal container cannot be seen or is
<a name="1440"></a>     *   not to be stated: "Bob and Bill are standing here."
<a name="1441"></a>     *
<a name="1442"></a>     *   Note that we don't always want to state the nominal container,
<a name="1443"></a>     *   even when it's visible.  For example, when actors are standing on
<a name="1444"></a>     *   the floor, we don't bother saying that they're on the floor, as
<a name="1445"></a>     *   that's stating the obvious.  The container will decide whether or
<a name="1446"></a>     *   not it wants to be included in the message; containers that don't
<a name="1447"></a>     *   want to be mentioned will use this form of the message.
<a name="1448"></a>     */
<a name="1449"></a>    actorHereGroupPrefix(posture, lst) { "\^"; }
<a name="1450"></a>    actorHereGroupSuffix(posture, lst)
<a name="1451"></a>    {
<a name="1452"></a>        " &lt;&lt;lst.length() == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;
<a name="1453"></a>        &lt;&lt;posture.participle&gt;&gt; &lt;&lt;tSel('here', 'there')&gt;&gt;. ";
<a name="1454"></a>    }
<a name="1455"></a>
<a name="1456"></a>    /*
<a name="1457"></a>     *   Prefix/suffix messages for listing actors in a room description,
<a name="1458"></a>     *   for cases when the actors' immediate container cannot be seen or
<a name="1459"></a>     *   is not to be stated, and the actors are in a remote location:
<a name="1460"></a>     *   "Bob and Bill are in the courtyard."
<a name="1461"></a>     */
<a name="1462"></a>    actorThereGroupPrefix(pov, posture, remote, lst) { "\^"; }
<a name="1463"></a>    actorThereGroupSuffix(pov, posture, remote, lst)
<a name="1464"></a>    {
<a name="1465"></a>        " &lt;&lt;lst.length() == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;
<a name="1466"></a>        &lt;&lt;posture.participle&gt;&gt; &lt;&lt;remote.inRoomName(pov)&gt;&gt;. ";
<a name="1467"></a>    }
<a name="1468"></a>
<a name="1469"></a>    /* a traveler is arriving, but not from a compass direction */
<a name="1470"></a>    sayArriving(traveler)
<a name="1471"></a>    {
<a name="1472"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1473"></a>        &lt;&lt;traveler.travelerLocName&gt;&gt;. ";
<a name="1474"></a>    }
<a name="1475"></a>
<a name="1476"></a>    /* a traveler is departing, but not in a compass direction */
<a name="1477"></a>    sayDeparting(traveler)
<a name="1478"></a>    {
<a name="1479"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1480"></a>        &lt;&lt;traveler.travelerLocName&gt;&gt;. ";
<a name="1481"></a>    }
<a name="1482"></a>
<a name="1483"></a>    /*
<a name="1484"></a>     *   a traveler is arriving locally (staying within view throughout the
<a name="1485"></a>     *   travel, and coming closer to the PC)
<a name="1486"></a>     */
<a name="1487"></a>    sayArrivingLocally(traveler, dest)
<a name="1488"></a>    {
<a name="1489"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1490"></a>        &lt;&lt;traveler.travelerLocName&gt;&gt;. ";
<a name="1491"></a>    }
<a name="1492"></a>
<a name="1493"></a>    /*
<a name="1494"></a>     *   a traveler is departing locally (staying within view throughout
<a name="1495"></a>     *   the travel, and moving further away from the PC)
<a name="1496"></a>     */
<a name="1497"></a>    sayDepartingLocally(traveler, dest)
<a name="1498"></a>    {
<a name="1499"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1500"></a>        &lt;&lt;traveler.travelerLocName&gt;&gt;. ";
<a name="1501"></a>    }
<a name="1502"></a>
<a name="1503"></a>    /*
<a name="1504"></a>     *   a traveler is traveling remotely (staying within view through the
<a name="1505"></a>     *   travel, and moving from one remote top-level location to another)
<a name="1506"></a>     */
<a name="1507"></a>    sayTravelingRemotely(traveler, dest)
<a name="1508"></a>    {
<a name="1509"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; &lt;&lt;traveler.verbToGo&gt;&gt; to
<a name="1510"></a>        &lt;&lt;traveler.travelerLocName&gt;&gt;. ";
<a name="1511"></a>    }
<a name="1512"></a>
<a name="1513"></a>    /* a traveler is arriving from a compass direction */
<a name="1514"></a>    sayArrivingDir(traveler, dirName)
<a name="1515"></a>    {
<a name="1516"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1517"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; from the &lt;&lt;dirName&gt;&gt;. ";
<a name="1518"></a>    }
<a name="1519"></a>
<a name="1520"></a>    /* a traveler is leaving in a given compass direction */
<a name="1521"></a>    sayDepartingDir(traveler, dirName)
<a name="1522"></a>    {
<a name="1523"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1524"></a>
<a name="1525"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1526"></a>        to the &lt;&lt;dirName&gt;&gt;&lt;&lt;nm != '' ? ' from ' + nm : ''&gt;&gt;. ";
<a name="1527"></a>    }
<a name="1528"></a>
<a name="1529"></a>    /* a traveler is arriving from a shipboard direction */
<a name="1530"></a>    sayArrivingShipDir(traveler, dirName)
<a name="1531"></a>    {
<a name="1532"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1533"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; from &lt;&lt;dirName&gt;&gt;. ";
<a name="1534"></a>    }
<a name="1535"></a>
<a name="1536"></a>    /* a traveler is leaving in a given shipboard direction */
<a name="1537"></a>    sayDepartingShipDir(traveler, dirName)
<a name="1538"></a>    {
<a name="1539"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1540"></a>
<a name="1541"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1542"></a>        to &lt;&lt;dirName&gt;&gt;&lt;&lt;nm != '' ? ' from ' + nm : ''&gt;&gt;. ";
<a name="1543"></a>    }
<a name="1544"></a>
<a name="1545"></a>    /* a traveler is going aft */
<a name="1546"></a>    sayDepartingAft(traveler)
<a name="1547"></a>    {
<a name="1548"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1549"></a>
<a name="1550"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToGo&gt;&gt;
<a name="1551"></a>        aft&lt;&lt;nm != '' ? ' from ' + nm : ''&gt;&gt;. ";
<a name="1552"></a>    }
<a name="1553"></a>
<a name="1554"></a>    /* a traveler is going fore */
<a name="1555"></a>    sayDepartingFore(traveler)
<a name="1556"></a>    {
<a name="1557"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1558"></a>
<a name="1559"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToGo&gt;&gt;
<a name="1560"></a>        forward&lt;&lt;nm != '' ? ' from ' + nm : ''&gt;&gt;. ";
<a name="1561"></a>    }
<a name="1562"></a>
<a name="1563"></a>    /* a shipboard direction was attempted while not onboard a ship */
<a name="1564"></a>    notOnboardShip = "That direction {is|was}n&amp;rsquo;t meaningful {|t}here. "
<a name="1565"></a>
<a name="1566"></a>    /* a traveler is leaving via a passage */
<a name="1567"></a>    sayDepartingThroughPassage(traveler, passage)
<a name="1568"></a>    {
<a name="1569"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1570"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; through &lt;&lt;passage.theNameObj&gt;&gt;. ";
<a name="1571"></a>    }
<a name="1572"></a>
<a name="1573"></a>    /* a traveler is arriving via a passage */
<a name="1574"></a>    sayArrivingThroughPassage(traveler, passage)
<a name="1575"></a>    {
<a name="1576"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1577"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; through &lt;&lt;passage.theNameObj&gt;&gt;. ";
<a name="1578"></a>    }
<a name="1579"></a>
<a name="1580"></a>    /* a traveler is leaving via a path */
<a name="1581"></a>    sayDepartingViaPath(traveler, passage)
<a name="1582"></a>    {
<a name="1583"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToLeave&gt;&gt;
<a name="1584"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; via &lt;&lt;passage.theNameObj&gt;&gt;. ";
<a name="1585"></a>    }
<a name="1586"></a>
<a name="1587"></a>    /* a traveler is arriving via a path */
<a name="1588"></a>    sayArrivingViaPath(traveler, passage)
<a name="1589"></a>    {
<a name="1590"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; enter&lt;&lt;traveler.verbEndingSEd&gt;&gt;
<a name="1591"></a>        &lt;&lt;traveler.travelerRemoteLocName&gt;&gt; via &lt;&lt;passage.theNameObj&gt;&gt;. ";
<a name="1592"></a>    }
<a name="1593"></a>
<a name="1594"></a>    /* a traveler is leaving up a stairway */
<a name="1595"></a>    sayDepartingUpStairs(traveler, stairs)
<a name="1596"></a>    {
<a name="1597"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToGo&gt;&gt;
<a name="1598"></a>        up &lt;&lt;stairs.theNameObj&gt;&gt;. ";
<a name="1599"></a>    }
<a name="1600"></a>
<a name="1601"></a>    /* a traveler is leaving down a stairway */
<a name="1602"></a>    sayDepartingDownStairs(traveler, stairs)
<a name="1603"></a>    {
<a name="1604"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToGo&gt;&gt;
<a name="1605"></a>        down &lt;&lt;stairs.theNameObj&gt;&gt;. ";
<a name="1606"></a>    }
<a name="1607"></a>
<a name="1608"></a>    /* a traveler is arriving by coming up a stairway */
<a name="1609"></a>    sayArrivingUpStairs(traveler, stairs)
<a name="1610"></a>    {
<a name="1611"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1612"></a>
<a name="1613"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; &lt;&lt;traveler.verbToCome&gt;&gt;
<a name="1614"></a>        up &lt;&lt;stairs.theNameObj&gt;&gt;&lt;&lt;nm != '' ? ' to ' + nm : ''&gt;&gt;. ";
<a name="1615"></a>    }
<a name="1616"></a>
<a name="1617"></a>    /* a traveler is arriving by coming down a stairway */
<a name="1618"></a>    sayArrivingDownStairs(traveler, stairs)
<a name="1619"></a>    {
<a name="1620"></a>        local nm = traveler.travelerRemoteLocName;
<a name="1621"></a>
<a name="1622"></a>        "\^&lt;&lt;traveler.travelerName(true)&gt;&gt; &lt;&lt;traveler.verbToCome&gt;&gt;
<a name="1623"></a>        down &lt;&lt;stairs.theNameObj&gt;&gt;&lt;&lt;nm != '' ? ' to ' + nm : ''&gt;&gt;. ";
<a name="1624"></a>    }
<a name="1625"></a>
<a name="1626"></a>    /* acompanying another actor on travel */
<a name="1627"></a>    sayDepartingWith(traveler, lead)
<a name="1628"></a>    {
<a name="1629"></a>        "\^&lt;&lt;traveler.travelerName(nil)&gt;&gt; &lt;&lt;traveler.verbToCome&gt;&gt;
<a name="1630"></a>        with &lt;&lt;lead.theNameObj&gt;&gt;. ";
<a name="1631"></a>    }
<a name="1632"></a>
<a name="1633"></a>    /*
<a name="1634"></a>     *   Accompanying a tour guide.  Note the seemingly reversed roles:
<a name="1635"></a>     *   the lead actor is the one initiating the travel, and the tour
<a name="1636"></a>     *   guide is the accompanying actor.  So, the lead actor is
<a name="1637"></a>     *   effectively following the accompanying actor.  It seems
<a name="1638"></a>     *   backwards, but really it's not: the tour guide merely shows the
<a name="1639"></a>     *   lead actor where to go, but it's up to the lead actor to actually
<a name="1640"></a>     *   initiate the travel.
<a name="1641"></a>     */
<a name="1642"></a>    sayDepartingWithGuide(guide, lead)
<a name="1643"></a>    {
<a name="1644"></a>        "\^&lt;&lt;lead.theName&gt;&gt; let&lt;&lt;tSel(lead.verbEndingS, '')&gt;&gt;
<a name="1645"></a>        &lt;&lt;guide.theNameObj&gt;&gt; lead the way. ";
<a name="1646"></a>    }
<a name="1647"></a>
<a name="1648"></a>    /* note that a door is being opened/closed remotely */
<a name="1649"></a>    sayOpenDoorRemotely(door, stat)
<a name="1650"></a>    {
<a name="1651"></a>        "Someone &lt;&lt;stat ? 'open' + tSel('s', 'ed')
<a name="1652"></a>                        : 'close' + tSel('s', 'd')&gt;&gt;
<a name="1653"></a>        &lt;&lt;door.theNameObj&gt;&gt; from the other side. ";
<a name="1654"></a>    }
<a name="1655"></a>
<a name="1656"></a>    /*
<a name="1657"></a>     *   open/closed status - these are simply adjectives that can be used
<a name="1658"></a>     *   to describe the status of an openable object
<a name="1659"></a>     */
<a name="1660"></a>    openMsg(obj) { return 'open'; }
<a name="1661"></a>    closedMsg(obj) { return 'closed'; }
<a name="1662"></a>
<a name="1663"></a>    /* object is currently open/closed */
<a name="1664"></a>    currentlyOpen = '{It\'s dobj} currently open. '
<a name="1665"></a>    currentlyClosed = '{It\'s dobj} currently closed. '
<a name="1666"></a>
<a name="1667"></a>    /* stand-alone independent clause describing current open status */
<a name="1668"></a>    openStatusMsg(obj) { return obj.itIsContraction + ' ' + obj.openDesc; }
<a name="1669"></a>
<a name="1670"></a>    /* locked/unlocked status - adjectives describing lock states */
<a name="1671"></a>    lockedMsg(obj) { return 'locked'; }
<a name="1672"></a>    unlockedMsg(obj) { return 'unlocked'; }
<a name="1673"></a>
<a name="1674"></a>    /* object is currently locked/unlocked */
<a name="1675"></a>    currentlyLocked = '{It\'s dobj} currently locked. '
<a name="1676"></a>    currentlyUnlocked = '{It\'s dobj} currently unlocked. '
<a name="1677"></a>
<a name="1678"></a>    /*
<a name="1679"></a>     *   on/off status - these are simply adjectives that can be used to
<a name="1680"></a>     *   describe the status of a switchable object
<a name="1681"></a>     */
<a name="1682"></a>    onMsg(obj) { return 'on'; }
<a name="1683"></a>    offMsg(obj) { return 'off'; }
<a name="1684"></a>
<a name="1685"></a>    /* daemon report for burning out a match */
<a name="1686"></a>    matchBurnedOut(obj)
<a name="1687"></a>    {
<a name="1688"></a>        gMessageParams(obj);
<a name="1689"></a>        "{The obj/he} finish{es/ed} burning, and disappear{s/ed} into a
<a name="1690"></a>        cloud of ash. ";
<a name="1691"></a>    }
<a name="1692"></a>
<a name="1693"></a>    /* daemon report for burning out a candle */
<a name="1694"></a>    candleBurnedOut(obj)
<a name="1695"></a>    {
<a name="1696"></a>        gMessageParams(obj);
<a name="1697"></a>        "{The obj/he} burn{s/ed} down too far to stay lit, and {goes}
<a name="1698"></a>        out. ";
<a name="1699"></a>    }
<a name="1700"></a>
<a name="1701"></a>    /* daemon report for burning out a generic fueled light source */
<a name="1702"></a>    objBurnedOut(obj)
<a name="1703"></a>    {
<a name="1704"></a>        gMessageParams(obj);
<a name="1705"></a>        "{The obj/he} {goes} out. ";
<a name="1706"></a>    }
<a name="1707"></a>
<a name="1708"></a>    /*
<a name="1709"></a>     *   Standard dialog titles, for the Web UI.  These are shown in the
<a name="1710"></a>     *   title bar area of the Web UI dialog used for inputDialog() calls.
<a name="1711"></a>     *   These correspond to the InDlgIconXxx icons.  The conventional
<a name="1712"></a>     *   interpreters use built-in titles when titles are needed at all,
<a name="1713"></a>     *   but in the Web UI we have to generate these ourselves.
<a name="1714"></a>     */
<a name="1715"></a>    dlgTitleNone = 'Note'
<a name="1716"></a>    dlgTitleWarning = 'Warning'
<a name="1717"></a>    dlgTitleInfo = 'Note'
<a name="1718"></a>    dlgTitleQuestion = 'Question'
<a name="1719"></a>    dlgTitleError = 'Error'
<a name="1720"></a>
<a name="1721"></a>    /*
<a name="1722"></a>     *   Standard dialog button labels, for the Web UI.  These are built in
<a name="1723"></a>     *   to the conventional interpreters, but in the Web UI we have to
<a name="1724"></a>     *   generate these ourselves.
<a name="1725"></a>     */
<a name="1726"></a>    dlgButtonOk = 'OK'
<a name="1727"></a>    dlgButtonCancel = 'Cancel'
<a name="1728"></a>    dlgButtonYes = 'Yes'
<a name="1729"></a>    dlgButtonNo = 'No'
<a name="1730"></a>
<a name="1731"></a>    /* web UI alert when a new user has joined a multi-user session */
<a name="1732"></a>    webNewUser(name) { "\b[&lt;&lt;name&gt;&gt; has joined the session.]\n"; }
<a name="1733"></a>
<a name="1734"></a>    /*
<a name="1735"></a>     *   Warning prompt for inputFile() warnings generated when reading a
<a name="1736"></a>     *   script file, for the Web UI.  The interpreter normally displays
<a name="1737"></a>     *   these warnings directly, but in Web UI mode, the program is
<a name="1738"></a>     *   responsible, so we need localized messages.
<a name="1739"></a>     */
<a name="1740"></a>    inputFileScriptWarning(warning, filename)
<a name="1741"></a>    {
<a name="1742"></a>        /* remove the two-letter error code at the start of the string */
<a name="1743"></a>        warning = warning.substr(3);
<a name="1744"></a>
<a name="1745"></a>        /* build the message */
<a name="1746"></a>        return warning + ' Do you wish to proceed?';
<a name="1747"></a>    }
<a name="1748"></a>    inputFileScriptWarningButtons = [
<a name="1749"></a>        '&amp;Yes, use this file', '&amp;Choose another file', '&amp;Stop the script']
<a name="1750"></a>;
<a name="1751"></a>
<a name="1752"></a>/* ------------------------------------------------------------------------ */
<a name="1753"></a>/*
<a name="1754"></a> *   Player Character messages.  These messages are generated when the
<a name="1755"></a> *   player issues a regular command to the player character (i.e.,
<a name="1756"></a> *   without specifying a target actor).
<a name="1757"></a> */
<a name="1758"></a>playerMessages: libMessages
<a name="1759"></a>    /* invalid command syntax */
<a name="1760"></a>    commandNotUnderstood(actor)
<a name="1761"></a>    {
<a name="1762"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t understand that
<a name="1763"></a>        command.&lt;./parser&gt; ";
<a name="1764"></a>    }
<a name="1765"></a>
<a name="1766"></a>    /* a special topic can't be used right now, because it's inactive */
<a name="1767"></a>    specialTopicInactive(actor)
<a name="1768"></a>    {
<a name="1769"></a>        "&lt;.parser&gt;That command can&amp;rsquo;t be used right now.&lt;./parser&gt; ";
<a name="1770"></a>    }
<a name="1771"></a>
<a name="1772"></a>    /* no match for a noun phrase */
<a name="1773"></a>    noMatch(actor, action, txt) { action.noMatch(self, actor, txt); }
<a name="1774"></a>
<a name="1775"></a>    /*
<a name="1776"></a>     *   No match message - we can't see a match for the noun phrase.  This
<a name="1777"></a>     *   is the default for most verbs.
<a name="1778"></a>     */
<a name="1779"></a>    noMatchCannotSee(actor, txt)
<a name="1780"></a>        { "{You/he} {sees} no &lt;&lt;txt&gt;&gt; {|t}here. "; }
<a name="1781"></a>
<a name="1782"></a>    /*
<a name="1783"></a>     *   No match message - we're not aware of a match for the noun phrase.
<a name="1784"></a>     *   Some sensory actions, such as LISTEN TO and SMELL, use this
<a name="1785"></a>     *   variation instead of the normal version; the things these commands
<a name="1786"></a>     *   refer to tend to be intangible, so "you can't see that" tends to
<a name="1787"></a>     *   be nonsensical.
<a name="1788"></a>     */
<a name="1789"></a>    noMatchNotAware(actor, txt)
<a name="1790"></a>        { "{You/he} {are} not aware of any &lt;&lt;txt&gt;&gt; {|t}here. "; }
<a name="1791"></a>
<a name="1792"></a>    /* 'all' is not allowed with the attempted action */
<a name="1793"></a>    allNotAllowed(actor)
<a name="1794"></a>    {
<a name="1795"></a>        "&lt;.parser&gt;&lt;q&gt;All&lt;/q&gt; cannot be used with that verb.&lt;./parser&gt; ";
<a name="1796"></a>    }
<a name="1797"></a>
<a name="1798"></a>    /* no match for 'all' */
<a name="1799"></a>    noMatchForAll(actor)
<a name="1800"></a>    {
<a name="1801"></a>        "&lt;.parser&gt;{You/he} {sees} nothing suitable {|t}here.&lt;./parser&gt; ";
<a name="1802"></a>    }
<a name="1803"></a>
<a name="1804"></a>    /* nothing left for 'all' after removing 'except' items */
<a name="1805"></a>    noMatchForAllBut(actor)
<a name="1806"></a>    {
<a name="1807"></a>        "&lt;.parser&gt;{You/he} {sees} nothing else
<a name="1808"></a>        {|t}here.&lt;./parser&gt; ";
<a name="1809"></a>    }
<a name="1810"></a>
<a name="1811"></a>    /* nothing left in a plural phrase after removing 'except' items */
<a name="1812"></a>    noMatchForListBut(actor) { noMatchForAllBut(actor); }
<a name="1813"></a>
<a name="1814"></a>    /* no match for a pronoun */
<a name="1815"></a>    noMatchForPronoun(actor, typ, pronounWord)
<a name="1816"></a>    {
<a name="1817"></a>        /* show the message */
<a name="1818"></a>        "&lt;.parser&gt;The word &lt;q&gt;&lt;&lt;pronounWord&gt;&gt;&lt;/q&gt; doesn&amp;rsquo;t refer to
<a name="1819"></a>        anything right now.&lt;./parser&gt; ";
<a name="1820"></a>    }
<a name="1821"></a>
<a name="1822"></a>    /*
<a name="1823"></a>     *   Ask for a missing object - this is called when a command is
<a name="1824"></a>     *   completely missing a noun phrase for one of its objects.
<a name="1825"></a>     */
<a name="1826"></a>    askMissingObject(actor, action, which)
<a name="1827"></a>    {
<a name="1828"></a>        reportQuestion('&lt;.parser&gt;\^' + action.whatObj(which)
<a name="1829"></a>                       + ' do you want '
<a name="1830"></a>                       + (actor.referralPerson == ThirdPerson
<a name="1831"></a>                          ? actor.theName : '')
<a name="1832"></a>                       + ' to '
<a name="1833"></a>                       + action.getQuestionInf(which) + '?&lt;./parser&gt; ');
<a name="1834"></a>    }
<a name="1835"></a>
<a name="1836"></a>    /*
<a name="1837"></a>     *   An object was missing - this is called under essentially the same
<a name="1838"></a>     *   circumstances as askMissingObject, but in cases where interactive
<a name="1839"></a>     *   resolution is impossible and we simply wish to report the problem
<a name="1840"></a>     *   and do not wish to ask for help.
<a name="1841"></a>     */
<a name="1842"></a>    missingObject(actor, action, which)
<a name="1843"></a>    {
<a name="1844"></a>        "&lt;.parser&gt;You need to be more specific
<a name="1845"></a>        about &lt;&lt;action.whatObj(which)&gt;&gt; you want
<a name="1846"></a>        &lt;&lt;actor.referralPerson == ThirdPerson ? actor.theName : ''&gt;&gt;
<a name="1847"></a>        to &lt;&lt;action.getQuestionInf(which)&gt;&gt;.&lt;./parser&gt; ";
<a name="1848"></a>    }
<a name="1849"></a>
<a name="1850"></a>    /*
<a name="1851"></a>     *   Ask for a missing literal phrase.
<a name="1852"></a>     */
<a name="1853"></a>    askMissingLiteral(actor, action, which)
<a name="1854"></a>    {
<a name="1855"></a>        /* use the standard missing-object message */
<a name="1856"></a>        askMissingObject(actor, action, which);
<a name="1857"></a>    }
<a name="1858"></a>
<a name="1859"></a>    /*
<a name="1860"></a>     *   Show the message for a missing literal phrase.
<a name="1861"></a>     */
<a name="1862"></a>    missingLiteral(actor, action, which)
<a name="1863"></a>    {
<a name="1864"></a>        "&lt;.parser&gt;Please be more specific
<a name="1865"></a>        about &lt;&lt;action.whatObj(which)&gt;&gt; to
<a name="1866"></a>        &lt;&lt;action.getQuestionInf(which)&gt;&gt;.  Try, for example,
<a name="1867"></a>        &lt;&lt;action.getQuestionInf(which)&gt;&gt; &lt;q&gt;something&lt;/q&gt;.&lt;./parser&gt; ";
<a name="1868"></a>    }
<a name="1869"></a>
<a name="1870"></a>    /* reflexive pronoun not allowed */
<a name="1871"></a>    reflexiveNotAllowed(actor, typ, pronounWord)
<a name="1872"></a>    {
<a name="1873"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t understand how to use the word
<a name="1874"></a>        &lt;q&gt;&lt;&lt;pronounWord&gt;&gt;&lt;/q&gt; like that.&lt;./parser&gt; ";
<a name="1875"></a>    }
<a name="1876"></a>
<a name="1877"></a>    /*
<a name="1878"></a>     *   a reflexive pronoun disagrees in gender, number, or something
<a name="1879"></a>     *   else with its referent
<a name="1880"></a>     */
<a name="1881"></a>    wrongReflexive(actor, typ, pronounWord)
<a name="1882"></a>    {
<a name="1883"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t understand what the
<a name="1884"></a>        word &lt;q&gt;&lt;&lt;pronounWord&gt;&gt;&lt;/q&gt; refers to.&lt;./parser&gt; ";
<a name="1885"></a>    }
<a name="1886"></a>
<a name="1887"></a>    /* no match for a possessive phrase */
<a name="1888"></a>    noMatchForPossessive(actor, owner, txt)
<a name="1889"></a>    {
<a name="1890"></a>        "&lt;.parser&gt;\^&lt;&lt;owner.nameDoes&gt;&gt;
<a name="1891"></a>        not appear to have any such thing.&lt;./parser&gt; ";
<a name="1892"></a>    }
<a name="1893"></a>
<a name="1894"></a>    /* no match for a plural possessive phrase */
<a name="1895"></a>    noMatchForPluralPossessive(actor, txt)
<a name="1896"></a>    {
<a name="1897"></a>        "&lt;.parser&gt;\^They &lt;&lt;tSel('do', 'did')&gt;&gt; not appear to have any such
<a name="1898"></a>        thing.&lt;./parser&gt; ";
<a name="1899"></a>    }
<a name="1900"></a>
<a name="1901"></a>    /* no match for a containment phrase */
<a name="1902"></a>    noMatchForLocation(actor, loc, txt)
<a name="1903"></a>    {
<a name="1904"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameSees&gt;&gt;
<a name="1905"></a>        no &lt;&lt;loc.childInName(txt)&gt;&gt;.&lt;./parser&gt; ";
<a name="1906"></a>    }
<a name="1907"></a>
<a name="1908"></a>    /* nothing in a container whose contents are specifically requested */
<a name="1909"></a>    nothingInLocation(actor, loc)
<a name="1910"></a>    {
<a name="1911"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameSees&gt;&gt;
<a name="1912"></a>        &lt;&lt;loc.childInName('nothing unusual')&gt;&gt;.&lt;./parser&gt; ";
<a name="1913"></a>    }
<a name="1914"></a>
<a name="1915"></a>    /* no match for the response to a disambiguation question */
<a name="1916"></a>    noMatchDisambig(actor, origPhrase, disambigResponse)
<a name="1917"></a>    {
<a name="1918"></a>        /*
<a name="1919"></a>         *   show the message, leaving the &lt;.parser&gt; tag mode open - we
<a name="1920"></a>         *   always show another disambiguation prompt after this message,
<a name="1921"></a>         *   so we'll let the prompt close the &lt;.parser&gt; mode
<a name="1922"></a>         */
<a name="1923"></a>        "&lt;.parser&gt;That was not one of the choices. ";
<a name="1924"></a>    }
<a name="1925"></a>
<a name="1926"></a>    /* empty noun phrase ('take the') */
<a name="1927"></a>    emptyNounPhrase(actor)
<a name="1928"></a>    {
<a name="1929"></a>        "&lt;.parser&gt;You seem to have left out some words.&lt;./parser&gt; ";
<a name="1930"></a>    }
<a name="1931"></a>
<a name="1932"></a>    /* 'take zero books' */
<a name="1933"></a>    zeroQuantity(actor, txt)
<a name="1934"></a>    {
<a name="1935"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.theName&gt;&gt; &lt;&lt;actor.verbCant&gt;&gt; do that to zero of
<a name="1936"></a>        something.&lt;./parser&gt; ";
<a name="1937"></a>    }
<a name="1938"></a>
<a name="1939"></a>    /* insufficient quantity to meet a command request ('take five books') */
<a name="1940"></a>    insufficientQuantity(actor, txt, matchList, requiredNum)
<a name="1941"></a>    {
<a name="1942"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameDoes&gt;&gt;n&amp;rsquo;t see that many
<a name="1943"></a>        &lt;&lt;txt&gt;&gt; &lt;&lt;tSel('here', 'there')&gt;&gt;.&lt;./parser&gt; ";
<a name="1944"></a>    }
<a name="1945"></a>
<a name="1946"></a>    /* a unique object is required, but multiple objects were specified */
<a name="1947"></a>    uniqueObjectRequired(actor, txt, matchList)
<a name="1948"></a>    {
<a name="1949"></a>        "&lt;.parser&gt;You can&amp;rsquo;t use multiple objects there.&lt;./parser&gt; ";
<a name="1950"></a>    }
<a name="1951"></a>
<a name="1952"></a>    /* a single noun phrase is required, but a noun list was used */
<a name="1953"></a>    singleObjectRequired(actor, txt)
<a name="1954"></a>    {
<a name="1955"></a>        "&lt;.parser&gt;Multiple objects aren&amp;rsquo;t allowed with that
<a name="1956"></a>        command.&lt;./parser&gt; ";
<a name="1957"></a>    }
<a name="1958"></a>
<a name="1959"></a>    /*
<a name="1960"></a>     *   The answer to a disambiguation question specifies an invalid
<a name="1961"></a>     *   ordinal ("the fourth one" when only three choices were offered).
<a name="1962"></a>     *
<a name="1963"></a>     *   'ordinalWord' is the ordinal word entered ('fourth' or the like).
<a name="1964"></a>     *   'originalText' is the text of the noun phrase that caused the
<a name="1965"></a>     *   disambiguation question to be asked in the first place.
<a name="1966"></a>     */
<a name="1967"></a>    disambigOrdinalOutOfRange(actor, ordinalWord, originalText)
<a name="1968"></a>    {
<a name="1969"></a>        /* leave the &lt;.parser&gt; tag open, for the re-prompt that will follow */
<a name="1970"></a>        "&lt;.parser&gt;There were not that many choices. ";
<a name="1971"></a>    }
<a name="1972"></a>
<a name="1973"></a>    /*
<a name="1974"></a>     *   Ask the canonical disambiguation question: "Which x do you
<a name="1975"></a>     *   mean...?".  'matchList' is the list of ambiguous objects with any
<a name="1976"></a>     *   redundant equivalents removed; and 'fullMatchList' is the full
<a name="1977"></a>     *   list, including redundant equivalents that were removed from
<a name="1978"></a>     *   'matchList'.
<a name="1979"></a>     *
<a name="1980"></a>     *   If askingAgain is true, it means that we're asking the question
<a name="1981"></a>     *   again because we got an invalid response to the previous attempt
<a name="1982"></a>     *   at the same prompt.  We will have explained the problem, and now
<a name="1983"></a>     *   we're going to give the user another crack at the same response.
<a name="1984"></a>     *
<a name="1985"></a>     *   To prevent interactive disambiguation, do this:
<a name="1986"></a>     *
<a name="1987"></a>     *   throw new ParseFailureException(&amp;ambiguousNounPhrase,
<a name="1988"></a>     *.  originalText, matchList, fullMatchList);
<a name="1989"></a>     */
<a name="1990"></a>    askDisambig(actor, originalText, matchList, fullMatchList,
<a name="1991"></a>                requiredNum, askingAgain, dist)
<a name="1992"></a>    {
<a name="1993"></a>        /* mark this as a question report with a dummy report */
<a name="1994"></a>        reportQuestion('');
<a name="1995"></a>
<a name="1996"></a>        /*
<a name="1997"></a>         *   Open the "&lt;.parser&gt;" tag, if we're not "asking again."  If we
<a name="1998"></a>         *   are asking again, we will already have shown a message
<a name="1999"></a>         *   explaining why we're asking again, and that message will have
<a name="2000"></a>         *   left us in &lt;.parser&gt; tag mode, so we don't need to open the
<a name="2001"></a>         *   tag again.
<a name="2002"></a>         */
<a name="2003"></a>        if (!askingAgain)
<a name="2004"></a>            "&lt;.parser&gt;";
<a name="2005"></a>
<a name="2006"></a>        /*
<a name="2007"></a>         *   the question varies depending on whether we want just one
<a name="2008"></a>         *   object or several objects in the final result
<a name="2009"></a>         */
<a name="2010"></a>        if (requiredNum == 1)
<a name="2011"></a>        {
<a name="2012"></a>            /*
<a name="2013"></a>             *   One object needed - use the original text in the query.
<a name="2014"></a>             *
<a name="2015"></a>             *   Note that if we're "asking again," we will have shown an
<a name="2016"></a>             *   additional message first explaining *why* we're asking
<a name="2017"></a>             *   again, and that message will have left us in &lt;.parser&gt;
<a name="2018"></a>             *   tag mode; so we need to close the &lt;.parser&gt; tag in this
<a name="2019"></a>             *   case, but we don't need to show a new one.
<a name="2020"></a>             */
<a name="2021"></a>            if (askingAgain)
<a name="2022"></a>                "Which did you mean,
<a name="2023"></a>                &lt;&lt;askDisambigList(matchList, fullMatchList, nil, dist)&gt;&gt;?";
<a name="2024"></a>            else
<a name="2025"></a>                "Which &lt;&lt;originalText&gt;&gt; do you mean,
<a name="2026"></a>                &lt;&lt;askDisambigList(matchList, fullMatchList, nil, dist)&gt;&gt;?";
<a name="2027"></a>        }
<a name="2028"></a>        else
<a name="2029"></a>        {
<a name="2030"></a>            /*
<a name="2031"></a>             *   Multiple objects required - ask by number, since we can't
<a name="2032"></a>             *   easily guess what the plural might be given the original
<a name="2033"></a>             *   text.
<a name="2034"></a>             *
<a name="2035"></a>             *   As above, we only need to *close* the &lt;.parser&gt; tag if
<a name="2036"></a>             *   we're asking again, because we will already have shown a
<a name="2037"></a>             *   prompt that opened the tag in this case.
<a name="2038"></a>             */
<a name="2039"></a>            if (askingAgain)
<a name="2040"></a>                "Which &lt;&lt;spellInt(requiredNum)&gt;&gt; (of
<a name="2041"></a>                &lt;&lt;askDisambigList(matchList, fullMatchList, true, dist)&gt;&gt;)
<a name="2042"></a>                did you mean?";
<a name="2043"></a>            else
<a name="2044"></a>                "Which &lt;&lt;spellInt(requiredNum)&gt;&gt;
<a name="2045"></a>                (of &lt;&lt;askDisambigList(matchList, fullMatchList,
<a name="2046"></a>                                      true, dist)&gt;&gt;) do you mean?";
<a name="2047"></a>        }
<a name="2048"></a>
<a name="2049"></a>        /* close the &lt;.parser&gt; tag */
<a name="2050"></a>        "&lt;./parser&gt; ";
<a name="2051"></a>    }
<a name="2052"></a>
<a name="2053"></a>    /*
<a name="2054"></a>     *   we found an ambiguous noun phrase, but we were unable to perform
<a name="2055"></a>     *   interactive disambiguation
<a name="2056"></a>     */
<a name="2057"></a>    ambiguousNounPhrase(actor, originalText, matchList, fullMatchList)
<a name="2058"></a>    {
<a name="2059"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t know which
<a name="2060"></a>        &lt;&lt;originalText&gt;&gt; you mean.&lt;./parser&gt; ";
<a name="2061"></a>    }
<a name="2062"></a>
<a name="2063"></a>    /* the actor is missing in a command */
<a name="2064"></a>    missingActor(actor)
<a name="2065"></a>    {
<a name="2066"></a>        "&lt;.parser&gt;You must be more specific about &lt;&lt;
<a name="2067"></a>        whomPronoun&gt;&gt; you want&lt;&lt;tSel('', 'ed')&gt;&gt; to address.&lt;./parser&gt; ";
<a name="2068"></a>    }
<a name="2069"></a>
<a name="2070"></a>    /* only a single actor can be addressed at a time */
<a name="2071"></a>    singleActorRequired(actor)
<a name="2072"></a>    {
<a name="2073"></a>        "&lt;.parser&gt;You can only address one person at a time.&lt;./parser&gt; ";
<a name="2074"></a>    }
<a name="2075"></a>
<a name="2076"></a>    /* cannot change actor mid-command */
<a name="2077"></a>    cannotChangeActor()
<a name="2078"></a>    {
<a name="2079"></a>        "&lt;.parser&gt;You cannot address more than one character on
<a name="2080"></a>        a single command line in this story.&lt;./parser&gt; ";
<a name="2081"></a>    }
<a name="2082"></a>
<a name="2083"></a>    /*
<a name="2084"></a>     *   tell the user they entered a word we don't know, offering the
<a name="2085"></a>     *   chance to correct it with "oops"
<a name="2086"></a>     */
<a name="2087"></a>    askUnknownWord(actor, txt)
<a name="2088"></a>    {
<a name="2089"></a>        /* start the message */
<a name="2090"></a>        "&lt;.parser&gt;The word &lt;q&gt;&lt;&lt;txt&gt;&gt;&lt;/q&gt; is not necessary in this
<a name="2091"></a>        story.&lt;./parser&gt; ";
<a name="2092"></a>
<a name="2093"></a>        /* mention the OOPS command, if appropriate */
<a name="2094"></a>        oopsNote();
<a name="2095"></a>    }
<a name="2096"></a>
<a name="2097"></a>    /*
<a name="2098"></a>     *   tell the user they entered a word we don't know, but don't offer
<a name="2099"></a>     *   an interactive way to fix it (i.e., we can't use OOPS at this
<a name="2100"></a>     *   point)
<a name="2101"></a>     */
<a name="2102"></a>    wordIsUnknown(actor, txt)
<a name="2103"></a>    {
<a name="2104"></a>        "&lt;.parser&gt;The story doesn&amp;rsquo;t understand that
<a name="2105"></a>        command.&lt;./parser&gt; ";
<a name="2106"></a>    }
<a name="2107"></a>
<a name="2108"></a>    /* the actor refuses the command because it's busy with something else */
<a name="2109"></a>    refuseCommandBusy(targetActor, issuingActor)
<a name="2110"></a>    {
<a name="2111"></a>        "\^&lt;&lt;targetActor.nameIs&gt;&gt; busy. ";
<a name="2112"></a>    }
<a name="2113"></a>
<a name="2114"></a>    /* cannot speak to multiple actors */
<a name="2115"></a>    cannotAddressMultiple(actor)
<a name="2116"></a>    {
<a name="2117"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.theName&gt;&gt; &lt;&lt;actor.verbCannot&gt;&gt; address multiple
<a name="2118"></a>        people at once.&lt;./parser&gt; ";
<a name="2119"></a>    }
<a name="2120"></a>
<a name="2121"></a>    /*
<a name="2122"></a>     *   Remaining actions on the command line were aborted due to the
<a name="2123"></a>     *   failure of the current action.  This is just a hook for the game's
<a name="2124"></a>     *   use, if it wants to provide an explanation; by default, we do
<a name="2125"></a>     *   nothing.  Note that games that override this will probably want to
<a name="2126"></a>     *   use a flag property so that they only show this message once -
<a name="2127"></a>     *   it's really only desirable to explain the the mechanism, not to
<a name="2128"></a>     *   flag it every time it's used.
<a name="2129"></a>     */
<a name="2130"></a>    explainCancelCommandLine()
<a name="2131"></a>    {
<a name="2132"></a>    }
<a name="2133"></a>;
<a name="2134"></a>
<a name="2135"></a>/* ------------------------------------------------------------------------ */
<a name="2136"></a>/*
<a name="2137"></a> *   Non-Player Character (NPC) messages - parser-mediated format.  These
<a name="2138"></a> *   versions of the NPC messages report errors through the
<a name="2139"></a> *   parser/narrator.
<a name="2140"></a> *
<a name="2141"></a> *   Note that a separate set of messages can be selected to report
<a name="2142"></a> *   messages in the voice of the NPC - see npcMessagesDirect below.
<a name="2143"></a> */
<a name="2144"></a>
<a name="2145"></a>/*
<a name="2146"></a> *   Standard Non-Player Character (NPC) messages.  These messages are
<a name="2147"></a> *   generated when the player issues a command to a specific non-player
<a name="2148"></a> *   character.
<a name="2149"></a> */
<a name="2150"></a>npcMessages: playerMessages
<a name="2151"></a>    /* the target cannot hear a command we gave */
<a name="2152"></a>    commandNotHeard(actor)
<a name="2153"></a>    {
<a name="2154"></a>        "\^&lt;&lt;actor.nameDoes&gt;&gt; not respond. ";
<a name="2155"></a>    }
<a name="2156"></a>
<a name="2157"></a>    /* no match for a noun phrase */
<a name="2158"></a>    noMatchCannotSee(actor, txt)
<a name="2159"></a>        { "\^&lt;&lt;actor.nameSees&gt;&gt; no &lt;&lt;txt&gt;&gt;. "; }
<a name="2160"></a>    noMatchNotAware(actor, txt)
<a name="2161"></a>        { "\^&lt;&lt;actor.nameIs&gt;&gt; not aware of any &lt;&lt;txt&gt;&gt;. "; }
<a name="2162"></a>
<a name="2163"></a>    /* no match for 'all' */
<a name="2164"></a>    noMatchForAll(actor)
<a name="2165"></a>    {
<a name="2166"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameDoes&gt;&gt;n&amp;rsquo;t see anything
<a name="2167"></a>        suitable.&lt;./parser&gt; ";
<a name="2168"></a>    }
<a name="2169"></a>
<a name="2170"></a>    /* nothing left for 'all' after removing 'except' items */
<a name="2171"></a>    noMatchForAllBut(actor)
<a name="2172"></a>    {
<a name="2173"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameSees&gt;&gt; nothing
<a name="2174"></a>        else.&lt;./parser&gt; ";
<a name="2175"></a>    }
<a name="2176"></a>
<a name="2177"></a>    /* insufficient quantity to meet a command request ('take five books') */
<a name="2178"></a>    insufficientQuantity(actor, txt, matchList, requiredNum)
<a name="2179"></a>    {
<a name="2180"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameDoes&gt;&gt;n&amp;rsquo;t see that many
<a name="2181"></a>         &lt;&lt;txt&gt;&gt;.&lt;./parser&gt; ";
<a name="2182"></a>    }
<a name="2183"></a>
<a name="2184"></a>    /*
<a name="2185"></a>     *   we found an ambiguous noun phrase, but we were unable to perform
<a name="2186"></a>     *   interactive disambiguation
<a name="2187"></a>     */
<a name="2188"></a>    ambiguousNounPhrase(actor, originalText, matchList, fullMatchList)
<a name="2189"></a>    {
<a name="2190"></a>        "&lt;.parser&gt;\^&lt;&lt;actor.nameDoes&gt;&gt;n&amp;rsquo;t know which
<a name="2191"></a>        &lt;&lt;originalText&gt;&gt; you mean&lt;&lt;tSel('', 't')&gt;&gt;.&lt;./parser&gt; ";
<a name="2192"></a>    }
<a name="2193"></a>
<a name="2194"></a>    /*
<a name="2195"></a>     *   Missing object query and error message templates
<a name="2196"></a>     */
<a name="2197"></a>    askMissingObject(actor, action, which)
<a name="2198"></a>    {
<a name="2199"></a>        reportQuestion('&lt;.parser&gt;\^' + action.whatObj(which)
<a name="2200"></a>                       + ' do you want ' + actor.theNameObj + ' to '
<a name="2201"></a>                       + action.getQuestionInf(which) + '?&lt;./parser&gt; ');
<a name="2202"></a>    }
<a name="2203"></a>    missingObject(actor, action, which)
<a name="2204"></a>    {
<a name="2205"></a>        "&lt;.parser&gt;You must be more specific
<a name="2206"></a>        about &lt;&lt;action.whatObj(which)&gt;&gt; you want &lt;&lt;actor.theNameObj&gt;&gt; to
<a name="2207"></a>        &lt;&lt;action.getQuestionInf(which)&gt;&gt;.&lt;./parser&gt; ";
<a name="2208"></a>    }
<a name="2209"></a>
<a name="2210"></a>    /* missing literal phrase query and error message templates */
<a name="2211"></a>    missingLiteral(actor, action, which)
<a name="2212"></a>    {
<a name="2213"></a>        "&lt;.parser&gt;You must be more specific about &lt;&lt;action.whatObj(which)&gt;&gt;
<a name="2214"></a>        you want &lt;&lt;actor.theNameObj&gt;&gt; to &lt;&lt;action.getQuestionInf(which)&gt;&gt;.
<a name="2215"></a>        For example: &lt;&lt;actor.theName&gt;&gt;, &lt;&lt;action.getQuestionInf(which)&gt;&gt;
<a name="2216"></a>        &lt;q&gt;something&lt;/q&gt;.&lt;./parser&gt; ";
<a name="2217"></a>    }
<a name="2218"></a>;
<a name="2219"></a>
<a name="2220"></a>/*
<a name="2221"></a> *   Deferred NPC messages.  We use this to report deferred messages from
<a name="2222"></a> *   an NPC to the player.  A message is deferred when a parsing error
<a name="2223"></a> *   occurs, but the NPC can't talk to the player because there's no sense
<a name="2224"></a> *   path to the player.  When this happens, the NPC queues the message
<a name="2225"></a> *   for eventual delivery; when a sense path appears later that lets the
<a name="2226"></a> *   NPC talk to the player, we deliver the message through this object.
<a name="2227"></a> *   Since these messages describe conditions that occurred in the past,
<a name="2228"></a> *   we use the past tense to phrase the messages.
<a name="2229"></a> *
<a name="2230"></a> *   This default implementation simply doesn't report deferred errors at
<a name="2231"></a> *   all.  The default message voice is the parser/narrator character, and
<a name="2232"></a> *   there is simply no good way for the parser/narrator to say that a
<a name="2233"></a> *   command failed in the past for a given character: "Bob looks like he
<a name="2234"></a> *   didn't know which box you meant" just doesn't work.  So, we'll simply
<a name="2235"></a> *   not report these errors at all.
<a name="2236"></a> *
<a name="2237"></a> *   To report messages in the NPC's voice directly, modify the NPC's
<a name="2238"></a> *   Actor object, or the Actor base class, to return
<a name="2239"></a> *   npcDeferredMessagesDirect rather than this object from
<a name="2240"></a> *   getParserMessageObj().
<a name="2241"></a> */
<a name="2242"></a>npcDeferredMessages: object
<a name="2243"></a>;
<a name="2244"></a>
<a name="2245"></a>/* ------------------------------------------------------------------------ */
<a name="2246"></a>/*
<a name="2247"></a> *   NPC messages, reported directly in the voice of the NPC.  These
<a name="2248"></a> *   messages are not selected by default, but a game can use them instead
<a name="2249"></a> *   of the parser-mediated versions by modifying the actor object's
<a name="2250"></a> *   getParserMessageObj() to return these objects.
<a name="2251"></a> */
<a name="2252"></a>
<a name="2253"></a>/*
<a name="2254"></a> *   Standard Non-Player Character (NPC) messages.  These messages are
<a name="2255"></a> *   generated when the player issues a command to a specific non-player
<a name="2256"></a> *   character.
<a name="2257"></a> */
<a name="2258"></a>npcMessagesDirect: npcMessages
<a name="2259"></a>    /* no match for a noun phrase */
<a name="2260"></a>    noMatchCannotSee(actor, txt)
<a name="2261"></a>    {
<a name="2262"></a>        "\^&lt;&lt;actor.nameVerb('look')&gt;&gt; around. &lt;q&gt;I don&amp;rsquo;t
<a name="2263"></a>        see any &lt;&lt;txt&gt;&gt;.&lt;/q&gt; ";
<a name="2264"></a>    }
<a name="2265"></a>    noMatchNotAware(actor, txt)
<a name="2266"></a>    {
<a name="2267"></a>        "&lt;q&gt;I&amp;rsquo;m not aware of any &lt;&lt;txt&gt;&gt;,&lt;/q&gt; &lt;&lt;actor.nameSays&gt;&gt;. ";
<a name="2268"></a>    }
<a name="2269"></a>
<a name="2270"></a>    /* no match for 'all' */
<a name="2271"></a>    noMatchForAll(actor)
<a name="2272"></a>    {
<a name="2273"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;, &lt;q&gt;I don&amp;rsquo;t see anything suitable.&lt;/q&gt; ";
<a name="2274"></a>    }
<a name="2275"></a>
<a name="2276"></a>    /* nothing left for 'all' after removing 'except' items */
<a name="2277"></a>    noMatchForAllBut(actor)
<a name="2278"></a>    {
<a name="2279"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;, &lt;q&gt;I see nothing else here.&lt;/q&gt; ";
<a name="2280"></a>    }
<a name="2281"></a>
<a name="2282"></a>    /* 'take zero books' */
<a name="2283"></a>    zeroQuantity(actor, txt)
<a name="2284"></a>    {
<a name="2285"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2286"></a>        &lt;q&gt;I can&amp;rsquo;t do that to zero of something.&lt;/q&gt; ";
<a name="2287"></a>    }
<a name="2288"></a>
<a name="2289"></a>    /* insufficient quantity to meet a command request ('take five books') */
<a name="2290"></a>    insufficientQuantity(actor, txt, matchList, requiredNum)
<a name="2291"></a>    {
<a name="2292"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2293"></a>        &lt;q&gt;I don&amp;rsquo;t see that many &lt;&lt;txt&gt;&gt; here.&lt;/q&gt; ";
<a name="2294"></a>    }
<a name="2295"></a>
<a name="2296"></a>    /* a unique object is required, but multiple objects were specified */
<a name="2297"></a>    uniqueObjectRequired(actor, txt, matchList)
<a name="2298"></a>    {
<a name="2299"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2300"></a>        &lt;q&gt;I can&amp;rsquo;t use multiple objects like that.&lt;/q&gt; ";
<a name="2301"></a>    }
<a name="2302"></a>
<a name="2303"></a>    /* a single noun phrase is required, but a noun list was used */
<a name="2304"></a>    singleObjectRequired(actor, txt)
<a name="2305"></a>    {
<a name="2306"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2307"></a>        &lt;q&gt;I can&amp;rsquo;t use multiple objects like that.&lt;/q&gt; ";
<a name="2308"></a>    }
<a name="2309"></a>
<a name="2310"></a>    /* no match for the response to a disambiguation question */
<a name="2311"></a>    noMatchDisambig(actor, origPhrase, disambigResponse)
<a name="2312"></a>    {
<a name="2313"></a>        /* leave the quote open for the re-prompt */
<a name="2314"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2315"></a>        &lt;q&gt;That was not one of the choices. ";
<a name="2316"></a>    }
<a name="2317"></a>
<a name="2318"></a>    /*
<a name="2319"></a>     *   The answer to a disambiguation question specifies an invalid
<a name="2320"></a>     *   ordinal ("the fourth one" when only three choices were offered).
<a name="2321"></a>     *
<a name="2322"></a>     *   'ordinalWord' is the ordinal word entered ('fourth' or the like).
<a name="2323"></a>     *   'originalText' is the text of the noun phrase that caused the
<a name="2324"></a>     *   disambiguation question to be asked in the first place.
<a name="2325"></a>     */
<a name="2326"></a>    disambigOrdinalOutOfRange(actor, ordinalWord, originalText)
<a name="2327"></a>    {
<a name="2328"></a>        /* leave the quote open for the re-prompt */
<a name="2329"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2330"></a>        &lt;q&gt;There weren&amp;rsquo;t that many choices. ";
<a name="2331"></a>    }
<a name="2332"></a>
<a name="2333"></a>    /*
<a name="2334"></a>     *   Ask the canonical disambiguation question: "Which x do you
<a name="2335"></a>     *   mean...?".  'matchList' is the list of ambiguous objects with any
<a name="2336"></a>     *   redundant equivalents removed, and 'fullMatchList' is the full
<a name="2337"></a>     *   list, including redundant equivalents that were removed from
<a name="2338"></a>     *   'matchList'.
<a name="2339"></a>     *
<a name="2340"></a>     *   To prevent interactive disambiguation, do this:
<a name="2341"></a>     *
<a name="2342"></a>     *   throw new ParseFailureException(&amp;ambiguousNounPhrase,
<a name="2343"></a>     *.  originalText, matchList, fullMatchList);
<a name="2344"></a>     */
<a name="2345"></a>    askDisambig(actor, originalText, matchList, fullMatchList,
<a name="2346"></a>                requiredNum, askingAgain, dist)
<a name="2347"></a>    {
<a name="2348"></a>        /* mark this as a question report */
<a name="2349"></a>        reportQuestion('');
<a name="2350"></a>
<a name="2351"></a>        /* the question depends on the number needed */
<a name="2352"></a>        if (requiredNum == 1)
<a name="2353"></a>        {
<a name="2354"></a>            /* one required - ask with the original text */
<a name="2355"></a>            if (!askingAgain)
<a name="2356"></a>                "\^&lt;&lt;actor.nameVerb('ask')&gt;&gt;, &lt;q&gt;";
<a name="2357"></a>
<a name="2358"></a>            "Which &lt;&lt;originalText&gt;&gt; do you mean, &lt;&lt;
<a name="2359"></a>            askDisambigList(matchList, fullMatchList, nil, dist)&gt;&gt;?&lt;/q&gt; ";
<a name="2360"></a>        }
<a name="2361"></a>        else
<a name="2362"></a>        {
<a name="2363"></a>            /*
<a name="2364"></a>             *   more than one required - we can't guess at the plural
<a name="2365"></a>             *   given the original text, so just use the number
<a name="2366"></a>             */
<a name="2367"></a>            if (!askingAgain)
<a name="2368"></a>                "\^&lt;&lt;actor.nameVerb('ask')&gt;&gt;, &lt;q&gt;";
<a name="2369"></a>
<a name="2370"></a>            "Which &lt;&lt;spellInt(requiredNum)&gt;&gt; (of &lt;&lt;
<a name="2371"></a>            askDisambigList(matchList, fullMatchList, true, dist)&gt;&gt;)
<a name="2372"></a>            do you mean?&lt;/q&gt; ";
<a name="2373"></a>        }
<a name="2374"></a>    }
<a name="2375"></a>
<a name="2376"></a>    /*
<a name="2377"></a>     *   we found an ambiguous noun phrase, but we were unable to perform
<a name="2378"></a>     *   interactive disambiguation
<a name="2379"></a>     */
<a name="2380"></a>    ambiguousNounPhrase(actor, originalText, matchList, fullMatchList)
<a name="2381"></a>    {
<a name="2382"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2383"></a>        &lt;q&gt;I don&amp;rsquo;t know which &lt;&lt;originalText&gt;&gt; you mean.&lt;/q&gt; ";
<a name="2384"></a>    }
<a name="2385"></a>
<a name="2386"></a>    /*
<a name="2387"></a>     *   Missing object query and error message templates
<a name="2388"></a>     */
<a name="2389"></a>    askMissingObject(actor, action, which)
<a name="2390"></a>    {
<a name="2391"></a>        reportQuestion('\^' + actor.nameSays
<a name="2392"></a>                       + ', &lt;q&gt;\^' + action.whatObj(which)
<a name="2393"></a>                       + ' do you want me to '
<a name="2394"></a>                       + action.getQuestionInf(which) + '?&lt;/q&gt; ');
<a name="2395"></a>    }
<a name="2396"></a>    missingObject(actor, action, which)
<a name="2397"></a>    {
<a name="2398"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2399"></a>        &lt;q&gt;I don&amp;rsquo;t know &lt;&lt;action.whatObj(which)&gt;&gt;
<a name="2400"></a>        you want me to &lt;&lt;action.getQuestionInf(which)&gt;&gt;.&lt;/q&gt; ";
<a name="2401"></a>    }
<a name="2402"></a>    missingLiteral(actor, action, which)
<a name="2403"></a>    {
<a name="2404"></a>        /* use the same message we use for a missing ordinary object */
<a name="2405"></a>        missingObject(actor, action, which);
<a name="2406"></a>    }
<a name="2407"></a>
<a name="2408"></a>    /* tell the user they entered a word we don't know */
<a name="2409"></a>    askUnknownWord(actor, txt)
<a name="2410"></a>    {
<a name="2411"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2412"></a>        &lt;q&gt;I don&amp;rsquo;t know the word &lt;q&gt;&lt;&lt;txt&gt;&gt;&lt;/q&gt;.&lt;/q&gt; ";
<a name="2413"></a>    }
<a name="2414"></a>
<a name="2415"></a>    /* tell the user they entered a word we don't know */
<a name="2416"></a>    wordIsUnknown(actor, txt)
<a name="2417"></a>    {
<a name="2418"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2419"></a>        &lt;q&gt;You used a word I don&amp;rsquo;t know.&lt;/q&gt; ";
<a name="2420"></a>    }
<a name="2421"></a>;
<a name="2422"></a>
<a name="2423"></a>/*
<a name="2424"></a> *   Deferred NPC messages.  We use this to report deferred messages from
<a name="2425"></a> *   an NPC to the player.  A message is deferred when a parsing error
<a name="2426"></a> *   occurs, but the NPC can't talk to the player because there's no sense
<a name="2427"></a> *   path to the player.  When this happens, the NPC queues the message
<a name="2428"></a> *   for eventual delivery; when a sense path appears later that lets the
<a name="2429"></a> *   NPC talk to the player, we deliver the message through this object.
<a name="2430"></a> *   Since these messages describe conditions that occurred in the past,
<a name="2431"></a> *   we use the past tense to phrase the messages.
<a name="2432"></a> *
<a name="2433"></a> *   Some messages will never be deferred:
<a name="2434"></a> *
<a name="2435"></a> *   commandNotHeard - if a command is not heard, it will never enter an
<a name="2436"></a> *   actor's command queue; the error is given immediately in response to
<a name="2437"></a> *   the command entry.
<a name="2438"></a> *
<a name="2439"></a> *   refuseCommandBusy - same as commandNotHeard
<a name="2440"></a> *
<a name="2441"></a> *   noMatchDisambig - interactive disambiguation will not happen in a
<a name="2442"></a> *   deferred response situation, so it is impossible to have an
<a name="2443"></a> *   interactive disambiguation failure.
<a name="2444"></a> *
<a name="2445"></a> *   disambigOrdinalOutOfRange - for the same reason noMatchDisambig can't
<a name="2446"></a> *   be deferred.
<a name="2447"></a> *
<a name="2448"></a> *   askDisambig - if we couldn't display a message, we definitely
<a name="2449"></a> *   couldn't perform interactive disambiguation.
<a name="2450"></a> *
<a name="2451"></a> *   askMissingObject - for the same reason that askDisambig can't be
<a name="2452"></a> *   deferred
<a name="2453"></a> *
<a name="2454"></a> *   askUnknownWord - for the same reason that askDisambig can't be
<a name="2455"></a> *   deferred.
<a name="2456"></a> */
<a name="2457"></a>npcDeferredMessagesDirect: npcDeferredMessages
<a name="2458"></a>    commandNotUnderstood(actor)
<a name="2459"></a>    {
<a name="2460"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2461"></a>        &lt;q&gt;I didn&amp;rsquo;t understand what you meant.&lt;/q&gt; ";
<a name="2462"></a>    }
<a name="2463"></a>
<a name="2464"></a>    /* no match for a noun phrase */
<a name="2465"></a>    noMatchCannotSee(actor, txt)
<a name="2466"></a>    {
<a name="2467"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;, &lt;q&gt;I didn&amp;rsquo;t see any &lt;&lt;txt&gt;&gt;.&lt;/q&gt; ";
<a name="2468"></a>    }
<a name="2469"></a>    noMatchNotAware(actor, txt)
<a name="2470"></a>    {
<a name="2471"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;, &lt;q&gt;I wasn&amp;rsquo;t aware of any &lt;&lt;txt&gt;&gt;.&lt;/q&gt; ";
<a name="2472"></a>    }
<a name="2473"></a>
<a name="2474"></a>    /* no match for 'all' */
<a name="2475"></a>    noMatchForAll(actor)
<a name="2476"></a>    {
<a name="2477"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;, &lt;q&gt;I didn&amp;rsquo;t see anything suitable.&lt;/q&gt; ";
<a name="2478"></a>    }
<a name="2479"></a>
<a name="2480"></a>    /* nothing left for 'all' after removing 'except' items */
<a name="2481"></a>    noMatchForAllBut(actor)
<a name="2482"></a>    {
<a name="2483"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2484"></a>        &lt;q&gt;I didn&amp;rsquo;t see what you meant.&lt;/q&gt; ";
<a name="2485"></a>    }
<a name="2486"></a>
<a name="2487"></a>    /* empty noun phrase ('take the') */
<a name="2488"></a>    emptyNounPhrase(actor)
<a name="2489"></a>    {
<a name="2490"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2491"></a>        &lt;q&gt;You left some words out.&lt;/q&gt; ";
<a name="2492"></a>    }
<a name="2493"></a>
<a name="2494"></a>    /* 'take zero books' */
<a name="2495"></a>    zeroQuantity(actor, txt)
<a name="2496"></a>    {
<a name="2497"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2498"></a>        &lt;q&gt;I didn&amp;rsquo;t understand what you meant.&lt;/q&gt; ";
<a name="2499"></a>    }
<a name="2500"></a>
<a name="2501"></a>    /* insufficient quantity to meet a command request ('take five books') */
<a name="2502"></a>    insufficientQuantity(actor, txt, matchList, requiredNum)
<a name="2503"></a>    {
<a name="2504"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2505"></a>        &lt;q&gt;I didn&amp;rsquo;t see enough &lt;&lt;txt&gt;&gt;.&lt;/q&gt; ";
<a name="2506"></a>    }
<a name="2507"></a>
<a name="2508"></a>    /* a unique object is required, but multiple objects were specified */
<a name="2509"></a>    uniqueObjectRequired(actor, txt, matchList)
<a name="2510"></a>    {
<a name="2511"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2512"></a>        &lt;q&gt;I didn&amp;rsquo;t understand what you meant.&lt;/q&gt; ";
<a name="2513"></a>    }
<a name="2514"></a>
<a name="2515"></a>    /* a unique object is required, but multiple objects were specified */
<a name="2516"></a>    singleObjectRequired(actor, txt)
<a name="2517"></a>    {
<a name="2518"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2519"></a>        &lt;q&gt;I didn&amp;rsquo;t understand what you meant.&lt;/q&gt; ";
<a name="2520"></a>    }
<a name="2521"></a>
<a name="2522"></a>    /*
<a name="2523"></a>     *   we found an ambiguous noun phrase, but we were unable to perform
<a name="2524"></a>     *   interactive disambiguation
<a name="2525"></a>     */
<a name="2526"></a>    ambiguousNounPhrase(actor, originalText, matchList, fullMatchList)
<a name="2527"></a>    {
<a name="2528"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2529"></a>        &lt;q&gt;I couldn&amp;rsquo;t tell which &lt;&lt;originalText&gt;&gt; you meant.&lt;/q&gt; ";
<a name="2530"></a>    }
<a name="2531"></a>
<a name="2532"></a>    /* an object phrase was missing */
<a name="2533"></a>    askMissingObject(actor, action, which)
<a name="2534"></a>    {
<a name="2535"></a>        reportQuestion('\^' + actor.nameSays
<a name="2536"></a>                       + ', &lt;q&gt;I didn&amp;rsquo;t know '
<a name="2537"></a>                       + action.whatObj(which) + ' you wanted me to '
<a name="2538"></a>                       + action.getQuestionInf(which) + '.&lt;/q&gt; ');
<a name="2539"></a>    }
<a name="2540"></a>
<a name="2541"></a>    /* tell the user they entered a word we don't know */
<a name="2542"></a>    wordIsUnknown(actor, txt)
<a name="2543"></a>    {
<a name="2544"></a>        "\^&lt;&lt;actor.nameSays&gt;&gt;,
<a name="2545"></a>        &lt;q&gt;You used a word I don&amp;rsquo;t know.&lt;/q&gt; ";
<a name="2546"></a>    }
<a name="2547"></a>;
<a name="2548"></a>
<a name="2549"></a>/* ------------------------------------------------------------------------ */
<a name="2550"></a>/*
<a name="2551"></a> *   Verb messages for standard library verb implementations for actions
<a name="2552"></a> *   performed by the player character.  These return strings suitable for
<a name="2553"></a> *   use in VerifyResult objects as well as for action reports
<a name="2554"></a> *   (defaultReport, mainReport, and so on).
<a name="2555"></a> *
<a name="2556"></a> *   Most of these messages are generic enough to be used for player and
<a name="2557"></a> *   non-player character alike.  However, some of the messages either are
<a name="2558"></a> *   too terse (such as the default reports) or are phrased awkwardly for
<a name="2559"></a> *   NPC use, so the NPC verb messages override those.
<a name="2560"></a> */
<a name="2561"></a>playerActionMessages: MessageHelper
<a name="2562"></a>    /*
<a name="2563"></a>     *   generic "can't do that" message - this is used when verification
<a name="2564"></a>     *   fails because an object doesn't define the action ("doXxx")
<a name="2565"></a>     *   method for the verb
<a name="2566"></a>     */
<a name="2567"></a>    cannotDoThatMsg = '{You/he} {can\'t} do that. '
<a name="2568"></a>
<a name="2569"></a>    /* must be holding something before a command */
<a name="2570"></a>    mustBeHoldingMsg(obj)
<a name="2571"></a>    {
<a name="2572"></a>        gMessageParams(obj);
<a name="2573"></a>        return '{You/he} {must} be holding {the obj/him} to do that. ';
<a name="2574"></a>    }
<a name="2575"></a>
<a name="2576"></a>    /* it's too dark to do that */
<a name="2577"></a>    tooDarkMsg = 'It{&amp;rsquo;s| was} too dark to do that. '
<a name="2578"></a>
<a name="2579"></a>    /* object must be visible */
<a name="2580"></a>    mustBeVisibleMsg(obj)
<a name="2581"></a>    {
<a name="2582"></a>        gMessageParams(obj);
<a name="2583"></a>        return '{You/he} {cannot} see {that obj/him}. ';
<a name="2584"></a>    }
<a name="2585"></a>
<a name="2586"></a>    /* object can be heard but not seen */
<a name="2587"></a>    heardButNotSeenMsg(obj)
<a name="2588"></a>    {
<a name="2589"></a>        gMessageParams(obj);
<a name="2590"></a>        return '{You/he} {can} hear {an obj/him}, but {you/he}
<a name="2591"></a>                 {can\'t} see {it obj/him}. ';
<a name="2592"></a>    }
<a name="2593"></a>
<a name="2594"></a>    /* object can be smelled but not seen */
<a name="2595"></a>    smelledButNotSeenMsg(obj)
<a name="2596"></a>    {
<a name="2597"></a>        gMessageParams(obj);
<a name="2598"></a>        return '{You/he} {can} smell {an obj/him}, but {you/he}
<a name="2599"></a>                {can\'t} see {it obj/him}. ';
<a name="2600"></a>    }
<a name="2601"></a>
<a name="2602"></a>    /* cannot hear object */
<a name="2603"></a>    cannotHearMsg(obj)
<a name="2604"></a>    {
<a name="2605"></a>        gMessageParams(obj);
<a name="2606"></a>        return '{You/he} {cannot} hear {that obj/him}. ';
<a name="2607"></a>    }
<a name="2608"></a>
<a name="2609"></a>    /* cannot smell object */
<a name="2610"></a>    cannotSmellMsg(obj)
<a name="2611"></a>    {
<a name="2612"></a>        gMessageParams(obj);
<a name="2613"></a>        return '{You/he} {cannot} smell {that obj/him}. ';
<a name="2614"></a>    }
<a name="2615"></a>
<a name="2616"></a>    /* cannot taste object */
<a name="2617"></a>    cannotTasteMsg(obj)
<a name="2618"></a>    {
<a name="2619"></a>        gMessageParams(obj);
<a name="2620"></a>        return '{You/he} {cannot} taste {that obj/him}. ';
<a name="2621"></a>    }
<a name="2622"></a>
<a name="2623"></a>    /* must remove an article of clothing before a command */
<a name="2624"></a>    cannotBeWearingMsg(obj)
<a name="2625"></a>    {
<a name="2626"></a>        gMessageParams(obj);
<a name="2627"></a>        return '{You/he} {must} take off {the obj/him}
<a name="2628"></a>                before {it actor/he} {can} do that. ';
<a name="2629"></a>    }
<a name="2630"></a>
<a name="2631"></a>    /* all contents must be removed from object before doing that */
<a name="2632"></a>    mustBeEmptyMsg(obj)
<a name="2633"></a>    {
<a name="2634"></a>        gMessageParams(obj);
<a name="2635"></a>        return '{You/he} {must} take everything out of {the obj/him}
<a name="2636"></a>                before {it actor/he} {can} do that. ';
<a name="2637"></a>    }
<a name="2638"></a>
<a name="2639"></a>    /* object must be opened before doing that */
<a name="2640"></a>    mustBeOpenMsg(obj)
<a name="2641"></a>    {
<a name="2642"></a>        gMessageParams(obj);
<a name="2643"></a>        return '{You/he} {must} open {the obj/him}
<a name="2644"></a>                before {it actor/he} {can} do that. ';
<a name="2645"></a>    }
<a name="2646"></a>
<a name="2647"></a>    /* object must be closed before doing that */
<a name="2648"></a>    mustBeClosedMsg(obj)
<a name="2649"></a>    {
<a name="2650"></a>        gMessageParams(obj);
<a name="2651"></a>        return '{You/he} {must} close {the obj/him}
<a name="2652"></a>               before {it actor/he} {can} do that. ';
<a name="2653"></a>    }
<a name="2654"></a>
<a name="2655"></a>    /* object must be unlocked before doing that */
<a name="2656"></a>    mustBeUnlockedMsg(obj)
<a name="2657"></a>    {
<a name="2658"></a>        gMessageParams(obj);
<a name="2659"></a>        return '{You/he} {must} unlock {the obj/him}
<a name="2660"></a>                before {it actor/he} {can} do that. ';
<a name="2661"></a>    }
<a name="2662"></a>
<a name="2663"></a>    /* no key is needed to lock or unlock this object */
<a name="2664"></a>    noKeyNeededMsg = '{The dobj/he} {does} not appear to take a key. '
<a name="2665"></a>
<a name="2666"></a>    /* actor must be standing before doing that */
<a name="2667"></a>    mustBeStandingMsg = '{You/he} {must} stand up before {it actor/he}
<a name="2668"></a>                      {can} do that. '
<a name="2669"></a>
<a name="2670"></a>    /* must be sitting on/in chair */
<a name="2671"></a>    mustSitOnMsg(obj)
<a name="2672"></a>    {
<a name="2673"></a>        gMessageParams(obj);
<a name="2674"></a>        return '{You/he} {must} sit {in obj} first. ';
<a name="2675"></a>    }
<a name="2676"></a>
<a name="2677"></a>    /* must be lying on/in object */
<a name="2678"></a>    mustLieOnMsg(obj)
<a name="2679"></a>    {
<a name="2680"></a>        gMessageParams(obj);
<a name="2681"></a>        return '{You/he} {must} lie {in obj} first. ';
<a name="2682"></a>    }
<a name="2683"></a>
<a name="2684"></a>    /* must get on/in object */
<a name="2685"></a>    mustGetOnMsg(obj)
<a name="2686"></a>    {
<a name="2687"></a>        gMessageParams(obj);
<a name="2688"></a>        return '{You/he} {must} get {in obj} first. ';
<a name="2689"></a>    }
<a name="2690"></a>
<a name="2691"></a>    /* object must be in loc before doing that */
<a name="2692"></a>    mustBeInMsg(obj, loc)
<a name="2693"></a>    {
<a name="2694"></a>        gMessageParams(obj, loc);
<a name="2695"></a>        return '{The obj/he} {must} be {in loc} before {you/he}
<a name="2696"></a>            {can} do that. ';
<a name="2697"></a>    }
<a name="2698"></a>
<a name="2699"></a>    /* actor must be holding the object before we can do that */
<a name="2700"></a>    mustBeCarryingMsg(obj, actor)
<a name="2701"></a>    {
<a name="2702"></a>        gMessageParams(obj, actor);
<a name="2703"></a>        return '{The actor/he} {must} be holding {the obj/him}
<a name="2704"></a>            before {it actor/he} {can} do that. ';
<a name="2705"></a>    }
<a name="2706"></a>
<a name="2707"></a>    /* generic "that's not important" message for decorations */
<a name="2708"></a>    decorationNotImportantMsg(obj)
<a name="2709"></a>    {
<a name="2710"></a>        gMessageParams(obj);
<a name="2711"></a>        return '{The obj/he} {is}n&amp;rsquo;t important. ';
<a name="2712"></a>    }
<a name="2713"></a>
<a name="2714"></a>    /* generic "you don't see that" message for "unthings" */
<a name="2715"></a>    unthingNotHereMsg(obj)
<a name="2716"></a>    {
<a name="2717"></a>        gMessageParams(obj);
<a name="2718"></a>        return '{You/he} {does}n&amp;rsquo;t see {that obj/him} {|t}here. ';
<a name="2719"></a>    }
<a name="2720"></a>
<a name="2721"></a>    /* generic "that's too far away" message for Distant items */
<a name="2722"></a>    tooDistantMsg(obj)
<a name="2723"></a>    {
<a name="2724"></a>        gMessageParams(obj);
<a name="2725"></a>        return '{The obj/he} {is} too far away. ';
<a name="2726"></a>    }
<a name="2727"></a>
<a name="2728"></a>    /* generic "no can do" message for intangibles */
<a name="2729"></a>    notWithIntangibleMsg(obj)
<a name="2730"></a>    {
<a name="2731"></a>        gMessageParams(obj);
<a name="2732"></a>        return '{You/he} {can\'t} do that to {an obj/him}. ';
<a name="2733"></a>    }
<a name="2734"></a>
<a name="2735"></a>    /* generic failure message for varporous objects */
<a name="2736"></a>    notWithVaporousMsg(obj)
<a name="2737"></a>    {
<a name="2738"></a>        gMessageParams(obj);
<a name="2739"></a>        return '{You/he} {can\'t} do that to {an obj/him}. ';
<a name="2740"></a>    }
<a name="2741"></a>
<a name="2742"></a>    /* look in/look under/look through/look behind/search vaporous */
<a name="2743"></a>    lookInVaporousMsg(obj)
<a name="2744"></a>    {
<a name="2745"></a>        gMessageParams(obj);
<a name="2746"></a>        return '{You/he} just {sees} {the obj/him}. ';
<a name="2747"></a>    }
<a name="2748"></a>
<a name="2749"></a>    /*
<a name="2750"></a>     *   cannot reach (i.e., touch) an object that is to be manipulated in
<a name="2751"></a>     *   a command - this is a generic message used when we cannot
<a name="2752"></a>     *   identify the specific reason that the object is in scope but
<a name="2753"></a>     *   cannot be touched
<a name="2754"></a>     */
<a name="2755"></a>    cannotReachObjectMsg(obj)
<a name="2756"></a>    {
<a name="2757"></a>        gMessageParams(obj);
<a name="2758"></a>        return '{You/he} {cannot} reach {the obj/him}. ';
<a name="2759"></a>    }
<a name="2760"></a>
<a name="2761"></a>    /* cannot reach an object through an obstructor */
<a name="2762"></a>    cannotReachThroughMsg(obj, loc)
<a name="2763"></a>    {
<a name="2764"></a>        gMessageParams(obj, loc);
<a name="2765"></a>        return '{You/he} {cannot} reach {the obj/him} through '
<a name="2766"></a>               + '{the loc/him}. ';
<a name="2767"></a>    }
<a name="2768"></a>
<a name="2769"></a>    /* generic long description of a Thing */
<a name="2770"></a>    thingDescMsg(obj)
<a name="2771"></a>    {
<a name="2772"></a>        gMessageParams(obj);
<a name="2773"></a>        return '{You/he} {sees} nothing unusual about '
<a name="2774"></a>               + '{it obj/him}. ';
<a name="2775"></a>    }
<a name="2776"></a>
<a name="2777"></a>    /* generic LISTEN TO description of a Thing */
<a name="2778"></a>    thingSoundDescMsg(obj)
<a name="2779"></a>        { return '{You/he} hear{s/d} nothing out of the ordinary. '; }
<a name="2780"></a>
<a name="2781"></a>    /* generic "smell" description of a Thing */
<a name="2782"></a>    thingSmellDescMsg(obj)
<a name="2783"></a>        { return '{You/he} smell{s/ed} nothing out of the ordinary. '; }
<a name="2784"></a>
<a name="2785"></a>    /* default description of a non-player character */
<a name="2786"></a>    npcDescMsg(npc)
<a name="2787"></a>    {
<a name="2788"></a>        gMessageParams(npc);
<a name="2789"></a>        return '{You/he} {sees} nothing unusual about '
<a name="2790"></a>               + '{the npc/him}. ';
<a name="2791"></a>    }
<a name="2792"></a>
<a name="2793"></a>    /* generic messages for looking prepositionally */
<a name="2794"></a>    nothingInsideMsg =
<a name="2795"></a>        'There{&amp;rsquo;s| was} nothing unusual in {the dobj/him}. '
<a name="2796"></a>    nothingUnderMsg =
<a name="2797"></a>        '{You/he} {sees} nothing unusual under {the dobj/him}. '
<a name="2798"></a>    nothingBehindMsg =
<a name="2799"></a>        '{You/he} {sees} nothing unusual behind {the dobj/him}. '
<a name="2800"></a>    nothingThroughMsg =
<a name="2801"></a>        '{You/he} {can} see nothing through {the dobj/him}. '
<a name="2802"></a>
<a name="2803"></a>    /* this is an object we can't look behind/through */
<a name="2804"></a>    cannotLookBehindMsg = '{You/he} {can\'t} look behind {the dobj/him}. '
<a name="2805"></a>    cannotLookUnderMsg = '{You/he} {can\'t} look under {the dobj/him}. '
<a name="2806"></a>    cannotLookThroughMsg = '{You/he} {can\'t} see through {the dobj/him}. '
<a name="2807"></a>
<a name="2808"></a>    /* looking through an open passage */
<a name="2809"></a>    nothingThroughPassageMsg = '{You/he} {can\'t} see much through
<a name="2810"></a>        {the dobj/him} from {|t}here. '
<a name="2811"></a>
<a name="2812"></a>    /* there's nothing on the other side of a door we just opened */
<a name="2813"></a>    nothingBeyondDoorMsg = 'Opening {the dobj/him} reveal{s|ed} nothing
<a name="2814"></a>        unusual. '
<a name="2815"></a>
<a name="2816"></a>    /* there's nothing here with a specific odor */
<a name="2817"></a>    nothingToSmellMsg =
<a name="2818"></a>        '{You/he} smell{s/ed} nothing out of the ordinary. '
<a name="2819"></a>
<a name="2820"></a>    /* there's nothing here with a specific noise */
<a name="2821"></a>    nothingToHearMsg = '{You/he} hear{s/d} nothing out of the ordinary. '
<a name="2822"></a>
<a name="2823"></a>    /* a sound appears to be coming from a source */
<a name="2824"></a>    noiseSourceMsg(src)
<a name="2825"></a>    {
<a name="2826"></a>        return '{The dobj/he} seem{s/ed} to be coming from '
<a name="2827"></a>            + src.theNameObj + '. ';
<a name="2828"></a>    }
<a name="2829"></a>
<a name="2830"></a>    /* an odor appears to be coming from a source */
<a name="2831"></a>    odorSourceMsg(src)
<a name="2832"></a>    {
<a name="2833"></a>        return '{The dobj/he} seem{s/ed} to be coming from '
<a name="2834"></a>            + src.theNameObj + '. ';
<a name="2835"></a>    }
<a name="2836"></a>
<a name="2837"></a>    /* an item is not wearable */
<a name="2838"></a>    notWearableMsg =
<a name="2839"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} wear. '
<a name="2840"></a>
<a name="2841"></a>    /* doffing something that isn't wearable */
<a name="2842"></a>    notDoffableMsg =
<a name="2843"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} remove. '
<a name="2844"></a>
<a name="2845"></a>    /* already wearing item */
<a name="2846"></a>    alreadyWearingMsg = '{You\'re} already wearing {it dobj/him}. '
<a name="2847"></a>
<a name="2848"></a>    /* not wearing (item being doffed) */
<a name="2849"></a>    notWearingMsg = '{You\'re} not wearing {that dobj/him}. '
<a name="2850"></a>
<a name="2851"></a>    /* default response to 'wear obj' */
<a name="2852"></a>    okayWearMsg = 'Okay, {you\'re} now wearing {the dobj/him}. '
<a name="2853"></a>
<a name="2854"></a>    /* default response to 'doff obj' */
<a name="2855"></a>    okayDoffMsg = 'Okay, {you\'re} no longer wearing {the dobj/him}. '
<a name="2856"></a>
<a name="2857"></a>    /* default response to open/close */
<a name="2858"></a>    okayOpenMsg = shortTMsg(
<a name="2859"></a>        'Opened. ', '{You/he} open{s/ed} {the dobj/him}. ')
<a name="2860"></a>    okayCloseMsg = shortTMsg(
<a name="2861"></a>        'Closed. ', '{You/he} close{s/d} {the dobj/him}. ')
<a name="2862"></a>
<a name="2863"></a>    /* default response to lock/unlock */
<a name="2864"></a>    okayLockMsg = shortTMsg(
<a name="2865"></a>        'Locked. ', '{You/he} lock{s/ed} {the dobj/him}. ')
<a name="2866"></a>    okayUnlockMsg = shortTMsg(
<a name="2867"></a>        'Unlocked. ', '{You/he} unlock{s/ed} {the dobj/him}. ')
<a name="2868"></a>
<a name="2869"></a>    /* cannot dig here */
<a name="2870"></a>    cannotDigMsg = '{You/he} {have} no reason to dig in {that dobj/him}. '
<a name="2871"></a>
<a name="2872"></a>    /* not a digging implement */
<a name="2873"></a>    cannotDigWithMsg =
<a name="2874"></a>        '{You/he} {sees} no way to use {that iobj/him} as a shovel. '
<a name="2875"></a>
<a name="2876"></a>    /* taking something already being held */
<a name="2877"></a>    alreadyHoldingMsg = '{You/he} {are} already carrying {the dobj/him}. '
<a name="2878"></a>
<a name="2879"></a>    /* actor taking self ("take me") */
<a name="2880"></a>    takingSelfMsg = '{You/he} {can\'t} take {yourself}. '
<a name="2881"></a>
<a name="2882"></a>    /* dropping an object not being carried */
<a name="2883"></a>    notCarryingMsg = '{You\'re} not carrying {that dobj/him}. '
<a name="2884"></a>
<a name="2885"></a>    /* actor dropping self */
<a name="2886"></a>    droppingSelfMsg = '{You/he} {can\'t} drop {yourself}. '
<a name="2887"></a>
<a name="2888"></a>    /* actor putting self in something */
<a name="2889"></a>    puttingSelfMsg = '{You/he} {can\'t} do that to {yourself}. '
<a name="2890"></a>
<a name="2891"></a>    /* actor throwing self */
<a name="2892"></a>    throwingSelfMsg = '{You/he} {can\'t} throw {yourself}. '
<a name="2893"></a>
<a name="2894"></a>    /* we can't put the dobj in the iobj because it's already there */
<a name="2895"></a>    alreadyPutInMsg = '{The dobj/he} {is} already in {the iobj/him}. '
<a name="2896"></a>
<a name="2897"></a>    /* we can't put the dobj on the iobj because it's already there */
<a name="2898"></a>    alreadyPutOnMsg = '{The dobj/he} {is} already on {the iobj/him}. '
<a name="2899"></a>
<a name="2900"></a>    /* we can't put the dobj under the iobj because it's already there */
<a name="2901"></a>    alreadyPutUnderMsg = '{The dobj/he} {is} already under {the iobj/him}. '
<a name="2902"></a>
<a name="2903"></a>    /* we can't put the dobj behind the iobj because it's already there */
<a name="2904"></a>    alreadyPutBehindMsg = '{The dobj/he} {is} already behind {the iobj/him}. '
<a name="2905"></a>
<a name="2906"></a>    /*
<a name="2907"></a>     *   trying to move a Fixture to a new container by some means (take,
<a name="2908"></a>     *   drop, put in, put on, etc)
<a name="2909"></a>     */
<a name="2910"></a>    cannotMoveFixtureMsg = '{The dobj/he} {cannot} be moved. '
<a name="2911"></a>
<a name="2912"></a>    /* trying to take a Fixture */
<a name="2913"></a>    cannotTakeFixtureMsg = '{You/he} {can\'t} take {that dobj/him}. '
<a name="2914"></a>
<a name="2915"></a>    /* trying to put a Fixture in something */
<a name="2916"></a>    cannotPutFixtureMsg = '{You/he} {can\'t} put {the dobj/him} anywhere. '
<a name="2917"></a>
<a name="2918"></a>    /* trying to take/move/put an Immovable object */
<a name="2919"></a>    cannotTakeImmovableMsg = '{You/he} {can\'t} take {that dobj/him}. '
<a name="2920"></a>    cannotMoveImmovableMsg = '{The dobj/he} {cannot} be moved. '
<a name="2921"></a>    cannotPutImmovableMsg = '{You/he} {can\'t} put {the dobj/him} anywhere. '
<a name="2922"></a>
<a name="2923"></a>    /* trying to take/move/put a Heavy object */
<a name="2924"></a>    cannotTakeHeavyMsg = '{The dobj/he} {is} too heavy. '
<a name="2925"></a>    cannotMoveHeavyMsg = '{The dobj/he} {is} too heavy. '
<a name="2926"></a>    cannotPutHeavyMsg = '{The dobj/he} {is} too heavy. '
<a name="2927"></a>
<a name="2928"></a>    /* trying to move a component object */
<a name="2929"></a>    cannotMoveComponentMsg(loc)
<a name="2930"></a>    {
<a name="2931"></a>        return '{The dobj/he} {is} part of ' + loc.theNameObj + '. ';
<a name="2932"></a>    }
<a name="2933"></a>
<a name="2934"></a>    /* trying to take a component object */
<a name="2935"></a>    cannotTakeComponentMsg(loc)
<a name="2936"></a>    {
<a name="2937"></a>        return '{You/he} {can\'t} have {that/him dobj}; '
<a name="2938"></a>            + '{it\'s dobj} part of ' + loc.theNameObj + '. ';
<a name="2939"></a>    }
<a name="2940"></a>
<a name="2941"></a>    /* trying to put a component in something */
<a name="2942"></a>    cannotPutComponentMsg(loc)
<a name="2943"></a>    {
<a name="2944"></a>        return '{You/he} {can\'t} put {that/him dobj} anywhere; '
<a name="2945"></a>            + '{it\'s dobj} part of ' + loc.theNameObj + '. ';
<a name="2946"></a>    }
<a name="2947"></a>
<a name="2948"></a>    /* specialized Immovable messages for TravelPushables */
<a name="2949"></a>    cannotTakePushableMsg = '{You/he} {can\'t} take {that/him dobj}, but
<a name="2950"></a>        {it actor/he} might {be|have been} able to push it somewhere. '
<a name="2951"></a>    cannotMovePushableMsg = 'It wouldn&amp;rsquo;t {|have} accomplish{|ed}
<a name="2952"></a>        anything to move {the dobj/him} around aimlessly, but {it actor/he}
<a name="2953"></a>        might {be|have been} able to push {it dobj/him} in a specific
<a name="2954"></a>        direction. '
<a name="2955"></a>    cannotPutPushableMsg = '{You/he} {can\'t} put {that/him dobj} anywhere,
<a name="2956"></a>        but {it actor/he} might {be|have been} able to push it somewhere. '
<a name="2957"></a>
<a name="2958"></a>    /* can't take something while occupying it */
<a name="2959"></a>    cannotTakeLocationMsg = '{You/he} {can\'t} take {that/him dobj}
<a name="2960"></a>        while {you\'re} occupying {it/him dobj}. '
<a name="2961"></a>
<a name="2962"></a>    /* can't REMOVE something that's being held */
<a name="2963"></a>    cannotRemoveHeldMsg = 'There{\'s| was} nothing to remove
<a name="2964"></a>        {the dobj/him} from. '
<a name="2965"></a>
<a name="2966"></a>    /* default 'take' response */
<a name="2967"></a>    okayTakeMsg = shortTMsg(
<a name="2968"></a>        'Taken. ', '{You/he} {take[s]|took} {the dobj/him}. ')
<a name="2969"></a>
<a name="2970"></a>    /* default 'drop' response */
<a name="2971"></a>    okayDropMsg = shortTMsg(
<a name="2972"></a>        'Dropped. ', '{You/he} drop{s/ped} {the dobj/him}. ')
<a name="2973"></a>
<a name="2974"></a>    /* dropping an object */
<a name="2975"></a>    droppingObjMsg(dropobj)
<a name="2976"></a>    {
<a name="2977"></a>        gMessageParams(dropobj);
<a name="2978"></a>        return '{You/he} drop{s/ped} {the dropobj/him}. ';
<a name="2979"></a>    }
<a name="2980"></a>
<a name="2981"></a>    /* default receiveDrop suffix for floorless rooms */
<a name="2982"></a>    floorlessDropMsg(dropobj)
<a name="2983"></a>    {
<a name="2984"></a>        gMessageParams(dropobj);
<a name="2985"></a>        return '{It dropobj/he} {fall[s]|fell} out of sight below. ';
<a name="2986"></a>    }
<a name="2987"></a>
<a name="2988"></a>    /* default successful 'put in' response */
<a name="2989"></a>    okayPutInMsg = shortTIMsg(
<a name="2990"></a>        'Done. ', '{You/he} put{[s]|} {the dobj/him} in {the iobj/him}. ')
<a name="2991"></a>
<a name="2992"></a>    /* default successful 'put on' response */
<a name="2993"></a>    okayPutOnMsg = shortTIMsg(
<a name="2994"></a>        'Done. ', '{You/he} put{[s]|} {the dobj/him} on {the iobj/him}. ')
<a name="2995"></a>
<a name="2996"></a>    /* default successful 'put under' response */
<a name="2997"></a>    okayPutUnderMsg = shortTIMsg(
<a name="2998"></a>        'Done. ', '{You/he} put{[s]|} {the dobj/him} under {the iobj/him}. ')
<a name="2999"></a>
<a name="3000"></a>    /* default successful 'put behind' response */
<a name="3001"></a>    okayPutBehindMsg = shortTIMsg(
<a name="3002"></a>        'Done. ', '{You/he} put{[s]|} {the dobj/him} behind {the iobj/him}. ')
<a name="3003"></a>
<a name="3004"></a>    /* try to take/move/put/taste an untakeable actor */
<a name="3005"></a>    cannotTakeActorMsg = '{The dobj/he} {won\'t} let {you/him} do that. '
<a name="3006"></a>    cannotMoveActorMsg = '{The dobj/he} {won\'t} let {you/him} do that. '
<a name="3007"></a>    cannotPutActorMsg = '{The dobj/he} {won\'t} let {you/him} do that. '
<a name="3008"></a>    cannotTasteActorMsg = '{The dobj/he} {won\'t} let {you/him} do that. '
<a name="3009"></a>
<a name="3010"></a>    /* trying to take/move/put/taste a person */
<a name="3011"></a>    cannotTakePersonMsg =
<a name="3012"></a>        '{The dobj/he} probably wouldn&amp;rsquo;t {|have} like{|d} that. '
<a name="3013"></a>    cannotMovePersonMsg =
<a name="3014"></a>        '{The dobj/he} probably wouldn&amp;rsquo;t {|have} like{|d} that. '
<a name="3015"></a>    cannotPutPersonMsg =
<a name="3016"></a>        '{The dobj/he} probably wouldn&amp;rsquo;t {|have} like{|d} that. '
<a name="3017"></a>    cannotTastePersonMsg =
<a name="3018"></a>        '{The dobj/he} probably wouldn&amp;rsquo;t {|have} like{|d} that. '
<a name="3019"></a>
<a name="3020"></a>    /* cannot move obj through obstructor */
<a name="3021"></a>    cannotMoveThroughMsg(obj, obs)
<a name="3022"></a>    {
<a name="3023"></a>        gMessageParams(obj, obs);
<a name="3024"></a>        return '{You/he} {can\'t} move {that obj/him} through '
<a name="3025"></a>               + '{the obs/him}. ';
<a name="3026"></a>    }
<a name="3027"></a>
<a name="3028"></a>    /* cannot move obj in our out of container cont */
<a name="3029"></a>    cannotMoveThroughContainerMsg(obj, cont)
<a name="3030"></a>    {
<a name="3031"></a>        gMessageParams(obj, cont);
<a name="3032"></a>        return '{You/he} {can\'t} move {that obj/him} through '
<a name="3033"></a>               + '{the cont/him}. ';
<a name="3034"></a>    }
<a name="3035"></a>
<a name="3036"></a>    /* cannot move obj because cont is closed */
<a name="3037"></a>    cannotMoveThroughClosedMsg(obj, cont)
<a name="3038"></a>    {
<a name="3039"></a>        gMessageParams(cont);
<a name="3040"></a>        return '{You/he} {can\'t} do that because {the cont/he} {is} '
<a name="3041"></a>               + 'closed. ';
<a name="3042"></a>    }
<a name="3043"></a>
<a name="3044"></a>    /* cannot fit obj into cont through cont's opening */
<a name="3045"></a>    cannotFitIntoOpeningMsg(obj, cont)
<a name="3046"></a>    {
<a name="3047"></a>        gMessageParams(obj, cont);
<a name="3048"></a>        return '{You/he} {can\'t} do that because {the obj/he} {is}
<a name="3049"></a>                too big to put into {the cont/him}. ';
<a name="3050"></a>    }
<a name="3051"></a>
<a name="3052"></a>    /* cannot fit obj out of cont through cont's opening */
<a name="3053"></a>    cannotFitOutOfOpeningMsg(obj, cont)
<a name="3054"></a>    {
<a name="3055"></a>        gMessageParams(obj, cont);
<a name="3056"></a>        return '{You/he} {can\'t} do that because {the obj/he} {is}
<a name="3057"></a>                too big to take out of {the cont/him}. ';
<a name="3058"></a>    }
<a name="3059"></a>
<a name="3060"></a>    /* actor 'obj' cannot reach in our out of container 'cont' */
<a name="3061"></a>    cannotTouchThroughContainerMsg(obj, cont)
<a name="3062"></a>    {
<a name="3063"></a>        gMessageParams(obj, cont);
<a name="3064"></a>        return '{The obj/he} {can\'t} reach anything through '
<a name="3065"></a>               + '{the cont/him}. ';
<a name="3066"></a>    }
<a name="3067"></a>
<a name="3068"></a>    /* actor 'obj' cannot reach through cont because cont is closed */
<a name="3069"></a>    cannotTouchThroughClosedMsg(obj, cont)
<a name="3070"></a>    {
<a name="3071"></a>        gMessageParams(obj, cont);
<a name="3072"></a>        return '{The obj/he} {can\'t} do that because
<a name="3073"></a>               {the cont/he} {is} closed. ';
<a name="3074"></a>    }
<a name="3075"></a>
<a name="3076"></a>    /* actor cannot fit hand into cont through cont's opening */
<a name="3077"></a>    cannotReachIntoOpeningMsg(obj, cont)
<a name="3078"></a>    {
<a name="3079"></a>        gMessageParams(obj, cont);
<a name="3080"></a>        return '{The obj/he} {can\'t} fit {its/her} hand into '
<a name="3081"></a>               + '{the cont/him}. ';
<a name="3082"></a>    }
<a name="3083"></a>
<a name="3084"></a>    /* actor cannot fit hand into cont through cont's opening */
<a name="3085"></a>    cannotReachOutOfOpeningMsg(obj, cont)
<a name="3086"></a>    {
<a name="3087"></a>        gMessageParams(obj, cont);
<a name="3088"></a>        return '{The obj/he} {can\'t} fit {its/her} hand through
<a name="3089"></a>               {the cont/him}. ';
<a name="3090"></a>    }
<a name="3091"></a>
<a name="3092"></a>    /* the object is too large for the actor to hold */
<a name="3093"></a>    tooLargeForActorMsg(obj)
<a name="3094"></a>    {
<a name="3095"></a>        gMessageParams(obj);
<a name="3096"></a>        return '{The obj/he} {is} too large for {you/him} to hold. ';
<a name="3097"></a>    }
<a name="3098"></a>
<a name="3099"></a>    /* the actor doesn't have room to hold the object */
<a name="3100"></a>    handsTooFullForMsg(obj)
<a name="3101"></a>    {
<a name="3102"></a>        return '{Your} hands {are|were} too full to hold '
<a name="3103"></a>               + obj.theNameObj + '. ';
<a name="3104"></a>    }
<a name="3105"></a>
<a name="3106"></a>    /* the object is becoming too large for the actor to hold */
<a name="3107"></a>    becomingTooLargeForActorMsg(obj)
<a name="3108"></a>    {
<a name="3109"></a>        gMessageParams(obj);
<a name="3110"></a>        return '{You/he} {cannot} do that because {the obj/he}
<a name="3111"></a>                would {|have} become too large for {you/him} to hold. ';
<a name="3112"></a>    }
<a name="3113"></a>
<a name="3114"></a>    /* the object is becoming large enough that the actor's hands are full */
<a name="3115"></a>    handsBecomingTooFullForMsg(obj)
<a name="3116"></a>    {
<a name="3117"></a>        gMessageParams(obj);
<a name="3118"></a>        return '{You/he} {cannot} do that because {its/her} hands
<a name="3119"></a>            would {|have} become too full to hold {the obj/him}. ';
<a name="3120"></a>    }
<a name="3121"></a>
<a name="3122"></a>    /* the object is too heavy (all by itself) for the actor to hold */
<a name="3123"></a>    tooHeavyForActorMsg(obj)
<a name="3124"></a>    {
<a name="3125"></a>        gMessageParams(obj);
<a name="3126"></a>        return '{The obj/he} {is} too heavy for {you/him} to pick up. ';
<a name="3127"></a>    }
<a name="3128"></a>
<a name="3129"></a>    /*
<a name="3130"></a>     *   the object is too heavy (in combination with everything else
<a name="3131"></a>     *   being carried) for the actor to pick up
<a name="3132"></a>     */
<a name="3133"></a>    totalTooHeavyForMsg(obj)
<a name="3134"></a>    {
<a name="3135"></a>        gMessageParams(obj);
<a name="3136"></a>        return '{The obj/he} {is} too heavy; {you/he} {will} have to put
<a name="3137"></a>            something else down first. ';
<a name="3138"></a>    }
<a name="3139"></a>
<a name="3140"></a>    /* object is too large for container */
<a name="3141"></a>    tooLargeForContainerMsg(obj, cont)
<a name="3142"></a>    {
<a name="3143"></a>        gMessageParams(obj, cont);
<a name="3144"></a>        return '{The obj/he} {is} too large for {the cont/him}. ';
<a name="3145"></a>    }
<a name="3146"></a>
<a name="3147"></a>    /* object is too large to fit under object */
<a name="3148"></a>    tooLargeForUndersideMsg(obj, cont)
<a name="3149"></a>    {
<a name="3150"></a>        gMessageParams(obj, cont);
<a name="3151"></a>        return '{The obj/he} {is} too large to put under {the cont/him}. ';
<a name="3152"></a>    }
<a name="3153"></a>
<a name="3154"></a>    /* object is too large to fit behind object */
<a name="3155"></a>    tooLargeForRearMsg(obj, cont)
<a name="3156"></a>    {
<a name="3157"></a>        gMessageParams(obj, cont);
<a name="3158"></a>        return '{The obj/he} {is} too large to put behind {the cont/him}. ';
<a name="3159"></a>    }
<a name="3160"></a>
<a name="3161"></a>    /* container doesn't have room for object */
<a name="3162"></a>    containerTooFullMsg(obj, cont)
<a name="3163"></a>    {
<a name="3164"></a>        gMessageParams(obj, cont);
<a name="3165"></a>        return '{The cont/he} {is} already too full to hold {the obj/him}. ';
<a name="3166"></a>    }
<a name="3167"></a>
<a name="3168"></a>    /* surface doesn't have room for object */
<a name="3169"></a>    surfaceTooFullMsg(obj, cont)
<a name="3170"></a>    {
<a name="3171"></a>        gMessageParams(obj, cont);
<a name="3172"></a>        return 'There{&amp;rsquo;s| was} no room for {the obj/him} on '
<a name="3173"></a>               + '{the cont/him}. ';
<a name="3174"></a>    }
<a name="3175"></a>
<a name="3176"></a>    /* underside doesn't have room for object */
<a name="3177"></a>    undersideTooFullMsg(obj, cont)
<a name="3178"></a>    {
<a name="3179"></a>        gMessageParams(obj, cont);
<a name="3180"></a>        return 'There{&amp;rsquo;s| was} no room for {the obj/him} under '
<a name="3181"></a>               + '{the cont/him}. ';
<a name="3182"></a>    }
<a name="3183"></a>
<a name="3184"></a>    /* rear surface/space doesn't have room for object */
<a name="3185"></a>    rearTooFullMsg(obj, cont)
<a name="3186"></a>    {
<a name="3187"></a>        gMessageParams(obj, cont);
<a name="3188"></a>        return 'There{&amp;rsquo;s |was} no room for {the obj/him} behind '
<a name="3189"></a>               + '{the cont/him}. ';
<a name="3190"></a>    }
<a name="3191"></a>
<a name="3192"></a>    /* the current action would make obj too large for its container */
<a name="3193"></a>    becomingTooLargeForContainerMsg(obj, cont)
<a name="3194"></a>    {
<a name="3195"></a>        gMessageParams(obj, cont);
<a name="3196"></a>        return '{You/he} {cannot} do that because it would {make|have made}
<a name="3197"></a>            {the obj/him} too large for {the cont/him}. ';
<a name="3198"></a>    }
<a name="3199"></a>
<a name="3200"></a>    /*
<a name="3201"></a>     *   the current action would increase obj's bulk so that container is
<a name="3202"></a>     *   too full
<a name="3203"></a>     */
<a name="3204"></a>    containerBecomingTooFullMsg(obj, cont)
<a name="3205"></a>    {
<a name="3206"></a>        gMessageParams(obj, cont);
<a name="3207"></a>        return '{You/he} {cannot} do that because {the obj/he}
<a name="3208"></a>            would no longer {|have} fit{|ted} in {the cont/him}. ';
<a name="3209"></a>    }
<a name="3210"></a>
<a name="3211"></a>    /* trying to put an object in a non-container */
<a name="3212"></a>    notAContainerMsg = '{You/he} {can\'t} put anything in {the iobj/him}. '
<a name="3213"></a>
<a name="3214"></a>    /* trying to put an object on a non-surface */
<a name="3215"></a>    notASurfaceMsg = 'There{&amp;rsquo;s| was} no good surface on
<a name="3216"></a>        {the iobj/him}. '
<a name="3217"></a>
<a name="3218"></a>    /* can't put anything under iobj */
<a name="3219"></a>    cannotPutUnderMsg =
<a name="3220"></a>        '{You/he} {can\'t} put anything under {that iobj/him}. '
<a name="3221"></a>
<a name="3222"></a>    /* nothing can be put behind the given object */
<a name="3223"></a>    cannotPutBehindMsg = '{You/he} {can\'t} put anything
<a name="3224"></a>        behind {the iobj/him}. '
<a name="3225"></a>
<a name="3226"></a>    /* trying to put something in itself */
<a name="3227"></a>    cannotPutInSelfMsg = '{You/he} {can\'t} put {the dobj/him} in {itself}. '
<a name="3228"></a>
<a name="3229"></a>    /* trying to put something on itself */
<a name="3230"></a>    cannotPutOnSelfMsg = '{You/he} {can\'t} put {the dobj/him} on {itself}. '
<a name="3231"></a>
<a name="3232"></a>    /* trying to put something under itself */
<a name="3233"></a>    cannotPutUnderSelfMsg = '{You/he} {can\'t} put {the dobj/him} under
<a name="3234"></a>        {itself}. '
<a name="3235"></a>
<a name="3236"></a>    /* trying to put something behind itself */
<a name="3237"></a>    cannotPutBehindSelfMsg = '{You/he} {can\'t} put {the dobj/him} behind
<a name="3238"></a>        {itself}. '
<a name="3239"></a>
<a name="3240"></a>    /* can't put something in/on/etc a restricted container/surface/etc */
<a name="3241"></a>    cannotPutInRestrictedMsg =
<a name="3242"></a>        '{You/he} {can\'t} put {that dobj/him} in {the iobj/him}. '
<a name="3243"></a>    cannotPutOnRestrictedMsg =
<a name="3244"></a>        '{You/he} {can\'t} put {that dobj/him} on {the iobj/him}. '
<a name="3245"></a>    cannotPutUnderRestrictedMsg =
<a name="3246"></a>        '{You/he} {can\'t} put {that dobj/him} under {the iobj/him}. '
<a name="3247"></a>    cannotPutBehindRestrictedMsg =
<a name="3248"></a>        '{You/he} {can\'t} put {that dobj/him} behind {the iobj/him}. '
<a name="3249"></a>
<a name="3250"></a>    /* trying to return something to a remove-only dispenser */
<a name="3251"></a>    cannotReturnToDispenserMsg =
<a name="3252"></a>        '{You/he} {can\'t} put {a dobj/him} back in {the iobj/him}. '
<a name="3253"></a>
<a name="3254"></a>    /* wrong item type for dispenser */
<a name="3255"></a>    cannotPutInDispenserMsg =
<a name="3256"></a>        '{You/he} {can\'t} put {a dobj/him} in {the iobj/him}. '
<a name="3257"></a>
<a name="3258"></a>    /* the dobj doesn't fit on this keyring */
<a name="3259"></a>    objNotForKeyringMsg = '{The dobj/he} {does}n&amp;rsquo;t fit
<a name="3260"></a>        on {the iobj/him}. '
<a name="3261"></a>
<a name="3262"></a>    /* the dobj isn't on the keyring */
<a name="3263"></a>    keyNotOnKeyringMsg = '{The dobj/he} {is} not attached to {the iobj/him}. '
<a name="3264"></a>
<a name="3265"></a>    /* can't detach key (with no iobj specified) because it's not on a ring */
<a name="3266"></a>    keyNotDetachableMsg = '{The dobj/he} {is}n&amp;rsquo;t attached to anything. '
<a name="3267"></a>
<a name="3268"></a>    /* we took a key and attached it to a keyring */
<a name="3269"></a>    takenAndMovedToKeyringMsg(keyring)
<a name="3270"></a>    {
<a name="3271"></a>        gMessageParams(keyring);
<a name="3272"></a>        return '{You/he} pick{s/ed} up {the dobj/him} and
<a name="3273"></a>            attach{es/ed actor} {it dobj/him} to {the keyring/him}. ';
<a name="3274"></a>    }
<a name="3275"></a>
<a name="3276"></a>    /* we attached a key to a keyring automatically */
<a name="3277"></a>    movedKeyToKeyringMsg(keyring)
<a name="3278"></a>    {
<a name="3279"></a>        gMessageParams(keyring);
<a name="3280"></a>        return '{You/he} attach{es/ed} {the dobj/him} to {the keyring/him}. ';
<a name="3281"></a>    }
<a name="3282"></a>
<a name="3283"></a>    /* we moved several keys to a keyring automatically */
<a name="3284"></a>    movedKeysToKeyringMsg(keyring, keys)
<a name="3285"></a>    {
<a name="3286"></a>        gMessageParams(keyring);
<a name="3287"></a>        return '{You/he} attach{es/ed} {your/his} loose key'
<a name="3288"></a>            + (keys.length() &gt; 1 ? 's' : '')
<a name="3289"></a>            + ' to {the keyring/him}. ';
<a name="3290"></a>    }
<a name="3291"></a>
<a name="3292"></a>    /* putting y in x when x is already in y */
<a name="3293"></a>    circularlyInMsg(x, y)
<a name="3294"></a>    {
<a name="3295"></a>        gMessageParams(x, y);
<a name="3296"></a>        return '{You/he} {can\'t} do that while {the x/he} {is}
<a name="3297"></a>            in {the y/him}. ';
<a name="3298"></a>    }
<a name="3299"></a>
<a name="3300"></a>    /* putting y in x when x is already on y */
<a name="3301"></a>    circularlyOnMsg(x, y)
<a name="3302"></a>    {
<a name="3303"></a>        gMessageParams(x, y);
<a name="3304"></a>        return '{You/he} {can\'t} do that while {the x/he} {is}
<a name="3305"></a>            on {the y/him}. ';
<a name="3306"></a>    }
<a name="3307"></a>
<a name="3308"></a>    /* putting y in x when x is already under y */
<a name="3309"></a>    circularlyUnderMsg(x, y)
<a name="3310"></a>    {
<a name="3311"></a>        gMessageParams(x, y);
<a name="3312"></a>        return '{You/he} {can\'t} do that while {the x/he} {is}
<a name="3313"></a>            under {the y/him}. ';
<a name="3314"></a>    }
<a name="3315"></a>
<a name="3316"></a>    /* putting y in x when x is already behind y */
<a name="3317"></a>    circularlyBehindMsg(x, y)
<a name="3318"></a>    {
<a name="3319"></a>        gMessageParams(x, y);
<a name="3320"></a>        return '{You/he} {can\'t} do that while {the x/he} {is}
<a name="3321"></a>            behind {the y/him}. ';
<a name="3322"></a>    }
<a name="3323"></a>
<a name="3324"></a>    /* taking dobj from iobj, but dobj isn't in iobj */
<a name="3325"></a>    takeFromNotInMsg = '{The dobj/he} {is}n&amp;rsquo;t in {that iobj/him}. '
<a name="3326"></a>
<a name="3327"></a>    /* taking dobj from surface, but dobj isn't on iobj */
<a name="3328"></a>    takeFromNotOnMsg = '{The dobj/he} {is}n&amp;rsquo;t on {that iobj/him}. '
<a name="3329"></a>
<a name="3330"></a>    /* taking dobj from under something, but dobj isn't under iobj */
<a name="3331"></a>    takeFromNotUnderMsg = '{The dobj/he} {is}n&amp;rsquo;t
<a name="3332"></a>        under {that iobj/him}. '
<a name="3333"></a>
<a name="3334"></a>    /* taking dobj from behind something, but dobj isn't behind iobj */
<a name="3335"></a>    takeFromNotBehindMsg = '{The dobj/he} {is}n&amp;rsquo;t
<a name="3336"></a>        behind {that iobj/him}. '
<a name="3337"></a>
<a name="3338"></a>    /* taking dobj from an actor, but actor doesn't have iobj */
<a name="3339"></a>    takeFromNotInActorMsg = '{The iobj/he} {does}n&amp;rsquo;t
<a name="3340"></a>        have {that dobj/him}. '
<a name="3341"></a>
<a name="3342"></a>    /* actor won't let go of a possession */
<a name="3343"></a>    willNotLetGoMsg(holder, obj)
<a name="3344"></a>    {
<a name="3345"></a>        gMessageParams(holder, obj);
<a name="3346"></a>        return '{The holder/he} {won\'t} let {you/him} have {that obj/him}. ';
<a name="3347"></a>    }
<a name="3348"></a>
<a name="3349"></a>    /* must say which way to go */
<a name="3350"></a>    whereToGoMsg = 'You&amp;rsquo;ll have to say which way to go. '
<a name="3351"></a>
<a name="3352"></a>    /* travel attempted in a direction with no exit */
<a name="3353"></a>    cannotGoThatWayMsg = '{You/he} {can\'t} go that way. '
<a name="3354"></a>
<a name="3355"></a>    /* travel attempted in the dark in a direction with no exit */
<a name="3356"></a>    cannotGoThatWayInDarkMsg = 'It{&amp;rsquo;s| was} too dark; {you/he}
<a name="3357"></a>        {can\'t} see where {you\'re} going. '
<a name="3358"></a>
<a name="3359"></a>    /* we don't know the way back for a GO BACK */
<a name="3360"></a>    cannotGoBackMsg = '{You/he} {does}n&amp;rsquo;t know how to return
<a name="3361"></a>        from {|t}here. '
<a name="3362"></a>
<a name="3363"></a>    /* cannot carry out a command from this location */
<a name="3364"></a>    cannotDoFromHereMsg = '{You/he} {can\'t} do that from {|t}here. '
<a name="3365"></a>
<a name="3366"></a>    /* can't travel through a close door */
<a name="3367"></a>    cannotGoThroughClosedDoorMsg(door)
<a name="3368"></a>    {
<a name="3369"></a>        gMessageParams(door);
<a name="3370"></a>        return '{You/he} {can\'t} do that, because {the door/he} {is} '
<a name="3371"></a>               + 'closed. ';
<a name="3372"></a>    }
<a name="3373"></a>
<a name="3374"></a>    /* cannot carry out travel while 'dest' is within 'cont' */
<a name="3375"></a>    invalidStagingContainerMsg(cont, dest)
<a name="3376"></a>    {
<a name="3377"></a>        gMessageParams(cont, dest);
<a name="3378"></a>        return '{You/he} {can\'t} do that while {the dest/he} {is}
<a name="3379"></a>                {in cont}. ';
<a name="3380"></a>    }
<a name="3381"></a>
<a name="3382"></a>    /* cannot carry out travel while 'cont' (an actor) is holding 'dest' */
<a name="3383"></a>    invalidStagingContainerActorMsg(cont, dest)
<a name="3384"></a>    {
<a name="3385"></a>        gMessageParams(cont, dest);
<a name="3386"></a>        return '{You/he} {can\'t} do that while {the cont/he} {is}
<a name="3387"></a>            holding {the dest/him}. ';
<a name="3388"></a>    }
<a name="3389"></a>
<a name="3390"></a>    /* can't carry out travel because 'dest' isn't a valid staging location */
<a name="3391"></a>    invalidStagingLocationMsg(dest)
<a name="3392"></a>    {
<a name="3393"></a>        gMessageParams(dest);
<a name="3394"></a>        return '{You/he} {can\'t} get {in dest}. ';
<a name="3395"></a>    }
<a name="3396"></a>
<a name="3397"></a>    /* destination is too high to enter from here */
<a name="3398"></a>    nestedRoomTooHighMsg(obj)
<a name="3399"></a>    {
<a name="3400"></a>        gMessageParams(obj);
<a name="3401"></a>        return '{The obj/he} {is} too high to reach from {|t}here. ';
<a name="3402"></a>    }
<a name="3403"></a>
<a name="3404"></a>    /* enclosing room is too high to reach by GETTING OUT OF here */
<a name="3405"></a>    nestedRoomTooHighToExitMsg(obj)
<a name="3406"></a>    {
<a name="3407"></a>        return 'It{&amp;rsquo;s| was} too long a drop to do that from {|t}here. ';
<a name="3408"></a>    }
<a name="3409"></a>
<a name="3410"></a>    /* cannot carry out a command from a nested room */
<a name="3411"></a>    cannotDoFromMsg(obj)
<a name="3412"></a>    {
<a name="3413"></a>        gMessageParams(obj);
<a name="3414"></a>        return '{You/he} {can\'t} do that from {the obj/him}. ';
<a name="3415"></a>    }
<a name="3416"></a>
<a name="3417"></a>    /* cannot carry out a command from within a vehicle in a nested room */
<a name="3418"></a>    vehicleCannotDoFromMsg(obj)
<a name="3419"></a>    {
<a name="3420"></a>        local loc = obj.location;
<a name="3421"></a>        gMessageParams(obj, loc);
<a name="3422"></a>        return '{You/he} {can\'t} do that while {the obj/he} {is} {in loc}. ';
<a name="3423"></a>    }
<a name="3424"></a>
<a name="3425"></a>    /* cannot go that way in a vehicle */
<a name="3426"></a>    cannotGoThatWayInVehicleMsg(traveler)
<a name="3427"></a>    {
<a name="3428"></a>        gMessageParams(traveler);
<a name="3429"></a>        return '{You/he} {can\'t} do that {in traveler}. ';
<a name="3430"></a>    }
<a name="3431"></a>
<a name="3432"></a>    /* cannot push an object that way */
<a name="3433"></a>    cannotPushObjectThatWayMsg(obj)
<a name="3434"></a>    {
<a name="3435"></a>        gMessageParams(obj);
<a name="3436"></a>        return '{You/he} {can\'t} go that way pushing {the obj/him}. ';
<a name="3437"></a>    }
<a name="3438"></a>
<a name="3439"></a>    /* cannot push an object to a nested room */
<a name="3440"></a>    cannotPushObjectNestedMsg(obj)
<a name="3441"></a>    {
<a name="3442"></a>        gMessageParams(obj);
<a name="3443"></a>        return '{You/he} {can\'t} push {the obj/him} there. ';
<a name="3444"></a>    }
<a name="3445"></a>
<a name="3446"></a>    /* cannot enter an exit-only passage */
<a name="3447"></a>    cannotEnterExitOnlyMsg(obj)
<a name="3448"></a>    {
<a name="3449"></a>        gMessageParams(obj);
<a name="3450"></a>        return '{You/he} {can\'t} enter {the obj/him} from {|t}here. ';
<a name="3451"></a>    }
<a name="3452"></a>
<a name="3453"></a>    /* must open door before going that way */
<a name="3454"></a>    mustOpenDoorMsg(obj)
<a name="3455"></a>    {
<a name="3456"></a>        gMessageParams(obj);
<a name="3457"></a>        return '{You/he} {must} open {the obj/him} first. ';
<a name="3458"></a>    }
<a name="3459"></a>
<a name="3460"></a>    /* door closes behind actor during travel through door */
<a name="3461"></a>    doorClosesBehindMsg(obj)
<a name="3462"></a>    {
<a name="3463"></a>        gMessageParams(obj);
<a name="3464"></a>        return '&lt;.p&gt;After {you/he} {goes} through {the obj/him}, {it/he}
<a name="3465"></a>                close{s/d} behind {it actor/him}. ';
<a name="3466"></a>    }
<a name="3467"></a>
<a name="3468"></a>    /* the stairway does not go up/down */
<a name="3469"></a>    stairwayNotUpMsg = '{The dobj/he} only {goes} down from {|t}here. '
<a name="3470"></a>    stairwayNotDownMsg = '{The dobj/he} only {goes} up from {|t}here. '
<a name="3471"></a>
<a name="3472"></a>    /* "wait" */
<a name="3473"></a>    timePassesMsg = 'Time pass{es|ed}... '
<a name="3474"></a>
<a name="3475"></a>    /* "hello" with no target actor */
<a name="3476"></a>    sayHelloMsg = (addressingNoOneMsg)
<a name="3477"></a>
<a name="3478"></a>    /* "goodbye" with no target actor */
<a name="3479"></a>    sayGoodbyeMsg = (addressingNoOneMsg)
<a name="3480"></a>
<a name="3481"></a>    /* "yes"/"no" with no target actor */
<a name="3482"></a>    sayYesMsg = (addressingNoOneMsg)
<a name="3483"></a>    sayNoMsg = (addressingNoOneMsg)
<a name="3484"></a>
<a name="3485"></a>    /* an internal common handler for sayHelloMsg, sayGoodbyeMsg, etc */
<a name="3486"></a>    addressingNoOneMsg
<a name="3487"></a>    {
<a name="3488"></a>        return '{You/he} {must} be more specific about '
<a name="3489"></a>            + gLibMessages.whomPronoun
<a name="3490"></a>            + ' {it actor/he} want{s/ed} to talk to. ';
<a name="3491"></a>    }
<a name="3492"></a>
<a name="3493"></a>    /* "yell" */
<a name="3494"></a>    okayYellMsg = '{You/he} scream{s/ed} as loud as {it actor/he} {can}. '
<a name="3495"></a>
<a name="3496"></a>    /* "jump" */
<a name="3497"></a>    okayJumpMsg = '{You/he} jump{s/ed} a little, and land{s/ed} back where
<a name="3498"></a>        {it actor/he} {|had} started. '
<a name="3499"></a>
<a name="3500"></a>    /* cannot jump over object */
<a name="3501"></a>    cannotJumpOverMsg = '{You/he} {can\'t} jump over {that dobj/him}. '
<a name="3502"></a>
<a name="3503"></a>    /* cannot jump off object */
<a name="3504"></a>    cannotJumpOffMsg = '{You/he} {can\'t} jump off {that dobj/him}. '
<a name="3505"></a>
<a name="3506"></a>    /* cannot jump off (with no direct object) from here */
<a name="3507"></a>    cannotJumpOffHereMsg = 'There{&amp;rsquo;s| was} nowhere to jump
<a name="3508"></a>        from {|t}here. '
<a name="3509"></a>
<a name="3510"></a>    /* failed to find a topic in a consultable object */
<a name="3511"></a>    cannotFindTopicMsg =
<a name="3512"></a>        '{You/he} {can\'t} seem to find that in {the dobj/him}. '
<a name="3513"></a>
<a name="3514"></a>    /* an actor doesn't accept a command from another actor */
<a name="3515"></a>    refuseCommand(targetActor, issuingActor)
<a name="3516"></a>    {
<a name="3517"></a>        gMessageParams(targetActor, issuingActor);
<a name="3518"></a>        return '{The targetActor/he} refuse{s/d} {your/his} request. ';
<a name="3519"></a>    }
<a name="3520"></a>
<a name="3521"></a>    /* cannot talk to an object (because it makes no sense to do so) */
<a name="3522"></a>    notAddressableMsg(obj)
<a name="3523"></a>    {
<a name="3524"></a>        gMessageParams(obj);
<a name="3525"></a>        return '{You/he} {cannot} talk to {that obj/him}. ';
<a name="3526"></a>    }
<a name="3527"></a>
<a name="3528"></a>    /* actor won't respond to a request or other communicative gesture */
<a name="3529"></a>    noResponseFromMsg(other)
<a name="3530"></a>    {
<a name="3531"></a>        gMessageParams(other);
<a name="3532"></a>        return '{The other/he} {does} not respond. ';
<a name="3533"></a>    }
<a name="3534"></a>
<a name="3535"></a>    /* trying to give something to someone who already has the object */
<a name="3536"></a>    giveAlreadyHasMsg = '{The iobj/he} already {has} {that/him dobj}. '
<a name="3537"></a>
<a name="3538"></a>    /* can't talk to yourself */
<a name="3539"></a>    cannotTalkToSelfMsg = 'Talking to {yourself/himself}
<a name="3540"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3541"></a>
<a name="3542"></a>    /* can't ask yourself about anything */
<a name="3543"></a>    cannotAskSelfMsg = 'Talking to {yourself/himself}
<a name="3544"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3545"></a>
<a name="3546"></a>    /* can't ask yourself for anything */
<a name="3547"></a>    cannotAskSelfForMsg = 'Talking to {yourself/himself}
<a name="3548"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3549"></a>
<a name="3550"></a>    /* can't tell yourself about anything */
<a name="3551"></a>    cannotTellSelfMsg = 'Talking to {yourself/himself}
<a name="3552"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3553"></a>
<a name="3554"></a>    /* can't give yourself something */
<a name="3555"></a>    cannotGiveToSelfMsg = 'Giving {the dobj/him} to {yourself/himself}
<a name="3556"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3557"></a>
<a name="3558"></a>    /* can't give something to itself */
<a name="3559"></a>    cannotGiveToItselfMsg = 'Giving {the dobj/him} to {itself}
<a name="3560"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3561"></a>
<a name="3562"></a>    /* can't show yourself something */
<a name="3563"></a>    cannotShowToSelfMsg = 'Showing {the dobj/him} to {yourself/himself}
<a name="3564"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3565"></a>
<a name="3566"></a>    /* can't show something to itself */
<a name="3567"></a>    cannotShowToItselfMsg = 'Showing {the dobj/him} to {itself}
<a name="3568"></a>        {won&amp;rsquo;t|wouldn&amp;rsquo;t} accomplish anything. '
<a name="3569"></a>
<a name="3570"></a>    /* can't give/show something to a non-actor */
<a name="3571"></a>    cannotGiveToMsg = '{You/he} {cannot} give anything to {an iobj/him}. '
<a name="3572"></a>    cannotShowToMsg = '{You/he} {cannot} show anything to {an iobj/him}. '
<a name="3573"></a>
<a name="3574"></a>    /* actor isn't interested in something being given/shown */
<a name="3575"></a>    notInterestedMsg(actor)
<a name="3576"></a>    {
<a name="3577"></a>        return '\^' + actor.nameDoes + ' not appear interested. ';
<a name="3578"></a>    }
<a name="3579"></a>
<a name="3580"></a>    /* vague ASK/TELL (for ASK/TELL &lt;actor&gt; &lt;topic&gt; syntax errors) */
<a name="3581"></a>    askVagueMsg = '&lt;.parser&gt;The story doesn&amp;rsquo;t understand that command.
<a name="3582"></a>        Please use ASK ACTOR ABOUT TOPIC (or just A TOPIC).&lt;./parser&gt; '
<a name="3583"></a>    tellVagueMsg = '&lt;.parser&gt;The story doesn&amp;rsquo;t understand that command.
<a name="3584"></a>        Please use TELL ACTOR ABOUT TOPIC (or just T TOPIC).&lt;./parser&gt; '
<a name="3585"></a>
<a name="3586"></a>    /* object cannot hear actor */
<a name="3587"></a>    objCannotHearActorMsg(obj)
<a name="3588"></a>    {
<a name="3589"></a>        return '\^' + obj.nameDoes
<a name="3590"></a>            + ' not appear to hear {you/him}. ';
<a name="3591"></a>    }
<a name="3592"></a>
<a name="3593"></a>    /* actor cannot see object being shown to actor */
<a name="3594"></a>    actorCannotSeeMsg(actor, obj)
<a name="3595"></a>    {
<a name="3596"></a>        return '\^' + actor.nameDoes + ' not appear to be able to see '
<a name="3597"></a>            + obj.theNameObj + '. ';
<a name="3598"></a>    }
<a name="3599"></a>
<a name="3600"></a>    /* not a followable object */
<a name="3601"></a>    notFollowableMsg = '{You/he} {cannot} follow {that dobj/him}. '
<a name="3602"></a>
<a name="3603"></a>    /* cannot follow yourself */
<a name="3604"></a>    cannotFollowSelfMsg = '{You/he} {cannot} follow {yourself}. '
<a name="3605"></a>
<a name="3606"></a>    /* following an object that's in the same location as the actor */
<a name="3607"></a>    followAlreadyHereMsg = '{The dobj/he} {is} right {|t}here. '
<a name="3608"></a>
<a name="3609"></a>    /*
<a name="3610"></a>     *   following an object that we *think* is in our same location (in
<a name="3611"></a>     *   other words, we're already in the location where we thought we
<a name="3612"></a>     *   last saw the object go), but it's too dark to see if that's
<a name="3613"></a>     *   really true
<a name="3614"></a>     */
<a name="3615"></a>    followAlreadyHereInDarkMsg = '{The dobj/he} should {be|have been} right
<a name="3616"></a>        {|t}here, but {you/he} {can\'t} see {it dobj/him}. '
<a name="3617"></a>
<a name="3618"></a>    /* trying to follow an object, but don't know where it went from here */
<a name="3619"></a>    followUnknownMsg = '{You\'re} not sure where {the dobj/he}
<a name="3620"></a>        {went|had gone} from {|t}here. '
<a name="3621"></a>
<a name="3622"></a>    /*
<a name="3623"></a>     *   we're trying to follow an actor, but we last saw the actor in the
<a name="3624"></a>     *   given other location, so we have to go there to follow
<a name="3625"></a>     */
<a name="3626"></a>    cannotFollowFromHereMsg(srcLoc)
<a name="3627"></a>    {
<a name="3628"></a>        return 'The last place {you/he} {saw|had seen} {the dobj/him} was '
<a name="3629"></a>            + srcLoc.getDestName(gActor, gActor.location) + '. ';
<a name="3630"></a>    }
<a name="3631"></a>
<a name="3632"></a>    /* acknowledge a 'follow' for a target that was in sight */
<a name="3633"></a>    okayFollowInSightMsg(loc)
<a name="3634"></a>    {
<a name="3635"></a>        return '{You/he} follow{s/ed} {the dobj/him} '
<a name="3636"></a>            + loc.actorIntoName + '. ';
<a name="3637"></a>    }
<a name="3638"></a>
<a name="3639"></a>    /* obj is not a weapon */
<a name="3640"></a>    notAWeaponMsg = '{You/he} {can\'t} attack anything with {the iobj/him}. '
<a name="3641"></a>
<a name="3642"></a>    /* no effect attacking obj */
<a name="3643"></a>    uselessToAttackMsg = '{You/he} {cannot} attack {that dobj/him}. '
<a name="3644"></a>
<a name="3645"></a>    /* pushing object has no effect */
<a name="3646"></a>    pushNoEffectMsg = 'Pushing {the dobj/him} {has|had} no effect. '
<a name="3647"></a>
<a name="3648"></a>    /* default 'push button' acknowledgment */
<a name="3649"></a>    okayPushButtonMsg = '&lt;q&gt;Click.&lt;/q&gt; '
<a name="3650"></a>
<a name="3651"></a>    /* lever is already in pushed state */
<a name="3652"></a>    alreadyPushedMsg =
<a name="3653"></a>        '{It\'s dobj} already pushed as far as {it dobj/he} {will} go. '
<a name="3654"></a>
<a name="3655"></a>    /* default acknowledgment to pushing a lever */
<a name="3656"></a>    okayPushLeverMsg = '{You/he} push{es/ed} {the dobj/him} to
<a name="3657"></a>                     {its/her dobj} stop. '
<a name="3658"></a>
<a name="3659"></a>    /* pulling object has no effect */
<a name="3660"></a>    pullNoEffectMsg = 'Pulling {the dobj/him} {has|had} no effect. '
<a name="3661"></a>
<a name="3662"></a>    /* lever is already in pulled state */
<a name="3663"></a>    alreadyPulledMsg =
<a name="3664"></a>        '{It\'s dobj} already pulled as far as {it dobj/he} {will} go. '
<a name="3665"></a>
<a name="3666"></a>    /* default acknowledgment to pulling a lever */
<a name="3667"></a>    okayPullLeverMsg = '{You/he} pull{s/ed} {the dobj/him} to
<a name="3668"></a>                     {its/her dobj} stop. '
<a name="3669"></a>
<a name="3670"></a>    /* default acknowledgment to pulling a spring-loaded lever */
<a name="3671"></a>    okayPullSpringLeverMsg = '{You/he} pull{s/ed} {the dobj/him}, which
<a name="3672"></a>        spr{ing[s]|ung} back to {its/her} starting position as soon as
<a name="3673"></a>        {you/he} let{[s]|} go of {it dobj/him}. '
<a name="3674"></a>
<a name="3675"></a>    /* moving object has no effect */
<a name="3676"></a>    moveNoEffectMsg = 'Moving {the dobj/him} {has|had} no effect. '
<a name="3677"></a>
<a name="3678"></a>    /* cannot move object to other object */
<a name="3679"></a>    moveToNoEffectMsg = 'This would {|have} accomplish{|ed} nothing. '
<a name="3680"></a>
<a name="3681"></a>    /* cannot push an object through travel */
<a name="3682"></a>    cannotPushTravelMsg = 'This would {|have} accomplish{|ed} nothing. '
<a name="3683"></a>
<a name="3684"></a>    /* acknowledge pushing an object through travel */
<a name="3685"></a>    okayPushTravelMsg(obj)
<a name="3686"></a>    {
<a name="3687"></a>        return '&lt;.p&gt;{You/he} push{es/ed} ' + obj.theNameObj
<a name="3688"></a>            + ' into the area. ';
<a name="3689"></a>    }
<a name="3690"></a>
<a name="3691"></a>    /* cannot use object as an implement to move something */
<a name="3692"></a>    cannotMoveWithMsg =
<a name="3693"></a>        '{You/he} {cannot} move anything with {the iobj/him}. '
<a name="3694"></a>
<a name="3695"></a>    /* cannot set object to setting */
<a name="3696"></a>    cannotSetToMsg = '{You/he} {cannot} set {that dobj/him} to anything. '
<a name="3697"></a>
<a name="3698"></a>    /* invalid setting for generic Settable */
<a name="3699"></a>    setToInvalidMsg = '{The dobj/he} {has} no such setting. '
<a name="3700"></a>
<a name="3701"></a>    /* default 'set to' acknowledgment */
<a name="3702"></a>    okaySetToMsg(val)
<a name="3703"></a>        { return 'Okay, {the dobj/he} {is} now set to ' + val + '. '; }
<a name="3704"></a>
<a name="3705"></a>    /* cannot turn object */
<a name="3706"></a>    cannotTurnMsg = '{You/he} {cannot} turn {that dobj/him}. '
<a name="3707"></a>
<a name="3708"></a>    /* must specify setting to turn object to */
<a name="3709"></a>    mustSpecifyTurnToMsg = '{You/he} {must} specify the setting to
<a name="3710"></a>                         turn {it dobj/him} to. '
<a name="3711"></a>
<a name="3712"></a>    /* cannot turn anything with object */
<a name="3713"></a>    cannotTurnWithMsg =
<a name="3714"></a>        '{You/he} {cannot} turn anything with {that iobj/him}. '
<a name="3715"></a>
<a name="3716"></a>    /* invalid setting for dial */
<a name="3717"></a>    turnToInvalidMsg = '{The dobj/he} {has} no such setting. '
<a name="3718"></a>
<a name="3719"></a>    /* default 'turn to' acknowledgment */
<a name="3720"></a>    okayTurnToMsg(val)
<a name="3721"></a>        { return 'Okay, {the dobj/he} {is} now set to ' + val + '. '; }
<a name="3722"></a>
<a name="3723"></a>    /* switch is already on/off */
<a name="3724"></a>    alreadySwitchedOnMsg = '{The dobj/he} {is} already on. '
<a name="3725"></a>    alreadySwitchedOffMsg = '{The dobj/he} {is} already off. '
<a name="3726"></a>
<a name="3727"></a>    /* default acknowledgment for switching on/off */
<a name="3728"></a>    okayTurnOnMsg = 'Okay, {the dobj/he} {is} now on. '
<a name="3729"></a>    okayTurnOffMsg = 'Okay, {the dobj/he} {is} now off. '
<a name="3730"></a>
<a name="3731"></a>    /* flashlight is on but doesn't light up */
<a name="3732"></a>    flashlightOnButDarkMsg = '{You/he} turn{s/ed} on {the dobj/him}, but
<a name="3733"></a>        nothing seem{s|ed} to happen. '
<a name="3734"></a>
<a name="3735"></a>    /* default acknowledgment for eating something */
<a name="3736"></a>    okayEatMsg = '{You/he} {eat[s]|ate} {the dobj/him}. '
<a name="3737"></a>
<a name="3738"></a>    /* object must be burning before doing that */
<a name="3739"></a>    mustBeBurningMsg(obj)
<a name="3740"></a>    {
<a name="3741"></a>        return '{You/he} {must} light ' + obj.theNameObj
<a name="3742"></a>            + ' before {it actor/he} {can} do that. ';
<a name="3743"></a>    }
<a name="3744"></a>
<a name="3745"></a>    /* match not lit */
<a name="3746"></a>    matchNotLitMsg = '{The dobj/he} {is}n&amp;rsquo;t lit. '
<a name="3747"></a>
<a name="3748"></a>    /* lighting a match */
<a name="3749"></a>    okayBurnMatchMsg =
<a name="3750"></a>        '{You/he} str{ike[s]|uck} {the dobj/him}, igniting a small flame. '
<a name="3751"></a>
<a name="3752"></a>    /* extinguishing a match */
<a name="3753"></a>    okayExtinguishMatchMsg = '{You/he} put{[s]|} out {the dobj/him}, which
<a name="3754"></a>        disappear{s/ed} into a cloud of ash. '
<a name="3755"></a>
<a name="3756"></a>    /* trying to light a candle with no fuel */
<a name="3757"></a>    candleOutOfFuelMsg =
<a name="3758"></a>        '{The dobj/he} {is} too burned down; {it/he} {cannot} be lit. '
<a name="3759"></a>
<a name="3760"></a>    /* lighting a candle */
<a name="3761"></a>    okayBurnCandleMsg = '{You/he} {light[s]|lit} {the dobj/him}. '
<a name="3762"></a>
<a name="3763"></a>    /* extinguishing a candle that isn't lit */
<a name="3764"></a>    candleNotLitMsg = '{The dobj/he} {is} not lit. '
<a name="3765"></a>
<a name="3766"></a>    /* extinguishing a candle */
<a name="3767"></a>    okayExtinguishCandleMsg = 'Done. '
<a name="3768"></a>
<a name="3769"></a>    /* cannot consult object */
<a name="3770"></a>    cannotConsultMsg =
<a name="3771"></a>        '{That dobj/he} {is} not something {you/he} {can} consult. '
<a name="3772"></a>
<a name="3773"></a>    /* cannot type anything on object */
<a name="3774"></a>    cannotTypeOnMsg = '{You/he} {cannot} type anything on {that dobj/him}. '
<a name="3775"></a>
<a name="3776"></a>    /* cannot enter anything on object */
<a name="3777"></a>    cannotEnterOnMsg = '{You/he} {cannot} enter anything on {that dobj/him}. '
<a name="3778"></a>
<a name="3779"></a>    /* cannot switch object */
<a name="3780"></a>    cannotSwitchMsg = '{You/he} {cannot} switch {that dobj/him}. '
<a name="3781"></a>
<a name="3782"></a>    /* cannot flip object */
<a name="3783"></a>    cannotFlipMsg = '{You/he} {cannot} flip {that dobj/him}. '
<a name="3784"></a>
<a name="3785"></a>    /* cannot turn object on/off */
<a name="3786"></a>    cannotTurnOnMsg =
<a name="3787"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} turn on. '
<a name="3788"></a>    cannotTurnOffMsg =
<a name="3789"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} turn off. '
<a name="3790"></a>
<a name="3791"></a>    /* cannot light */
<a name="3792"></a>    cannotLightMsg = '{You/he} {cannot} light {that dobj/him}. '
<a name="3793"></a>
<a name="3794"></a>    /* cannot burn */
<a name="3795"></a>    cannotBurnMsg = '{That dobj/he} {is} not something {you/he} {can} burn. '
<a name="3796"></a>    cannotBurnWithMsg =
<a name="3797"></a>        '{You/he} {cannot} burn anything with {that iobj/him}. '
<a name="3798"></a>
<a name="3799"></a>    /* cannot burn this specific direct object with this specific iobj */
<a name="3800"></a>    cannotBurnDobjWithMsg = '{You/he} {cannot} light {the dobj/him}
<a name="3801"></a>                          with {the iobj/him}. '
<a name="3802"></a>
<a name="3803"></a>    /* object is already burning */
<a name="3804"></a>    alreadyBurningMsg = '{The dobj/he} {is} already burning. '
<a name="3805"></a>
<a name="3806"></a>    /* cannot extinguish */
<a name="3807"></a>    cannotExtinguishMsg = '{You/he} {cannot} extinguish {that dobj/him}. '
<a name="3808"></a>
<a name="3809"></a>    /* cannot pour/pour in/pour on */
<a name="3810"></a>    cannotPourMsg = '{That dobj/he} {is} not something {you/he} {can} pour. '
<a name="3811"></a>    cannotPourIntoMsg =
<a name="3812"></a>        '{You/he} {cannot} pour anything into {that iobj/him}. '
<a name="3813"></a>    cannotPourOntoMsg =
<a name="3814"></a>        '{You/he} {cannot} pour anything onto {that iobj/him}. '
<a name="3815"></a>
<a name="3816"></a>    /* cannot attach object to object */
<a name="3817"></a>    cannotAttachMsg =
<a name="3818"></a>        '{You/he} {cannot} attach {that dobj/him} to anything. '
<a name="3819"></a>    cannotAttachToMsg =
<a name="3820"></a>        '{You/he} {cannot} attach anything to {that iobj/him}. '
<a name="3821"></a>
<a name="3822"></a>    /* cannot attach to self */
<a name="3823"></a>    cannotAttachToSelfMsg =
<a name="3824"></a>        '{You/he} {cannot} attach {the dobj/him} to {itself}. '
<a name="3825"></a>
<a name="3826"></a>    /* cannot attach because we're already attached to the given object */
<a name="3827"></a>    alreadyAttachedMsg =
<a name="3828"></a>        '{The dobj/he} {is} already attached to {the iobj/him}. '
<a name="3829"></a>
<a name="3830"></a>    /*
<a name="3831"></a>     *   dobj and/or iobj can be attached to certain things, but not to
<a name="3832"></a>     *   each other
<a name="3833"></a>     */
<a name="3834"></a>    wrongAttachmentMsg =
<a name="3835"></a>        '{You/he} {can\'t} attach {that dobj/him} to {the iobj/him}. '
<a name="3836"></a>
<a name="3837"></a>    /* dobj and iobj are attached, but they can't be taken apart */
<a name="3838"></a>    wrongDetachmentMsg =
<a name="3839"></a>        '{You/he} {can\'t} detach {that dobj/him} from {the iobj/him}. '
<a name="3840"></a>
<a name="3841"></a>    /* must detach the object before proceeding */
<a name="3842"></a>    mustDetachMsg(obj)
<a name="3843"></a>    {
<a name="3844"></a>        gMessageParams(obj);
<a name="3845"></a>        return '{You/he} {must} detach {the obj/him} before {it actor/he}
<a name="3846"></a>            {can} do that. ';
<a name="3847"></a>    }
<a name="3848"></a>
<a name="3849"></a>    /* default message for successful Attachable attachment */
<a name="3850"></a>    okayAttachToMsg = 'Done. '
<a name="3851"></a>
<a name="3852"></a>    /* default message for successful Attachable detachment */
<a name="3853"></a>    okayDetachFromMsg = 'Done. '
<a name="3854"></a>
<a name="3855"></a>    /* cannot detach object from object */
<a name="3856"></a>    cannotDetachMsg = '{You/he} {cannot} detach {that dobj/him}. '
<a name="3857"></a>    cannotDetachFromMsg =
<a name="3858"></a>        '{You/he} {cannot} detach anything from {that iobj/him}. '
<a name="3859"></a>
<a name="3860"></a>    /* no obvious way to detach a permanent attachment */
<a name="3861"></a>    cannotDetachPermanentMsg =
<a name="3862"></a>        'There{&amp;rsquo;s| was} no obvious way to detach {that dobj/him}. '
<a name="3863"></a>
<a name="3864"></a>    /* dobj isn't attached to iobj */
<a name="3865"></a>    notAttachedToMsg = '{The dobj/he} {is}n&amp;rsquo;t attached
<a name="3866"></a>        to {that iobj/him}. '
<a name="3867"></a>
<a name="3868"></a>    /* breaking object would serve no purpose */
<a name="3869"></a>    shouldNotBreakMsg =
<a name="3870"></a>        'Breaking {that dobj/him} would {|have} serve{|d} no purpose. '
<a name="3871"></a>
<a name="3872"></a>    /* cannot cut that */
<a name="3873"></a>    cutNoEffectMsg = '{The iobj/he} {can\'t} seem to cut {the dobj/him}. '
<a name="3874"></a>
<a name="3875"></a>    /* can't use iobj to cut anything */
<a name="3876"></a>    cannotCutWithMsg = '{You/he} {can\'t} cut anything with {the iobj/him}. '
<a name="3877"></a>
<a name="3878"></a>    /* cannot climb object */
<a name="3879"></a>    cannotClimbMsg =
<a name="3880"></a>        '{That dobj/he} {is} not something {you/he} {can} climb. '
<a name="3881"></a>
<a name="3882"></a>    /* object is not openable/closable */
<a name="3883"></a>    cannotOpenMsg = '{That dobj/he} {is} not something {you/he} {can} open. '
<a name="3884"></a>    cannotCloseMsg =
<a name="3885"></a>        '{That dobj/he} {is} not something {you/he} {can} close. '
<a name="3886"></a>
<a name="3887"></a>    /* already open/closed */
<a name="3888"></a>    alreadyOpenMsg = '{The dobj/he} {is} already open. '
<a name="3889"></a>    alreadyClosedMsg = '{The dobj/he} {is} already closed. '
<a name="3890"></a>
<a name="3891"></a>    /* already locked/unlocked */
<a name="3892"></a>    alreadyLockedMsg = '{The dobj/he} {is} already locked. '
<a name="3893"></a>    alreadyUnlockedMsg = '{The dobj/he} {is} already unlocked. '
<a name="3894"></a>
<a name="3895"></a>    /* cannot look in container because it's closed */
<a name="3896"></a>    cannotLookInClosedMsg = '{The dobj/he} {is} closed. '
<a name="3897"></a>
<a name="3898"></a>    /* object is not lockable/unlockable */
<a name="3899"></a>    cannotLockMsg =
<a name="3900"></a>        '{That dobj/he} {is} not something {you/he} {can} lock. '
<a name="3901"></a>    cannotUnlockMsg =
<a name="3902"></a>        '{That dobj/he} {is} not something {you/he} {can} unlock. '
<a name="3903"></a>
<a name="3904"></a>    /* attempting to open a locked object */
<a name="3905"></a>    cannotOpenLockedMsg = '{The dobj/he} seem{s/ed} to be locked. '
<a name="3906"></a>
<a name="3907"></a>    /* object requires a key to unlock */
<a name="3908"></a>    unlockRequiresKeyMsg =
<a name="3909"></a>        '{You/he} seem{s/ed} to need a key to unlock {the dobj/him}. '
<a name="3910"></a>
<a name="3911"></a>    /* object is not a key */
<a name="3912"></a>    cannotLockWithMsg =
<a name="3913"></a>        '{The iobj/he} {does}n&amp;rsquo;t look suitable for locking that. '
<a name="3914"></a>    cannotUnlockWithMsg =
<a name="3915"></a>        '{The iobj/he} {does}n&amp;rsquo;t look suitable for unlocking that. '
<a name="3916"></a>
<a name="3917"></a>    /* we don't know how to lock/unlock this */
<a name="3918"></a>    unknownHowToLockMsg =
<a name="3919"></a>        'It{&amp;rsquo;s| was} not clear how to lock {the dobj/him}. '
<a name="3920"></a>    unknownHowToUnlockMsg =
<a name="3921"></a>        'It{&amp;rsquo;s| was} not clear how to unlock {the dobj/him}. '
<a name="3922"></a>
<a name="3923"></a>    /* the key (iobj) does not fit the lock (dobj) */
<a name="3924"></a>    keyDoesNotFitLockMsg = '{The iobj/he} {does}n&amp;rsquo;t fit the lock. '
<a name="3925"></a>
<a name="3926"></a>    /* found key on keyring */
<a name="3927"></a>    foundKeyOnKeyringMsg(ring, key)
<a name="3928"></a>    {
<a name="3929"></a>        gMessageParams(ring, key);
<a name="3930"></a>        return '{You/he} tr{ies/ied} each key on {the ring/him}, and
<a name="3931"></a>            {find[s actor]|found} that {the key/he} fit{s/ted} the lock. ';
<a name="3932"></a>    }
<a name="3933"></a>
<a name="3934"></a>    /* failed to find a key on keyring */
<a name="3935"></a>    foundNoKeyOnKeyringMsg(ring)
<a name="3936"></a>    {
<a name="3937"></a>        gMessageParams(ring);
<a name="3938"></a>        return '{You/he} tr{ies/ied} each key on {the ring/him},
<a name="3939"></a>            but {you/he} {can\'t} find anything that fit{s|ted} the lock. ';
<a name="3940"></a>    }
<a name="3941"></a>
<a name="3942"></a>    /* not edible/drinkable */
<a name="3943"></a>    cannotEatMsg = '{The dobj/he} {does} not appear to be edible. '
<a name="3944"></a>    cannotDrinkMsg = '{That dobj/he} {does} not appear to be something
<a name="3945"></a>        {you/he} {can} drink. '
<a name="3946"></a>
<a name="3947"></a>    /* cannot clean object */
<a name="3948"></a>    cannotCleanMsg =
<a name="3949"></a>        '{You/he} wouldn&amp;rsquo;t {|have} know{|n} how to
<a name="3950"></a>        clean {that dobj/him}. '
<a name="3951"></a>    cannotCleanWithMsg =
<a name="3952"></a>        '{You/he} {can\'t} clean anything with {that iobj/him}. '
<a name="3953"></a>
<a name="3954"></a>    /* cannot attach key (dobj) to (iobj) */
<a name="3955"></a>    cannotAttachKeyToMsg =
<a name="3956"></a>        '{You/he} {cannot} attach {the dobj/him} to {that iobj/him}. '
<a name="3957"></a>
<a name="3958"></a>    /* actor cannot sleep */
<a name="3959"></a>    cannotSleepMsg = '{You/he} {does}n&amp;rsquo;t need to sleep right now. '
<a name="3960"></a>
<a name="3961"></a>    /* cannot sit/lie/stand/get on/get out of */
<a name="3962"></a>    cannotSitOnMsg =
<a name="3963"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} sit on. '
<a name="3964"></a>    cannotLieOnMsg =
<a name="3965"></a>        '{That dobj/he} {is}n&amp;rsquo;t something {you/he} {can} lie on. '
<a name="3966"></a>    cannotStandOnMsg = '{You/he} {can\'t} stand on {that dobj/him}. '
<a name="3967"></a>    cannotBoardMsg = '{You/he} {can\'t} board {that dobj/him}. '
<a name="3968"></a>    cannotUnboardMsg = '{You/he} {can\'t} get out of {that dobj/him}. '
<a name="3969"></a>    cannotGetOffOfMsg = '{You/he} {can\'t} get off of {that dobj/him}. '
<a name="3970"></a>
<a name="3971"></a>    /* standing on a PathPassage */
<a name="3972"></a>    cannotStandOnPathMsg = 'If {you/he} want{s/ed} to follow {the dobj/him},
<a name="3973"></a>        just say so. '
<a name="3974"></a>
<a name="3975"></a>    /* cannot sit/lie/stand on something being held */
<a name="3976"></a>    cannotEnterHeldMsg =
<a name="3977"></a>        '{You/he} {can\'t} do that while {you\'re} holding {the dobj/him}. '
<a name="3978"></a>
<a name="3979"></a>    /* cannot get out (of current location) */
<a name="3980"></a>    cannotGetOutMsg = '{You\'re} not in anything {you/he} {can} disembark. '
<a name="3981"></a>
<a name="3982"></a>    /* actor is already in a location */
<a name="3983"></a>    alreadyInLocMsg = '{You\'re} already {in dobj}. '
<a name="3984"></a>
<a name="3985"></a>    /* actor is already standing/sitting on/lying on */
<a name="3986"></a>    alreadyStandingMsg = '{You\'re} already standing. '
<a name="3987"></a>    alreadyStandingOnMsg = '{You\'re} already standing {on dobj}. '
<a name="3988"></a>    alreadySittingMsg = '{You\'re} already sitting down. '
<a name="3989"></a>    alreadySittingOnMsg = '{You\'re} already sitting {on dobj}. '
<a name="3990"></a>    alreadyLyingMsg = '{You\'re} already lying down. '
<a name="3991"></a>    alreadyLyingOnMsg = '{You\'re} already lying {on dobj}. '
<a name="3992"></a>
<a name="3993"></a>    /* getting off something you're not on */
<a name="3994"></a>    notOnPlatformMsg = '{You\'re} not {on dobj}. '
<a name="3995"></a>
<a name="3996"></a>    /* no room to stand/sit/lie on dobj */
<a name="3997"></a>    noRoomToStandMsg =
<a name="3998"></a>        'There{&amp;rsquo;s| was} no room for {you/him} to stand {on dobj}. '
<a name="3999"></a>    noRoomToSitMsg =
<a name="4000"></a>        'There{&amp;rsquo;s| was} no room for {you/him} to sit {on dobj}. '
<a name="4001"></a>    noRoomToLieMsg =
<a name="4002"></a>        'There{&amp;rsquo;s| was} no room for {you/him} to lie {on dobj}. '
<a name="4003"></a>
<a name="4004"></a>    /* default report for standing up/sitting down/lying down */
<a name="4005"></a>    okayPostureChangeMsg(posture)
<a name="4006"></a>        { return 'Okay, {you\'re} now ' + posture.participle + '. '; }
<a name="4007"></a>
<a name="4008"></a>    /* default report for standing/sitting/lying in/on something */
<a name="4009"></a>    roomOkayPostureChangeMsg(posture, obj)
<a name="4010"></a>    {
<a name="4011"></a>        gMessageParams(obj);
<a name="4012"></a>        return 'Okay, {you\'re} now ' + posture.participle + ' {on obj}. ';
<a name="4013"></a>    }
<a name="4014"></a>
<a name="4015"></a>    /* default report for getting off of a platform */
<a name="4016"></a>    okayNotStandingOnMsg = 'Okay, {you\'re} no longer {on dobj}. '
<a name="4017"></a>
<a name="4018"></a>    /* cannot fasten/unfasten */
<a name="4019"></a>    cannotFastenMsg = '{You/he} {cannot} fasten {the dobj/him}. '
<a name="4020"></a>    cannotFastenToMsg =
<a name="4021"></a>        '{You/he} {cannot} fasten anything to {the iobj/him}. '
<a name="4022"></a>    cannotUnfastenMsg = '{You/he} {cannot} unfasten {the dobj/him}. '
<a name="4023"></a>    cannotUnfastenFromMsg =
<a name="4024"></a>        '{You/he} {cannot} unfasten anything from {the iobj/him}. '
<a name="4025"></a>
<a name="4026"></a>    /* cannot plug/unplug */
<a name="4027"></a>    cannotPlugInMsg = '{You/he} {sees} no way to plug in {the dobj/him}. '
<a name="4028"></a>    cannotPlugInToMsg =
<a name="4029"></a>        '{You/he} {sees} no way to plug anything into {the iobj/him}. '
<a name="4030"></a>    cannotUnplugMsg = '{You/he} {sees} no way to unplug {the dobj/him}. '
<a name="4031"></a>    cannotUnplugFromMsg =
<a name="4032"></a>        '{You/he} {sees} no way to unplug anything from {the iobj/him}. '
<a name="4033"></a>
<a name="4034"></a>    /* cannot screw/unscrew */
<a name="4035"></a>    cannotScrewMsg = '{You/he} {sees} no way to screw {the dobj/him}. '
<a name="4036"></a>    cannotScrewWithMsg =
<a name="4037"></a>        '{You/he} {cannot} screw anything with {the iobj/him}. '
<a name="4038"></a>    cannotUnscrewMsg = '{You/he} {sees} no way to unscrew {the dobj/him}. '
<a name="4039"></a>    cannotUnscrewWithMsg =
<a name="4040"></a>        '{You/he} {cannot} unscrew anything with {the iobj/him}. '
<a name="4041"></a>
<a name="4042"></a>    /* cannot enter/go through */
<a name="4043"></a>    cannotEnterMsg =
<a name="4044"></a>        '{That/he dobj} {is} not something {you/he} {can} enter. '
<a name="4045"></a>    cannotGoThroughMsg =
<a name="4046"></a>        '{That/he dobj} {is} not something {you/he} {can} go through. '
<a name="4047"></a>
<a name="4048"></a>    /* can't throw something at itself */
<a name="4049"></a>    cannotThrowAtSelfMsg =
<a name="4050"></a>        '{You/he} {can\'t} throw {that dobj/him} at {itself}. '
<a name="4051"></a>
<a name="4052"></a>    /* can't throw something at an object inside itself */
<a name="4053"></a>    cannotThrowAtContentsMsg = '{You/he} {must} remove {the iobj/him}
<a name="4054"></a>        from {the dobj/him} before {it actor/he} {can} do that. '
<a name="4055"></a>
<a name="4056"></a>    /* can't throw through a sense connector */
<a name="4057"></a>    cannotThrowThroughMsg(target, loc)
<a name="4058"></a>    {
<a name="4059"></a>        gMessageParams(target, loc);
<a name="4060"></a>        return '{You/he} {cannot} throw anything through {the loc/him}. ';
<a name="4061"></a>    }
<a name="4062"></a>
<a name="4063"></a>    /* shouldn't throw something at the floor */
<a name="4064"></a>    shouldNotThrowAtFloorMsg =
<a name="4065"></a>        '{You/he} should just {|have} put {it dobj/him} down instead. '
<a name="4066"></a>
<a name="4067"></a>    /* THROW &lt;obj&gt; &lt;direction&gt; isn't supported; use THROW AT instead */
<a name="4068"></a>    dontThrowDirMsg =
<a name="4069"></a>        ('&lt;.parser&gt;You need to be more specific about
<a name="4070"></a>            what ' + (gActor.referralPerson == ThirdPerson
<a name="4071"></a>                      ? 'you want {the actor/him}' : '')
<a name="4072"></a>         + ' to throw {the dobj/him} at.&lt;./parser&gt; ')
<a name="4073"></a>
<a name="4074"></a>    /* thrown object bounces off target (short report) */
<a name="4075"></a>    throwHitMsg(projectile, target)
<a name="4076"></a>    {
<a name="4077"></a>        gMessageParams(projectile, target);
<a name="4078"></a>        return '{The projectile/he} hit{[s]|} {the target/him} without any
<a name="4079"></a>            obvious effect. ';
<a name="4080"></a>    }
<a name="4081"></a>
<a name="4082"></a>    /* thrown object lands on target */
<a name="4083"></a>    throwFallMsg(projectile, target)
<a name="4084"></a>    {
<a name="4085"></a>        gMessageParams(projectile, target);
<a name="4086"></a>        return '{The projectile/he} land{s/ed} on {the target/him}. ';
<a name="4087"></a>    }
<a name="4088"></a>
<a name="4089"></a>    /* thrown object bounces off target and falls to destination */
<a name="4090"></a>    throwHitFallMsg(projectile, target, dest)
<a name="4091"></a>    {
<a name="4092"></a>        gMessageParams(projectile, target);
<a name="4093"></a>        return '{The projectile/he} hit{[s]|} {the target/him}
<a name="4094"></a>            without any obvious effect, and {fall[s projectile]|fell} '
<a name="4095"></a>            + dest.putInName + '. ';
<a name="4096"></a>    }
<a name="4097"></a>
<a name="4098"></a>    /* thrown object falls short of distant target (sentence prefix only) */
<a name="4099"></a>    throwShortMsg(projectile, target)
<a name="4100"></a>    {
<a name="4101"></a>        gMessageParams(projectile, target);
<a name="4102"></a>        return '{The projectile/he} {fall[s]|fell} well short of '
<a name="4103"></a>               + '{the target/him}. ';
<a name="4104"></a>    }
<a name="4105"></a>
<a name="4106"></a>    /* thrown object falls short of distant target */
<a name="4107"></a>    throwFallShortMsg(projectile, target, dest)
<a name="4108"></a>    {
<a name="4109"></a>        gMessageParams(projectile, target);
<a name="4110"></a>        return '{The projectile/he} {fall[s]|fell} ' + dest.putInName
<a name="4111"></a>            + ' well short of {the target/him}. ';
<a name="4112"></a>    }
<a name="4113"></a>
<a name="4114"></a>    /* target catches object */
<a name="4115"></a>    throwCatchMsg(obj, target)
<a name="4116"></a>    {
<a name="4117"></a>        return '\^' + target.theName + ' '
<a name="4118"></a>            + tSel('catch' + target.verbEndingEs, 'caught')
<a name="4119"></a>            + ' ' + obj.theNameObj + '. ';
<a name="4120"></a>    }
<a name="4121"></a>
<a name="4122"></a>    /* we're not a suitable target for THROW TO (because we're not an NPC) */
<a name="4123"></a>    cannotThrowToMsg = '{You/he} {cannot} throw anything to {an iobj/him}. '
<a name="4124"></a>
<a name="4125"></a>    /* target does not want to catch anything */
<a name="4126"></a>    willNotCatchMsg(catcher)
<a name="4127"></a>    {
<a name="4128"></a>        return '\^' + catcher.nameDoes
<a name="4129"></a>            + 'n&amp;rsquo;t look like ' + catcher.itNom + ' want'
<a name="4130"></a>            + catcher.verbEndingSEd + ' to catch anything. ';
<a name="4131"></a>    }
<a name="4132"></a>
<a name="4133"></a>    /* cannot kiss something */
<a name="4134"></a>    cannotKissMsg = 'Kissing {the dobj/him} {has|had} no obvious effect. '
<a name="4135"></a>
<a name="4136"></a>    /* person uninterested in being kissed */
<a name="4137"></a>    cannotKissActorMsg
<a name="4138"></a>        = '{The dobj/he} probably wouldn&amp;rsquo;t {|have} like{|d} that. '
<a name="4139"></a>
<a name="4140"></a>    /* cannot kiss yourself */
<a name="4141"></a>    cannotKissSelfMsg = '{You/he} {cannot} kiss {yourself}. '
<a name="4142"></a>
<a name="4143"></a>    /* it is now dark at actor's location */
<a name="4144"></a>    newlyDarkMsg = 'It {is|was} now pitch black. '
<a name="4145"></a>;
<a name="4146"></a>
<a name="4147"></a>/*
<a name="4148"></a> *   Non-player character verb messages.  By default, we inherit all of
<a name="4149"></a> *   the messages defined for the player character, but we override some
<a name="4150"></a> *   that must be rephrased slightly to make sense for NPC's.
<a name="4151"></a> */
<a name="4152"></a>npcActionMessages: playerActionMessages
<a name="4153"></a>    /* "wait" */
<a name="4154"></a>    timePassesMsg = '{You/he} wait{s/ed}... '
<a name="4155"></a>
<a name="4156"></a>    /* trying to move a Fixture/Immovable */
<a name="4157"></a>    cannotMoveFixtureMsg = '{You/he} {cannot} move {that dobj/him}. '
<a name="4158"></a>    cannotMoveImmovableMsg = '{You/he} {cannot} move {that dobj/him}. '
<a name="4159"></a>
<a name="4160"></a>    /* trying to take/move/put a Heavy object */
<a name="4161"></a>    cannotTakeHeavyMsg =
<a name="4162"></a>        '{That dobj/he} {is} too heavy for {you/him} to take. '
<a name="4163"></a>    cannotMoveHeavyMsg =
<a name="4164"></a>        '{That dobj/he} {is} too heavy for {you/him} to move. '
<a name="4165"></a>    cannotPutHeavyMsg =
<a name="4166"></a>        '{That dobj/he} {is} too heavy for {you/him} to move. '
<a name="4167"></a>
<a name="4168"></a>    /* trying to move a component object */
<a name="4169"></a>    cannotMoveComponentMsg(loc)
<a name="4170"></a>    {
<a name="4171"></a>        return '{You/he} {cannot} do that because {the dobj/he} {is} part
<a name="4172"></a>            of ' + loc.theNameObj + '. ';
<a name="4173"></a>    }
<a name="4174"></a>
<a name="4175"></a>    /* default successful 'take' response */
<a name="4176"></a>    okayTakeMsg = '{You/he} {take[s]|took} {the dobj/him}. '
<a name="4177"></a>
<a name="4178"></a>    /* default successful 'drop' response */
<a name="4179"></a>    okayDropMsg = '{You/he} put{[s]|} down {the dobj/him}. '
<a name="4180"></a>
<a name="4181"></a>    /* default successful 'put in' response */
<a name="4182"></a>    okayPutInMsg = '{You/he} put{[s]|} {the dobj/him} in {the iobj/him}. '
<a name="4183"></a>
<a name="4184"></a>    /* default successful 'put on' response */
<a name="4185"></a>    okayPutOnMsg = '{You/he} put{[s]|} {the dobj/him} on {the iobj/him}. '
<a name="4186"></a>
<a name="4187"></a>    /* default successful 'put under' response */
<a name="4188"></a>    okayPutUnderMsg =
<a name="4189"></a>        '{You/he} put{[s]|} {the dobj/him} under {the iobj/him}. '
<a name="4190"></a>
<a name="4191"></a>    /* default successful 'put behind' response */
<a name="4192"></a>    okayPutBehindMsg =
<a name="4193"></a>        '{You/he} put{[s]|} {the dobj/him} behind {the iobj/him}. '
<a name="4194"></a>
<a name="4195"></a>    /* default succesful response to 'wear obj' */
<a name="4196"></a>    okayWearMsg =
<a name="4197"></a>        '{You/he} put{[s]|} on {the dobj/him}. '
<a name="4198"></a>
<a name="4199"></a>    /* default successful response to 'doff obj' */
<a name="4200"></a>    okayDoffMsg = '{You/he} {take[s]|took} off {the dobj/him}. '
<a name="4201"></a>
<a name="4202"></a>    /* default successful responses to open/close */
<a name="4203"></a>    okayOpenMsg = '{You/he} open{s/ed} {the dobj/him}. '
<a name="4204"></a>    okayCloseMsg = '{You/he} close{s/d} {the dobj/him}. '
<a name="4205"></a>
<a name="4206"></a>    /* default successful responses to lock/unlock */
<a name="4207"></a>    okayLockMsg = '{You/he} lock{s/ed} {the dobj/him}. '
<a name="4208"></a>    okayUnlockMsg = '{You/he} unlock{s/ed} {the dobj/him}. '
<a name="4209"></a>
<a name="4210"></a>    /* push/pull/move with no effect */
<a name="4211"></a>    pushNoEffectMsg = '{You/he} tr{ies/ied} to push {the dobj/him}, with no '
<a name="4212"></a>                      + 'obvious effect. '
<a name="4213"></a>    pullNoEffectMsg = '{You/he} tr{ies/ied} to pull {the dobj/him}, with no '
<a name="4214"></a>                      + 'obvious effect. '
<a name="4215"></a>    moveNoEffectMsg = '{You/he} tr{ies/ied} to move {the dobj/him}, with no '
<a name="4216"></a>                      + 'obvious effect. '
<a name="4217"></a>    moveToNoEffectMsg = '{You/he} {leaves} {the dobj/he} where {it/he} {is}. '
<a name="4218"></a>
<a name="4219"></a>    whereToGoMsg =
<a name="4220"></a>        'You&amp;rsquo;ll have to say which way {you/he} should {|have} go{|ne}. '
<a name="4221"></a>
<a name="4222"></a>    /* object is too large for container */
<a name="4223"></a>    tooLargeForContainerMsg(obj, cont)
<a name="4224"></a>    {
<a name="4225"></a>        gMessageParams(obj, cont);
<a name="4226"></a>        return '{You/he} {cannot} do that because {the obj/he} {is}
<a name="4227"></a>            too large for {the cont/him}. ';
<a name="4228"></a>    }
<a name="4229"></a>
<a name="4230"></a>    /* object is too large for underside */
<a name="4231"></a>    tooLargeForUndersideMsg(obj, cont)
<a name="4232"></a>    {
<a name="4233"></a>        gMessageParams(obj, cont);
<a name="4234"></a>        return '{You/he} {cannot} do that because {the obj/he}
<a name="4235"></a>            {won\'t} fit under {the cont/him}. ';
<a name="4236"></a>    }
<a name="4237"></a>
<a name="4238"></a>    /* object is too large to fit behind something */
<a name="4239"></a>    tooLargeForRearMsg(obj, cont)
<a name="4240"></a>    {
<a name="4241"></a>        gMessageParams(obj, cont);
<a name="4242"></a>        return '{You/he} {cannot} do that because {the obj/he}
<a name="4243"></a>            {won\'t} fit behind {the cont/him}. ';
<a name="4244"></a>    }
<a name="4245"></a>
<a name="4246"></a>    /* container doesn't have room for object */
<a name="4247"></a>    containerTooFullMsg(obj, cont)
<a name="4248"></a>    {
<a name="4249"></a>        gMessageParams(obj, cont);
<a name="4250"></a>        return '{You/he} {cannot} do that because {the cont/he} {is}
<a name="4251"></a>            already too full to hold {the obj/him}. ';
<a name="4252"></a>    }
<a name="4253"></a>
<a name="4254"></a>    /* surface doesn't have room for object */
<a name="4255"></a>    surfaceTooFullMsg(obj, cont)
<a name="4256"></a>    {
<a name="4257"></a>        gMessageParams(obj, cont);
<a name="4258"></a>        return '{You/he} {cannot} do that because there{\'s| was}
<a name="4259"></a>            no room for {the obj/him} on {the cont/him}. ';
<a name="4260"></a>    }
<a name="4261"></a>
<a name="4262"></a>    /* the dobj doesn't fit on this keyring */
<a name="4263"></a>    objNotForKeyringMsg = '{You/he} {cannot} do that because {that dobj/he}
<a name="4264"></a>        {does}n&amp;rsquo;t fit on {the iobj/him}. '
<a name="4265"></a>
<a name="4266"></a>    /* taking dobj from iobj, but dobj isn't in iobj */
<a name="4267"></a>    takeFromNotInMsg = '{You/he} {cannot} do that because
<a name="4268"></a>        {the dobj/he} {is}n&amp;rsquo;t in {that iobj/him}. '
<a name="4269"></a>
<a name="4270"></a>    /* taking dobj from surface, but dobj isn't on iobj */
<a name="4271"></a>    takeFromNotOnMsg = '{You/he} {cannot} do that because
<a name="4272"></a>        {the dobj/he} {is}n&amp;rsquo;t on {that iobj/him}. '
<a name="4273"></a>
<a name="4274"></a>    /* taking dobj under something, but dobj isn't under iobj */
<a name="4275"></a>    takeFromNotUnderMsg = '{You/he} {cannot} do that because
<a name="4276"></a>        {the dobj/he} {is}n&amp;rsquo;t under {that iobj/him}. '
<a name="4277"></a>
<a name="4278"></a>    /* taking dobj from behind something, but dobj isn't behind iobj */
<a name="4279"></a>    takeFromNotBehindMsg = '{You/he} {cannot} do that because
<a name="4280"></a>        {the dobj/he} {is}n&amp;rsquo;t behind {that iobj/him}. '
<a name="4281"></a>
<a name="4282"></a>    /* cannot jump off (with no direct object) from here */
<a name="4283"></a>    cannotJumpOffHereMsg = 'There{&amp;rsquo;s| was} nowhere for
<a name="4284"></a>        {you/him} to jump. '
<a name="4285"></a>
<a name="4286"></a>    /* should not break object */
<a name="4287"></a>    shouldNotBreakMsg = '{You/he} {does}n&amp;rsquo;t want to
<a name="4288"></a>        break {that dobj/him}. '
<a name="4289"></a>
<a name="4290"></a>    /* report for standing up/sitting down/lying down */
<a name="4291"></a>    okayPostureChangeMsg(posture)
<a name="4292"></a>        { return '{You/he} ' + posture.msgVerbI + '. '; }
<a name="4293"></a>
<a name="4294"></a>    /* report for standing/sitting/lying in/on something */
<a name="4295"></a>    roomOkayPostureChangeMsg(posture, obj)
<a name="4296"></a>    {
<a name="4297"></a>        gMessageParams(obj);
<a name="4298"></a>        return '{You/he} ' + posture.msgVerbT + ' {on obj}. ';
<a name="4299"></a>    }
<a name="4300"></a>
<a name="4301"></a>    /* report for getting off a platform */
<a name="4302"></a>    okayNotStandingOnMsg = '{You/he} {get[s]|got} {offof dobj}. '
<a name="4303"></a>
<a name="4304"></a>    /* default 'turn to' acknowledgment */
<a name="4305"></a>    okayTurnToMsg(val)
<a name="4306"></a>        { return '{You/he} turn{s/ed} {the dobj/him} to ' + val + '. '; }
<a name="4307"></a>
<a name="4308"></a>    /* default 'push button' acknowledgment */
<a name="4309"></a>    okayPushButtonMsg = '{You/he} push{es/ed} {the dobj/him}. '
<a name="4310"></a>
<a name="4311"></a>    /* default acknowledgment for switching on/off */
<a name="4312"></a>    okayTurnOnMsg = '{You/he} turn{s/ed} {the dobj/him} on. '
<a name="4313"></a>    okayTurnOffMsg = '{You/he} turn{s/ed} {the dobj/him} off. '
<a name="4314"></a>
<a name="4315"></a>    /* the key (iobj) does not fit the lock (dobj) */
<a name="4316"></a>    keyDoesNotFitLockMsg = '{You/he} tr{ies/ied} {the iobj/he}, but
<a name="4317"></a>                         {it iobj/he} {does}n&amp;rsquo;t fit the lock. '
<a name="4318"></a>
<a name="4319"></a>    /* acknowledge entering "follow" mode */
<a name="4320"></a>    okayFollowModeMsg = '&lt;q&gt;Okay, I will follow {the dobj/him}.&lt;/q&gt; '
<a name="4321"></a>
<a name="4322"></a>    /* note that we're already in "follow" mode */
<a name="4323"></a>    alreadyFollowModeMsg = '&lt;q&gt;I\'m already following {the dobj/him}.&lt;/q&gt; '
<a name="4324"></a>
<a name="4325"></a>    /* extinguishing a candle */
<a name="4326"></a>    okayExtinguishCandleMsg = '{You/he} extinguish{es/ed} {the dobj/him}. '
<a name="4327"></a>
<a name="4328"></a>    /* acknowledge attachment */
<a name="4329"></a>    okayAttachToMsg =
<a name="4330"></a>        '{You/he} attach{es/ed} {the dobj/him} to {the iobj/him}. '
<a name="4331"></a>
<a name="4332"></a>    /* acknowledge detachment */
<a name="4333"></a>    okayDetachFromMsg =
<a name="4334"></a>        '{You/he} detach{es/ed} {the dobj/him} from {the iobj/him}. '
<a name="4335"></a>
<a name="4336"></a>    /*
<a name="4337"></a>     *   the PC's responses to conversational actions applied to oneself
<a name="4338"></a>     *   need some reworking for NPC's
<a name="4339"></a>     */
<a name="4340"></a>    cannotTalkToSelfMsg = '{You/he} {won\'t} accomplish anything talking
<a name="4341"></a>        to {yourself/himself}. '
<a name="4342"></a>    cannotAskSelfMsg = '{You/he} {won\'t} accomplish anything talking
<a name="4343"></a>        to {yourself/himself}. '
<a name="4344"></a>    cannotAskSelfForMsg = '{You/he} {won\'t} accomplish anything talking
<a name="4345"></a>        to {yourself/himself}. '
<a name="4346"></a>    cannotTellSelfMsg = '{You/he} {won\'t} accomplish anything talking
<a name="4347"></a>        to {yourself/himself}. '
<a name="4348"></a>    cannotGiveToSelfMsg = '{You/he} {won\'t} accomplish anything
<a name="4349"></a>        giving {the dobj/him} to {yourself/himself}. '
<a name="4350"></a>    cannotShowToSelfMsg = '{You/he} {won\'t} accomplish anything
<a name="4351"></a>        showing {the dobj/him} to {yourself/himself}. '
<a name="4352"></a>;
<a name="4353"></a>
<a name="4354"></a>/* ------------------------------------------------------------------------ */
<a name="4355"></a>/*
<a name="4356"></a> *   Standard tips
<a name="4357"></a> */
<a name="4358"></a>
<a name="4359"></a>scoreChangeTip: Tip
<a name="4360"></a>    "If you&amp;rsquo;d prefer not to be notified about score changes in the
<a name="4361"></a>    future, type &lt;&lt;aHref('notify off', 'NOTIFY OFF', 'Turn off score
<a name="4362"></a>    notifications')&gt;&gt;."
<a name="4363"></a>;
<a name="4364"></a>
<a name="4365"></a>footnotesTip: Tip
<a name="4366"></a>    "A number in [square brackets] like the one above refers to a footnote,
<a name="4367"></a>    which you can read by typing FOOTNOTE followed by the number:
<a name="4368"></a>    &lt;&lt;aHref('footnote 1', 'FOOTNOTE 1', 'Show footnote [1]')&gt;&gt;, for example.
<a name="4369"></a>    Footnotes usually contain added background information that might be
<a name="4370"></a>    interesting but isn&amp;rsquo;t essential to the story. If you&amp;rsquo;d
<a name="4371"></a>    prefer not to see footnotes at all, you can control their appearance by
<a name="4372"></a>    typing &lt;&lt;aHref('footnotes', 'FOOTNOTES', 'Control footnote
<a name="4373"></a>    appearance')&gt;&gt;."
<a name="4374"></a>;
<a name="4375"></a>
<a name="4376"></a>oopsTip: Tip
<a name="4377"></a>    "If this was an accidental misspelling, you can correct it by typing
<a name="4378"></a>    OOPS followed by the corrected word now. Any time the story points out an
<a name="4379"></a>    unknown word, you can correct a misspelling using OOPS as your next
<a name="4380"></a>    command."
<a name="4381"></a>;
<a name="4382"></a>
<a name="4383"></a>fullScoreTip: Tip
<a name="4384"></a>    "To see a detailed accounting of your score, type
<a name="4385"></a>    &lt;&lt;aHref('full score', 'FULL SCORE')&gt;&gt;."
<a name="4386"></a>;
<a name="4387"></a>
<a name="4388"></a>exitsTip: Tip
<a name="4389"></a>    "You can control the exit listings with the EXITS command.
<a name="4390"></a>    &lt;&lt;aHref('exits status', 'EXITS STATUS',
<a name="4391"></a>            'Turn on status line exit listings')&gt;&gt;
<a name="4392"></a>    shows the exit list in the status line,
<a name="4393"></a>    &lt;&lt;aHref('exits look', 'EXITS LOOK', 'List exits in room descriptions')&gt;&gt;
<a name="4394"></a>    shows a full exit list in each room description,
<a name="4395"></a>    &lt;&lt;aHref('exits on', 'EXITS ON', 'Turn on all exit lists')&gt;&gt;
<a name="4396"></a>    shows both, and
<a name="4397"></a>    &lt;&lt;aHref('exits off', 'EXITS OFF', 'Turn off all exit lists')&gt;&gt;
<a name="4398"></a>    turns off both kinds of exit lists."
<a name="4399"></a>;
<a name="4400"></a>
<a name="4401"></a>undoTip: Tip
<a name="4402"></a>    "If this didn't turn out quite the way you expected, note that you
<a name="4403"></a>    can always take back a turn by typing &lt;&lt;aHref('undo', 'UNDO',
<a name="4404"></a>        'Take back the most recent command')&gt;&gt;.  You can even use
<a name="4405"></a>    UNDO repeatedly to take back several turns in a row. "
<a name="4406"></a>;
<a name="4407"></a>
<a name="4408"></a>
<a name="4409"></a>/* ------------------------------------------------------------------------ */
<a name="4410"></a>/*
<a name="4411"></a> *   Listers
<a name="4412"></a> */
<a name="4413"></a>
<a name="4414"></a>/*
<a name="4415"></a> *   The basic "room lister" object - this is the object that we use by
<a name="4416"></a> *   default with showList() to construct the listing of the portable
<a name="4417"></a> *   items in a room when displaying the room's description.
<a name="4418"></a> */
<a name="4419"></a>roomLister: Lister
<a name="4420"></a>    /* show the prefix/suffix in wide mode */
<a name="4421"></a>    showListPrefixWide(itemCount, pov, parent) { "{You/he} {sees} "; }
<a name="4422"></a>    showListSuffixWide(itemCount, pov, parent) { " {|t}here. "; }
<a name="4423"></a>
<a name="4424"></a>    /* show the tall prefix */
<a name="4425"></a>    showListPrefixTall(itemCount, pov, parent) { "{You/he} {sees}:"; }
<a name="4426"></a>;
<a name="4427"></a>
<a name="4428"></a>/*
<a name="4429"></a> *   The basic room lister for dark rooms
<a name="4430"></a> */
<a name="4431"></a>darkRoomLister: Lister
<a name="4432"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4433"></a>        { "In the darkness {you/he} {can} see "; }
<a name="4434"></a>
<a name="4435"></a>    showListSuffixWide(itemCount, pov, parent) { ". "; }
<a name="4436"></a>
<a name="4437"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4438"></a>        { "In the darkness {you/he} {sees}:"; }
<a name="4439"></a>;
<a name="4440"></a>
<a name="4441"></a>/*
<a name="4442"></a> *   A "remote room lister".  This is used to describe the contents of an
<a name="4443"></a> *   adjoining room.  For example, if an actor is standing in one room,
<a name="4444"></a> *   and can see into a second top-level room through a window, we'll use
<a name="4445"></a> *   this lister to describe the objects the actor can see through the
<a name="4446"></a> *   window.
<a name="4447"></a> */
<a name="4448"></a>class RemoteRoomLister: Lister
<a name="4449"></a>    construct(room) { remoteRoom = room; }
<a name="4450"></a>
<a name="4451"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4452"></a>        { "\^&lt;&lt;remoteRoom.inRoomName(pov)&gt;&gt;, {you/he} {sees} "; }
<a name="4453"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="4454"></a>        { ". "; }
<a name="4455"></a>
<a name="4456"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4457"></a>        { "\^&lt;&lt;remoteRoom.inRoomName(pov)&gt;&gt;, {you/he} {sees}:"; }
<a name="4458"></a>
<a name="4459"></a>    /* the remote room we're viewing */
<a name="4460"></a>    remoteRoom = nil
<a name="4461"></a>;
<a name="4462"></a>
<a name="4463"></a>/*
<a name="4464"></a> *   A simple customizable room lister.  This can be used to create custom
<a name="4465"></a> *   listers for things like remote room contents listings.  We act just
<a name="4466"></a> *   like any ordinary room lister, but we use custom prefix and suffix
<a name="4467"></a> *   strings provided during construction.
<a name="4468"></a> */
<a name="4469"></a>class CustomRoomLister: Lister
<a name="4470"></a>    construct(prefix, suffix)
<a name="4471"></a>    {
<a name="4472"></a>        prefixStr = prefix;
<a name="4473"></a>        suffixStr = suffix;
<a name="4474"></a>    }
<a name="4475"></a>
<a name="4476"></a>    showListPrefixWide(itemCount, pov, parent) { "&lt;&lt;prefixStr&gt;&gt; "; }
<a name="4477"></a>    showListSuffixWide(itemCount, pov, parent) { "&lt;&lt;suffixStr&gt;&gt; "; }
<a name="4478"></a>    showListPrefixTall(itemCount, pov, parent) { "&lt;&lt;prefixStr&gt;&gt;:"; }
<a name="4479"></a>
<a name="4480"></a>    /* our prefix and suffix strings */
<a name="4481"></a>    prefixStr = nil
<a name="4482"></a>    suffixStr = nil
<a name="4483"></a>;
<a name="4484"></a>
<a name="4485"></a>/*
<a name="4486"></a> *   Single-list inventory lister.  This shows the inventory listing as a
<a name="4487"></a> *   single list, with worn items mixed in among the other inventory items
<a name="4488"></a> *   and labeled "(being worn)".
<a name="4489"></a> */
<a name="4490"></a>actorSingleInventoryLister: InventoryLister
<a name="4491"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4492"></a>        { "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying "; }
<a name="4493"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="4494"></a>        { ". "; }
<a name="4495"></a>
<a name="4496"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4497"></a>        { "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying:"; }
<a name="4498"></a>    showListContentsPrefixTall(itemCount, pov, parent)
<a name="4499"></a>        { "&lt;&lt;buildSynthParam('A/he', parent)&gt;&gt;, who {is} carrying:"; }
<a name="4500"></a>
<a name="4501"></a>    showListEmpty(pov, parent)
<a name="4502"></a>        { "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} empty-handed. "; }
<a name="4503"></a>;
<a name="4504"></a>
<a name="4505"></a>/*
<a name="4506"></a> *   Standard inventory lister for actors - this will work for the player
<a name="4507"></a> *   character and NPC's as well.  This lister uses a "divided" format,
<a name="4508"></a> *   which segregates the listing into items being carried and items being
<a name="4509"></a> *   worn.  We'll combine the two lists into a single sentence if the
<a name="4510"></a> *   overall list is short, otherwise we'll show two separate sentences for
<a name="4511"></a> *   readability.
<a name="4512"></a> */
<a name="4513"></a>actorInventoryLister: DividedInventoryLister
<a name="4514"></a>    /*
<a name="4515"></a>     *   Show the combined inventory listing, putting together the raw
<a name="4516"></a>     *   lists of the items being carried and the items being worn.
<a name="4517"></a>     */
<a name="4518"></a>    showCombinedInventoryList(parent, carrying, wearing)
<a name="4519"></a>    {
<a name="4520"></a>        /* if one or the other sentence is empty, the format is simple */
<a name="4521"></a>        if (carrying == '' &amp;&amp; wearing == '')
<a name="4522"></a>        {
<a name="4523"></a>            /* the parent is completely empty-handed */
<a name="4524"></a>            showInventoryEmpty(parent);
<a name="4525"></a>        }
<a name="4526"></a>        else if (carrying == '')
<a name="4527"></a>        {
<a name="4528"></a>            /* the whole list is being worn */
<a name="4529"></a>            showInventoryWearingOnly(parent, wearing);
<a name="4530"></a>        }
<a name="4531"></a>        else if (wearing == '')
<a name="4532"></a>        {
<a name="4533"></a>            /* the whole list is being carried */
<a name="4534"></a>            showInventoryCarryingOnly(parent, carrying);
<a name="4535"></a>        }
<a name="4536"></a>        else
<a name="4537"></a>        {
<a name="4538"></a>            /*
<a name="4539"></a>             *   Both listings are populated.  Count the number of
<a name="4540"></a>             *   comma-separated or semicolon-separated phrases in each
<a name="4541"></a>             *   list.  This will give us an estimate of the grammatical
<a name="4542"></a>             *   complexity of each list.  If we have very short lists, a
<a name="4543"></a>             *   single sentence will be easier to read; if the lists are
<a name="4544"></a>             *   long, we'll show the lists in separate sentences.
<a name="4545"></a>             */
<a name="4546"></a>            if (countPhrases(carrying) + countPhrases(wearing)
<a name="4547"></a>                &lt;= singleSentenceMaxNouns)
<a name="4548"></a>            {
<a name="4549"></a>                /* short enough: use a single-sentence format */
<a name="4550"></a>                showInventoryShortLists(parent, carrying, wearing);
<a name="4551"></a>            }
<a name="4552"></a>            else
<a name="4553"></a>            {
<a name="4554"></a>                /* long: use a two-sentence format */
<a name="4555"></a>                showInventoryLongLists(parent, carrying, wearing);
<a name="4556"></a>            }
<a name="4557"></a>        }
<a name="4558"></a>    }
<a name="4559"></a>
<a name="4560"></a>    /*
<a name="4561"></a>     *   Count the noun phrases in a string.  We'll count the number of
<a name="4562"></a>     *   elements in the list as indicated by commas and semicolons.  This
<a name="4563"></a>     *   might not be a perfect count of the actual number of noun phrases,
<a name="4564"></a>     *   since we could have commas setting off some other kind of clauses,
<a name="4565"></a>     *   but it nonetheless will give us a good estimate of the overall
<a name="4566"></a>     *   complexity of the text, which is what we're really after.  The
<a name="4567"></a>     *   point is that we want to break up the listings if they're long,
<a name="4568"></a>     *   but combine them into a single sentence if they're short.
<a name="4569"></a>     */
<a name="4570"></a>    countPhrases(txt)
<a name="4571"></a>    {
<a name="4572"></a>        local cnt;
<a name="4573"></a>
<a name="4574"></a>        /* if the string is empty, there are no phrases at all */
<a name="4575"></a>        if (txt == '')
<a name="4576"></a>            return 0;
<a name="4577"></a>
<a name="4578"></a>        /* a non-empty string has at least one phrase */
<a name="4579"></a>        cnt = 1;
<a name="4580"></a>
<a name="4581"></a>        /* scan for commas and semicolons */
<a name="4582"></a>        for (local startIdx = 1 ;;)
<a name="4583"></a>        {
<a name="4584"></a>            local idx;
<a name="4585"></a>
<a name="4586"></a>            /* find the next phrase separator */
<a name="4587"></a>            idx = rexSearch(phraseSepPat, txt, startIdx);
<a name="4588"></a>
<a name="4589"></a>            /* if we didn't find it, we're done */
<a name="4590"></a>            if (idx == nil)
<a name="4591"></a>                break;
<a name="4592"></a>
<a name="4593"></a>            /* count it */
<a name="4594"></a>            ++cnt;
<a name="4595"></a>
<a name="4596"></a>            /* continue scanning after the separator */
<a name="4597"></a>            startIdx = idx[1] + idx[2];
<a name="4598"></a>        }
<a name="4599"></a>
<a name="4600"></a>        /* return the count */
<a name="4601"></a>        return cnt;
<a name="4602"></a>    }
<a name="4603"></a>
<a name="4604"></a>    phraseSepPat = static new RexPattern(',(?! and )|;| and |&lt;rparen&gt;')
<a name="4605"></a>
<a name="4606"></a>    /*
<a name="4607"></a>     *   Once we've made up our mind about the format, we'll call one of
<a name="4608"></a>     *   these methods to show the final sentence.  These are all separate
<a name="4609"></a>     *   methods so that the individual formats can be easily tweaked
<a name="4610"></a>     *   without overriding the whole combined-inventory-listing method.
<a name="4611"></a>     */
<a name="4612"></a>    showInventoryEmpty(parent)
<a name="4613"></a>    {
<a name="4614"></a>        /* empty inventory */
<a name="4615"></a>        "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} empty-handed. ";
<a name="4616"></a>    }
<a name="4617"></a>    showInventoryWearingOnly(parent, wearing)
<a name="4618"></a>    {
<a name="4619"></a>        /* we're carrying nothing but wearing some items */
<a name="4620"></a>        "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying nothing,
<a name="4621"></a>        and {is} wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4622"></a>    }
<a name="4623"></a>    showInventoryCarryingOnly(parent, carrying)
<a name="4624"></a>    {
<a name="4625"></a>        /* we have only carried items to report */
<a name="4626"></a>        "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;. ";
<a name="4627"></a>    }
<a name="4628"></a>    showInventoryShortLists(parent, carrying, wearing)
<a name="4629"></a>    {
<a name="4630"></a>        local nm = gSynthMessageParam(parent);
<a name="4631"></a>
<a name="4632"></a>        /* short lists - combine carried and worn in a single sentence */
<a name="4633"></a>        "&lt;&lt;buildParam('The/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;,
<a name="4634"></a>        and &lt;&lt;buildParam('it\'s', nm)&gt;&gt;{subj} wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4635"></a>    }
<a name="4636"></a>    showInventoryLongLists(parent, carrying, wearing)
<a name="4637"></a>    {
<a name="4638"></a>        local nm = gSynthMessageParam(parent);
<a name="4639"></a>
<a name="4640"></a>        /* long lists - show carried and worn in separate sentences */
<a name="4641"></a>        "&lt;&lt;buildParam('The/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;.
<a name="4642"></a>        &lt;&lt;buildParam('It\'s', nm)&gt;&gt; wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4643"></a>    }
<a name="4644"></a>
<a name="4645"></a>    /*
<a name="4646"></a>     *   For 'tall' listings, we'll use the standard listing style, so we
<a name="4647"></a>     *   need to provide the framing messages for the tall-mode listing.
<a name="4648"></a>     */
<a name="4649"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4650"></a>        { "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying:"; }
<a name="4651"></a>    showListContentsPrefixTall(itemCount, pov, parent)
<a name="4652"></a>        { "&lt;&lt;buildSynthParam('A/he', parent)&gt;&gt;, who {is} carrying:"; }
<a name="4653"></a>    showListEmpty(pov, parent)
<a name="4654"></a>        { "&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} empty-handed. "; }
<a name="4655"></a>;
<a name="4656"></a>
<a name="4657"></a>/*
<a name="4658"></a> *   Special inventory lister for non-player character descriptions - long
<a name="4659"></a> *   form lister.  This is used to display the inventory of an NPC as part
<a name="4660"></a> *   of the full description of the NPC.
<a name="4661"></a> *
<a name="4662"></a> *   This long form lister is meant for actors with lengthy descriptions.
<a name="4663"></a> *   We start the inventory listing on a new line, and use the actor's
<a name="4664"></a> *   full name in the list preface.
<a name="4665"></a> */
<a name="4666"></a>actorHoldingDescInventoryListerLong: actorInventoryLister
<a name="4667"></a>    showInventoryEmpty(parent)
<a name="4668"></a>    {
<a name="4669"></a>        /* empty inventory - saying nothing in an actor description */
<a name="4670"></a>    }
<a name="4671"></a>    showInventoryWearingOnly(parent, wearing)
<a name="4672"></a>    {
<a name="4673"></a>        /* we're carrying nothing but wearing some items */
<a name="4674"></a>        "&lt;.p&gt;&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is}
<a name="4675"></a>        wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4676"></a>    }
<a name="4677"></a>    showInventoryCarryingOnly(parent, carrying)
<a name="4678"></a>    {
<a name="4679"></a>        /* we have only carried items to report */
<a name="4680"></a>        "&lt;.p&gt;&lt;&lt;buildSynthParam('The/he', parent)&gt;&gt; {is} carrying
<a name="4681"></a>        &lt;&lt;carrying&gt;&gt;. ";
<a name="4682"></a>    }
<a name="4683"></a>    showInventoryShortLists(parent, carrying, wearing)
<a name="4684"></a>    {
<a name="4685"></a>        local nm = gSynthMessageParam(parent);
<a name="4686"></a>
<a name="4687"></a>        /* short lists - combine carried and worn in a single sentence */
<a name="4688"></a>        "&lt;.p&gt;&lt;&lt;buildParam('The/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;,
<a name="4689"></a>        and &lt;&lt;buildParam('it\'s', nm)&gt;&gt;{subj} wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4690"></a>    }
<a name="4691"></a>    showInventoryLongLists(parent, carrying, wearing)
<a name="4692"></a>    {
<a name="4693"></a>        local nm = gSynthMessageParam(parent);
<a name="4694"></a>
<a name="4695"></a>        /* long lists - show carried and worn in separate sentences */
<a name="4696"></a>        "&lt;.p&gt;&lt;&lt;buildParam('The/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;.
<a name="4697"></a>        &lt;&lt;buildParam('It\'s', nm)&gt;&gt; wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4698"></a>    }
<a name="4699"></a>;
<a name="4700"></a>
<a name="4701"></a>/* short form of non-player character description inventory lister */
<a name="4702"></a>actorHoldingDescInventoryListerShort: actorInventoryLister
<a name="4703"></a>    showInventoryEmpty(parent)
<a name="4704"></a>    {
<a name="4705"></a>        /* empty inventory - saying nothing in an actor description */
<a name="4706"></a>    }
<a name="4707"></a>    showInventoryWearingOnly(parent, wearing)
<a name="4708"></a>    {
<a name="4709"></a>        /* we're carrying nothing but wearing some items */
<a name="4710"></a>        "&lt;&lt;buildSynthParam('It/he', parent)&gt;&gt; {is} wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4711"></a>    }
<a name="4712"></a>    showInventoryCarryingOnly(parent, carrying)
<a name="4713"></a>    {
<a name="4714"></a>        /* we have only carried items to report */
<a name="4715"></a>        "&lt;&lt;buildSynthParam('It/he', parent)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;. ";
<a name="4716"></a>    }
<a name="4717"></a>    showInventoryShortLists(parent, carrying, wearing)
<a name="4718"></a>    {
<a name="4719"></a>        local nm = gSynthMessageParam(parent);
<a name="4720"></a>
<a name="4721"></a>        /* short lists - combine carried and worn in a single sentence */
<a name="4722"></a>        "&lt;&lt;buildParam('It/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;, and
<a name="4723"></a>        &lt;&lt;buildParam('it\'s', nm)&gt;&gt;{subj} wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4724"></a>    }
<a name="4725"></a>    showInventoryLongLists(parent, carrying, wearing)
<a name="4726"></a>    {
<a name="4727"></a>        local nm = gSynthMessageParam(parent);
<a name="4728"></a>
<a name="4729"></a>        /* long lists - show carried and worn in separate sentences */
<a name="4730"></a>        "&lt;&lt;buildParam('It/he', nm)&gt;&gt; {is} carrying &lt;&lt;carrying&gt;&gt;.
<a name="4731"></a>        &lt;&lt;buildParam('It\'s', nm)&gt;&gt; wearing &lt;&lt;wearing&gt;&gt;. ";
<a name="4732"></a>    }
<a name="4733"></a>;
<a name="4734"></a>
<a name="4735"></a>/*
<a name="4736"></a> *   Base contents lister for things.  This is used to display the contents
<a name="4737"></a> *   of things shown in room and inventory listings; we subclass this for
<a name="4738"></a> *   various purposes
<a name="4739"></a> */
<a name="4740"></a>class BaseThingContentsLister: Lister
<a name="4741"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4742"></a>        { "\^&lt;&lt;parent.nameVerb('contain')&gt;&gt; "; }
<a name="4743"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="4744"></a>        { ". "; }
<a name="4745"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4746"></a>        { "\^&lt;&lt;parent.nameVerb('contain')&gt;&gt;:"; }
<a name="4747"></a>    showListContentsPrefixTall(itemCount, pov, parent)
<a name="4748"></a>        { "&lt;&lt;parent.aName&gt;&gt;, which contain&lt;&lt;parent.verbEndingSEd&gt;&gt;:"; }
<a name="4749"></a>;
<a name="4750"></a>
<a name="4751"></a>/*
<a name="4752"></a> *   Contents lister for things.  This is used to display the second-level
<a name="4753"></a> *   contents lists for things listed in the top-level list for a room
<a name="4754"></a> *   description, inventory listing, or object description.
<a name="4755"></a> */
<a name="4756"></a>thingContentsLister: ContentsLister, BaseThingContentsLister
<a name="4757"></a>;
<a name="4758"></a>
<a name="4759"></a>/*
<a name="4760"></a> *   Contents lister for descriptions of things - this is used to display
<a name="4761"></a> *   the contents of a thing as part of the long description of the thing
<a name="4762"></a> *   (in response to an "examine" command); it differs from a regular
<a name="4763"></a> *   thing contents lister in that we use a pronoun to refer to the thing,
<a name="4764"></a> *   rather than its full name, since the full name was probably just used
<a name="4765"></a> *   in the basic long description.
<a name="4766"></a> */
<a name="4767"></a>thingDescContentsLister: DescContentsLister, BaseThingContentsLister
<a name="4768"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4769"></a>        { "\^&lt;&lt;parent.itVerb('contain')&gt;&gt; "; }
<a name="4770"></a>;
<a name="4771"></a>
<a name="4772"></a>/*
<a name="4773"></a> *   Contents lister for openable things.
<a name="4774"></a> */
<a name="4775"></a>openableDescContentsLister: thingDescContentsLister
<a name="4776"></a>    showListEmpty(pov, parent)
<a name="4777"></a>    {
<a name="4778"></a>        "\^&lt;&lt;parent.openStatus&gt;&gt;. ";
<a name="4779"></a>    }
<a name="4780"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4781"></a>    {
<a name="4782"></a>        "\^&lt;&lt;parent.openStatus&gt;&gt;, and contain&lt;&lt;parent.verbEndingSEd&gt;&gt; ";
<a name="4783"></a>    }
<a name="4784"></a>;
<a name="4785"></a>
<a name="4786"></a>/*
<a name="4787"></a> *   Base contents lister for "LOOK &lt;PREP&gt;" commands (LOOK IN, LOOK UNDER,
<a name="4788"></a> *   LOOK BEHIND, etc).  This can be subclasses for the appropriate LOOK
<a name="4789"></a> *   &lt;PREP&gt; command matching the container type - LOOK UNDER for
<a name="4790"></a> *   undersides, LOOK BEHIND for rear containers, etc.  To use this class,
<a name="4791"></a> *   combine it via multiple inheritance with the appropriate
<a name="4792"></a> *   Base&lt;Prep&gt;ContentsLister for the preposition type.
<a name="4793"></a> */
<a name="4794"></a>class LookWhereContentsLister: DescContentsLister
<a name="4795"></a>    showListEmpty(pov, parent)
<a name="4796"></a>    {
<a name="4797"></a>        /* show a default message indicating the surface is empty */
<a name="4798"></a>        gMessageParams(parent);
<a name="4799"></a>        defaultDescReport('{You/he} {sees} nothing ' + parent.objInPrep
<a name="4800"></a>                          + ' {the parent/him}. ');
<a name="4801"></a>    }
<a name="4802"></a>;
<a name="4803"></a>
<a name="4804"></a>/*
<a name="4805"></a> *   Contents lister for descriptions of things whose contents are
<a name="4806"></a> *   explicitly inspected ("look in").  This differs from a regular
<a name="4807"></a> *   contents lister in that we explicitly say that the object is empty if
<a name="4808"></a> *   it's empty.
<a name="4809"></a> */
<a name="4810"></a>thingLookInLister: LookWhereContentsLister, BaseThingContentsLister
<a name="4811"></a>    showListEmpty(pov, parent)
<a name="4812"></a>    {
<a name="4813"></a>        /*
<a name="4814"></a>         *   Indicate that the list is empty, but make this a default
<a name="4815"></a>         *   descriptive report.  This way, if we report any special
<a name="4816"></a>         *   descriptions for items contained within the object, we'll
<a name="4817"></a>         *   suppress this default description that there's nothing to
<a name="4818"></a>         *   describe, which is clearly wrong if there are
<a name="4819"></a>         *   specially-described contents.
<a name="4820"></a>         */
<a name="4821"></a>        gMessageParams(parent);
<a name="4822"></a>        defaultDescReport('{You/he} {sees} nothing unusual
<a name="4823"></a>            in {the parent/him}. ');
<a name="4824"></a>    }
<a name="4825"></a>;
<a name="4826"></a>
<a name="4827"></a>/*
<a name="4828"></a> *   Default contents lister for newly-revealed objects after opening a
<a name="4829"></a> *   container.
<a name="4830"></a> */
<a name="4831"></a>openableOpeningLister: BaseThingContentsLister
<a name="4832"></a>    showListEmpty(pov, parent) { }
<a name="4833"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4834"></a>    {
<a name="4835"></a>        /*
<a name="4836"></a>         *   This list is, by default, generated as a replacement for the
<a name="4837"></a>         *   default "Opened" message in response to an OPEN command.  We
<a name="4838"></a>         *   therefore need different messages for PC and NPC actions,
<a name="4839"></a>         *   since this serves as the description of the entire action.
<a name="4840"></a>         *
<a name="4841"></a>         *   Note that if you override the Open action response for a given
<a name="4842"></a>         *   object, you might want to customize this lister as well, since
<a name="4843"></a>         *   the message we generate (especially for an NPC action)
<a name="4844"></a>         *   presumes that we'll be the only response the command.
<a name="4845"></a>         */
<a name="4846"></a>        gMessageParams(pov, parent);
<a name="4847"></a>        if (pov.isPlayerChar())
<a name="4848"></a>            "Opening {the parent/him} reveal{s|ed} ";
<a name="4849"></a>        else
<a name="4850"></a>            "{The pov/he} open{s/ed} {the parent/him}, revealing ";
<a name="4851"></a>    }
<a name="4852"></a>;
<a name="4853"></a>
<a name="4854"></a>/*
<a name="4855"></a> *   Base contents lister.  This class handles contents listings for most
<a name="4856"></a> *   kinds of specialized containers - Surfaces, RearConainers,
<a name="4857"></a> *   RearSurfaces, and Undersides.  The main variation in the contents
<a name="4858"></a> *   listings for these various types of containers is simply the
<a name="4859"></a> *   preposition that's used to describe the relationship between the
<a name="4860"></a> *   container and the contents, and for this we can look to the objInPrep
<a name="4861"></a> *   property of the container.
<a name="4862"></a> */
<a name="4863"></a>class BaseContentsLister: Lister
<a name="4864"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4865"></a>    {
<a name="4866"></a>        "\^&lt;&lt;parent.objInPrep&gt;&gt; &lt;&lt;parent.theNameObj&gt;&gt;
<a name="4867"></a>        &lt;&lt;itemCount == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt; ";
<a name="4868"></a>    }
<a name="4869"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="4870"></a>    {
<a name="4871"></a>        ". ";
<a name="4872"></a>    }
<a name="4873"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4874"></a>    {
<a name="4875"></a>        "\^&lt;&lt;parent.objInPrep&gt;&gt; &lt;&lt;parent.theNameObj&gt;&gt;
<a name="4876"></a>        &lt;&lt;itemCount == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;:";
<a name="4877"></a>    }
<a name="4878"></a>    showListContentsPrefixTall(itemCount, pov, parent)
<a name="4879"></a>    {
<a name="4880"></a>        "&lt;&lt;parent.aName&gt;&gt;, &lt;&lt;parent.objInPrep&gt;&gt; which
<a name="4881"></a>        &lt;&lt;itemCount == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt;:";
<a name="4882"></a>    }
<a name="4883"></a>;
<a name="4884"></a>
<a name="4885"></a>
<a name="4886"></a>/*
<a name="4887"></a> *   Base class for contents listers for a surface
<a name="4888"></a> */
<a name="4889"></a>class BaseSurfaceContentsLister: BaseContentsLister
<a name="4890"></a>;
<a name="4891"></a>
<a name="4892"></a>/*
<a name="4893"></a> *   Contents lister for a surface
<a name="4894"></a> */
<a name="4895"></a>surfaceContentsLister: ContentsLister, BaseSurfaceContentsLister
<a name="4896"></a>;
<a name="4897"></a>
<a name="4898"></a>/*
<a name="4899"></a> *   Contents lister for explicitly looking in a surface
<a name="4900"></a> */
<a name="4901"></a>surfaceLookInLister: LookWhereContentsLister, BaseSurfaceContentsLister
<a name="4902"></a>;
<a name="4903"></a>
<a name="4904"></a>/*
<a name="4905"></a> *   Contents lister for a surface, used in a long description.
<a name="4906"></a> */
<a name="4907"></a>surfaceDescContentsLister: DescContentsLister, BaseSurfaceContentsLister
<a name="4908"></a>;
<a name="4909"></a>
<a name="4910"></a>/*
<a name="4911"></a> *   Contents lister for room parts
<a name="4912"></a> */
<a name="4913"></a>roomPartContentsLister: surfaceContentsLister
<a name="4914"></a>    isListed(obj)
<a name="4915"></a>    {
<a name="4916"></a>        /* list the object if it's listed in the room part */
<a name="4917"></a>        return obj.isListedInRoomPart(part_);
<a name="4918"></a>    }
<a name="4919"></a>
<a name="4920"></a>    /* the part I'm listing */
<a name="4921"></a>    part_ = nil
<a name="4922"></a>;
<a name="4923"></a>
<a name="4924"></a>/*
<a name="4925"></a> *   contents lister for room parts, used in a long description
<a name="4926"></a> */
<a name="4927"></a>roomPartDescContentsLister: surfaceDescContentsLister
<a name="4928"></a>    isListed(obj)
<a name="4929"></a>    {
<a name="4930"></a>        /* list the object if it's listed in the room part */
<a name="4931"></a>        return obj.isListedInRoomPart(part_);
<a name="4932"></a>    }
<a name="4933"></a>
<a name="4934"></a>    part_ = nil
<a name="4935"></a>;
<a name="4936"></a>
<a name="4937"></a>/*
<a name="4938"></a> *   Look-in lister for room parts.  Most room parts act like surfaces
<a name="4939"></a> *   rather than containers, so base this lister on the surface lister.
<a name="4940"></a> */
<a name="4941"></a>roomPartLookInLister: surfaceLookInLister
<a name="4942"></a>    isListed(obj)
<a name="4943"></a>    {
<a name="4944"></a>        /* list the object if it's listed in the room part */
<a name="4945"></a>        return obj.isListedInRoomPart(part_);
<a name="4946"></a>    }
<a name="4947"></a>
<a name="4948"></a>    part_ = nil
<a name="4949"></a>;
<a name="4950"></a>
<a name="4951"></a>/*
<a name="4952"></a> *   Base class for contents listers for an Underside.
<a name="4953"></a> */
<a name="4954"></a>class BaseUndersideContentsLister: BaseContentsLister
<a name="4955"></a>;
<a name="4956"></a>
<a name="4957"></a>/* basic contents lister for an Underside */
<a name="4958"></a>undersideContentsLister: ContentsLister, BaseUndersideContentsLister
<a name="4959"></a>;
<a name="4960"></a>
<a name="4961"></a>/* contents lister for explicitly looking under an Underside */
<a name="4962"></a>undersideLookUnderLister: LookWhereContentsLister, BaseUndersideContentsLister
<a name="4963"></a>;
<a name="4964"></a>
<a name="4965"></a>/* contents lister for moving an Underside and abandoning its contents */
<a name="4966"></a>undersideAbandonContentsLister: undersideLookUnderLister
<a name="4967"></a>    showListEmpty(pov, parent) { }
<a name="4968"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4969"></a>        { "Moving &lt;&lt;parent.theNameObj&gt;&gt; reveal&lt;&lt;tSel('s', 'ed')&gt;&gt; "; }
<a name="4970"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="4971"></a>        { " underneath. "; }
<a name="4972"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="4973"></a>        { "Moving &lt;&lt;parent.theNameObj&gt;&gt; reveal&lt;&lt;tSel('s', 'ed')&gt;&gt;:"; }
<a name="4974"></a>;
<a name="4975"></a>
<a name="4976"></a>/* contents lister for an Underside, used in a long description */
<a name="4977"></a>undersideDescContentsLister: DescContentsLister, BaseUndersideContentsLister
<a name="4978"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="4979"></a>    {
<a name="4980"></a>        "Under &lt;&lt;parent.theNameObj&gt;&gt;
<a name="4981"></a>        &lt;&lt;itemCount == 1 ? tSel('is', 'was')
<a name="4982"></a>                         : tSel('are', 'were')&gt;&gt; ";
<a name="4983"></a>    }
<a name="4984"></a>;
<a name="4985"></a>
<a name="4986"></a>/*
<a name="4987"></a> *   Base class for contents listers for an RearContainer or RearSurface
<a name="4988"></a> */
<a name="4989"></a>class BaseRearContentsLister: BaseContentsLister
<a name="4990"></a>;
<a name="4991"></a>
<a name="4992"></a>/* basic contents lister for a RearContainer or RearSurface */
<a name="4993"></a>rearContentsLister: ContentsLister, BaseRearContentsLister
<a name="4994"></a>;
<a name="4995"></a>
<a name="4996"></a>/* contents lister for explicitly looking behind a RearContainer/Surface */
<a name="4997"></a>rearLookBehindLister: LookWhereContentsLister, BaseRearContentsLister
<a name="4998"></a>;
<a name="4999"></a>
<a name="5000"></a>/* lister for moving a RearContainer/Surface and abandoning its contents */
<a name="5001"></a>rearAbandonContentsLister: undersideLookUnderLister
<a name="5002"></a>    showListEmpty(pov, parent) { }
<a name="5003"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="5004"></a>        { "Moving &lt;&lt;parent.theNameObj&gt;&gt; reveal&lt;&lt;tSel('s', 'ed')&gt;&gt; "; }
<a name="5005"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="5006"></a>        { " behind &lt;&lt;parent.itObj&gt;&gt;. "; }
<a name="5007"></a>    showListPrefixTall(itemCount, pov, parent)
<a name="5008"></a>        { "Moving &lt;&lt;parent.theNameObj&gt;&gt; reveal&lt;&lt;tSel('s', 'ed')&gt;&gt;:"; }
<a name="5009"></a>;
<a name="5010"></a>
<a name="5011"></a>/* long-description contents lister for a RearContainer/Surface */
<a name="5012"></a>rearDescContentsLister: DescContentsLister, BaseRearContentsLister
<a name="5013"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="5014"></a>    {
<a name="5015"></a>        "Behind &lt;&lt;parent.theNameObj&gt;&gt;
<a name="5016"></a>        &lt;&lt;itemCount == 1 ? tSel('is', 'was')
<a name="5017"></a>                         : tSel('are', 'were')&gt;&gt; ";
<a name="5018"></a>    }
<a name="5019"></a>;
<a name="5020"></a>
<a name="5021"></a>
<a name="5022"></a>/*
<a name="5023"></a> *   Base class for specialized in-line contents listers.  This shows the
<a name="5024"></a> *   list in the form "(&lt;prep&gt; which is...)", with the preposition obtained
<a name="5025"></a> *   from the container's objInPrep property.
<a name="5026"></a> */
<a name="5027"></a>class BaseInlineContentsLister: ContentsLister
<a name="5028"></a>    showListEmpty(pov, parent) { }
<a name="5029"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5030"></a>    {
<a name="5031"></a>        " (&lt;&lt;parent.objInPrep&gt;&gt; which &lt;&lt;
<a name="5032"></a>          cnt == 1 ? tSel('is', 'was') : tSel('are', 'were')&gt;&gt; ";
<a name="5033"></a>    }
<a name="5034"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="5035"></a>        { ")"; }
<a name="5036"></a>;
<a name="5037"></a>
<a name="5038"></a>/*
<a name="5039"></a> *   Contents lister for a generic in-line list entry.  We customize the
<a name="5040"></a> *   wording slightly here: rather than saying "(in which...)" as the base
<a name="5041"></a> *   class would, we use the slightly more readable "(which contains...)".
<a name="5042"></a> */
<a name="5043"></a>inlineListingContentsLister: BaseInlineContentsLister
<a name="5044"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5045"></a>        { " (which contain&lt;&lt;parent.verbEndingSEd&gt;&gt; "; }
<a name="5046"></a>;
<a name="5047"></a>
<a name="5048"></a>/* in-line contents lister for a surface */
<a name="5049"></a>surfaceInlineContentsLister: BaseInlineContentsLister
<a name="5050"></a>;
<a name="5051"></a>
<a name="5052"></a>/* in-line contents lister for an Underside */
<a name="5053"></a>undersideInlineContentsLister: BaseInlineContentsLister
<a name="5054"></a>;
<a name="5055"></a>
<a name="5056"></a>/* in-line contents lister for a RearContainer/Surface */
<a name="5057"></a>rearInlineContentsLister: BaseInlineContentsLister
<a name="5058"></a>;
<a name="5059"></a>
<a name="5060"></a>/*
<a name="5061"></a> *   Contents lister for keyring list entry.  This is used to display a
<a name="5062"></a> *   keyring's contents in-line with the name of the keyring,
<a name="5063"></a> *   parenthetically.
<a name="5064"></a> */
<a name="5065"></a>keyringInlineContentsLister: inlineListingContentsLister
<a name="5066"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5067"></a>        { " (with "; }
<a name="5068"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5069"></a>        { " attached)"; }
<a name="5070"></a>;
<a name="5071"></a>
<a name="5072"></a>
<a name="5073"></a>/*
<a name="5074"></a> *   Contents lister for "examine &lt;keyring&gt;"
<a name="5075"></a> */
<a name="5076"></a>keyringExamineContentsLister: DescContentsLister
<a name="5077"></a>    showListEmpty(pov, parent)
<a name="5078"></a>    {
<a name="5079"></a>        "\^&lt;&lt;parent.nameIs&gt;&gt; empty. ";
<a name="5080"></a>    }
<a name="5081"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5082"></a>    {
<a name="5083"></a>        "Attached to &lt;&lt;parent.theNameObj&gt;&gt;
<a name="5084"></a>        &lt;&lt;cnt == 1 ? tSel('is', 'was')
<a name="5085"></a>                   : tSel('are', 'were')&gt;&gt; ";
<a name="5086"></a>    }
<a name="5087"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="5088"></a>    {
<a name="5089"></a>        ". ";
<a name="5090"></a>    }
<a name="5091"></a>;
<a name="5092"></a>
<a name="5093"></a>/*
<a name="5094"></a> *   Lister for actors aboard a traveler.  This is used to list the actors
<a name="5095"></a> *   on board a vehicle when the vehicle arrives or departs a location.
<a name="5096"></a> */
<a name="5097"></a>aboardVehicleLister: Lister
<a name="5098"></a>    showListPrefixWide(itemCount, pov, parent)
<a name="5099"></a>        { " (carrying "; }
<a name="5100"></a>    showListSuffixWide(itemCount, pov, parent)
<a name="5101"></a>        { ")"; }
<a name="5102"></a>
<a name="5103"></a>    /* list anything whose isListedAboardVehicle returns true */
<a name="5104"></a>    isListed(obj) { return obj.isListedAboardVehicle; }
<a name="5105"></a>;
<a name="5106"></a>
<a name="5107"></a>/*
<a name="5108"></a> *   A simple lister to show the objects to which a given Attachable
<a name="5109"></a> *   object is attached.  This shows the objects which have symmetrical
<a name="5110"></a> *   attachment relationships to the given parent object, or which are
<a name="5111"></a> *   "major" items to which the parent is attached.
<a name="5112"></a> */
<a name="5113"></a>class SimpleAttachmentLister: Lister
<a name="5114"></a>    construct(parent) { parent_ = parent; }
<a name="5115"></a>
<a name="5116"></a>    showListEmpty(pov, parent)
<a name="5117"></a>        { /* say nothing when there are no attachments */ }
<a name="5118"></a>
<a name="5119"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5120"></a>        { "&lt;.p&gt;\^&lt;&lt;parent.nameIs&gt;&gt; attached to "; }
<a name="5121"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5122"></a>        { ". "; }
<a name="5123"></a>
<a name="5124"></a>    /* ask the parent if we should list each item */
<a name="5125"></a>    isListed(obj) { return parent_.isListedAsAttachedTo(obj); }
<a name="5126"></a>
<a name="5127"></a>    /*
<a name="5128"></a>     *   the parent object - this is the object whose attachments are being
<a name="5129"></a>     *   listed
<a name="5130"></a>     */
<a name="5131"></a>    parent_ = nil
<a name="5132"></a>;
<a name="5133"></a>
<a name="5134"></a>/*
<a name="5135"></a> *   The "major" attachment lister.  This lists the objects which are
<a name="5136"></a> *   attached to a given parent Attachable, and for which the parent is
<a name="5137"></a> *   the "major" item in the relationship.  The items in the list are
<a name="5138"></a> *   described as being attached to the parent.
<a name="5139"></a> */
<a name="5140"></a>class MajorAttachmentLister: SimpleAttachmentLister
<a name="5141"></a>    showListPrefixWide(cnt, pov, parent) { "&lt;.p&gt;\^"; }
<a name="5142"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5143"></a>    {
<a name="5144"></a>        " &lt;&lt;cnt == 1 ? tSel('is', 'was')
<a name="5145"></a>                     : tSel('are', 'were')&gt;&gt;
<a name="5146"></a>        attached to &lt;&lt;parent.theNameObj&gt;&gt;. ";
<a name="5147"></a>    }
<a name="5148"></a>
<a name="5149"></a>    /* ask the parent if we should list each item */
<a name="5150"></a>    isListed(obj) { return parent_.isListedAsMajorFor(obj); }
<a name="5151"></a>;
<a name="5152"></a>
<a name="5153"></a>/*
<a name="5154"></a> *   Finish Options lister.  This lister is used to offer the player
<a name="5155"></a> *   options in finishGame().
<a name="5156"></a> */
<a name="5157"></a>finishOptionsLister: Lister
<a name="5158"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5159"></a>    {
<a name="5160"></a>        "&lt;.p&gt;Would you like to ";
<a name="5161"></a>    }
<a name="5162"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5163"></a>    {
<a name="5164"></a>        /* end the question, add a blank line, and show the "&gt;" prompt */
<a name="5165"></a>        "?\b&amp;gt;";
<a name="5166"></a>    }
<a name="5167"></a>
<a name="5168"></a>    isListed(obj) { return obj.isListed; }
<a name="5169"></a>    listCardinality(obj) { return 1; }
<a name="5170"></a>
<a name="5171"></a>    showListItem(obj, options, pov, infoTab)
<a name="5172"></a>    {
<a name="5173"></a>        /* obj is a FinishOption object; show its description */
<a name="5174"></a>        obj.desc;
<a name="5175"></a>    }
<a name="5176"></a>
<a name="5177"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5178"></a>    {
<a name="5179"></a>        /*
<a name="5180"></a>         *   for the last separator, show "or" rather than "and"; for
<a name="5181"></a>         *   others, inherit the default handling
<a name="5182"></a>         */
<a name="5183"></a>        if (curItemNum + 1 == totalItems)
<a name="5184"></a>        {
<a name="5185"></a>            if (totalItems == 2)
<a name="5186"></a>                " or ";
<a name="5187"></a>            else
<a name="5188"></a>                ", or ";
<a name="5189"></a>        }
<a name="5190"></a>        else
<a name="5191"></a>            inherited(options, curItemNum, totalItems);
<a name="5192"></a>    }
<a name="5193"></a>;
<a name="5194"></a>
<a name="5195"></a>/*
<a name="5196"></a> *   Equivalent list state lister.  This shows a list of state names for a
<a name="5197"></a> *   set of otherwise indistinguishable items.  We show the state names in
<a name="5198"></a> *   parentheses, separated by commas only (i.e., no "and" separating the
<a name="5199"></a> *   last two items); we use this less verbose format so that we blend
<a name="5200"></a> *   into the larger enclosing list more naturally.
<a name="5201"></a> *
<a name="5202"></a> *   The items to be listed are EquivalentStateInfo objects.
<a name="5203"></a> */
<a name="5204"></a>equivalentStateLister: Lister
<a name="5205"></a>    showListPrefixWide(cnt, pov, parent) { " ("; }
<a name="5206"></a>    showListSuffixWide(cnt, pov, parent) { ")"; }
<a name="5207"></a>    isListed(obj) { return true; }
<a name="5208"></a>    listCardinality(obj) { return 1; }
<a name="5209"></a>    showListItem(obj, options, pov, infoTab)
<a name="5210"></a>    {
<a name="5211"></a>        "&lt;&lt;spellIntBelow(obj.getEquivCount(), 100)&gt;&gt; &lt;&lt;obj.getName()&gt;&gt;";
<a name="5212"></a>    }
<a name="5213"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5214"></a>    {
<a name="5215"></a>        if (curItemNum &lt; totalItems)
<a name="5216"></a>            ", ";
<a name="5217"></a>    }
<a name="5218"></a>;
<a name="5219"></a>
<a name="5220"></a>/* in case the exits module isn't included in the build */
<a name="5221"></a>property destName_, destIsBack_, others_, enableHyperlinks;
<a name="5222"></a>
<a name="5223"></a>/*
<a name="5224"></a> *   Basic room exit lister.  This shows a list of the apparent exits from
<a name="5225"></a> *   a location.
<a name="5226"></a> *
<a name="5227"></a> *   The items to be listed are DestInfo objects.
<a name="5228"></a> */
<a name="5229"></a>class ExitLister: Lister
<a name="5230"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5231"></a>    {
<a name="5232"></a>        if (cnt == 1)
<a name="5233"></a>            "The only obvious exit {leads|led} ";
<a name="5234"></a>        else
<a name="5235"></a>            "Obvious exits {lead|led} ";
<a name="5236"></a>    }
<a name="5237"></a>    showListSuffixWide(cnt, pov, parent) { ". "; }
<a name="5238"></a>
<a name="5239"></a>    isListed(obj) { return true; }
<a name="5240"></a>    listCardinality(obj) { return 1; }
<a name="5241"></a>
<a name="5242"></a>    showListItem(obj, options, pov, infoTab)
<a name="5243"></a>    {
<a name="5244"></a>        /*
<a name="5245"></a>         *   Show the back-to-direction prefix, if we don't know the
<a name="5246"></a>         *   destination name but this is the back-to direction: "back to
<a name="5247"></a>         *   the north" and so on.
<a name="5248"></a>         */
<a name="5249"></a>        if (obj.destIsBack_ &amp;&amp; obj.destName_ == nil)
<a name="5250"></a>            say(obj.dir_.backToPrefix + ' ');
<a name="5251"></a>
<a name="5252"></a>        /* show the direction */
<a name="5253"></a>        showListItemDirName(obj, nil);
<a name="5254"></a>
<a name="5255"></a>        /* if the destination is known, show it as well */
<a name="5256"></a>        if (obj.destName_ != nil)
<a name="5257"></a>        {
<a name="5258"></a>            /*
<a name="5259"></a>             *   if we have a list of other directions going to the same
<a name="5260"></a>             *   place, show it parenthetically
<a name="5261"></a>             */
<a name="5262"></a>            otherExitLister.showListAll(obj.others_, 0, 0);
<a name="5263"></a>
<a name="5264"></a>            /*
<a name="5265"></a>             *   Show our destination name.  If we know the "back to"
<a name="5266"></a>             *   destination name, show destination names in the format
<a name="5267"></a>             *   "east, to the living room" so that they are consistent
<a name="5268"></a>             *   with "west, back to the dining room".  Otherwise, just
<a name="5269"></a>             *   show "east to the living room".
<a name="5270"></a>             */
<a name="5271"></a>            if ((options &amp; hasBackNameFlag) != 0)
<a name="5272"></a>                ",";
<a name="5273"></a>
<a name="5274"></a>            /* if this is the way back, say so */
<a name="5275"></a>            if (obj.destIsBack_)
<a name="5276"></a>                " back";
<a name="5277"></a>
<a name="5278"></a>            /* show the destination */
<a name="5279"></a>            " to &lt;&lt;obj.destName_&gt;&gt;";
<a name="5280"></a>        }
<a name="5281"></a>    }
<a name="5282"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5283"></a>    {
<a name="5284"></a>        /*
<a name="5285"></a>         *   if we have a "back to" name, use the "long" notation - this is
<a name="5286"></a>         *   important because we'll use commas in the directions with
<a name="5287"></a>         *   known destination names
<a name="5288"></a>         */
<a name="5289"></a>        if ((options &amp; hasBackNameFlag) != 0)
<a name="5290"></a>            options |= ListLong;
<a name="5291"></a>
<a name="5292"></a>        /*
<a name="5293"></a>         *   for a two-item list, if either item has a destination name,
<a name="5294"></a>         *   show a comma or semicolon (depending on 'long' vs 'short' list
<a name="5295"></a>         *   mode) before the "and"; for anything else, use the default
<a name="5296"></a>         *   handling
<a name="5297"></a>         */
<a name="5298"></a>        if (curItemNum == 1
<a name="5299"></a>            &amp;&amp; totalItems == 2
<a name="5300"></a>            &amp;&amp; (options &amp; hasDestNameFlag) != 0)
<a name="5301"></a>        {
<a name="5302"></a>            if ((options &amp; ListLong) != 0)
<a name="5303"></a>                "; and ";
<a name="5304"></a>            else
<a name="5305"></a>                ", and ";
<a name="5306"></a>        }
<a name="5307"></a>        else
<a name="5308"></a>            inherited(options, curItemNum, totalItems);
<a name="5309"></a>    }
<a name="5310"></a>
<a name="5311"></a>    /* show a direction name, hyperlinking it if appropriate */
<a name="5312"></a>    showListItemDirName(obj, initCap)
<a name="5313"></a>    {
<a name="5314"></a>        local dirname;
<a name="5315"></a>
<a name="5316"></a>        /* get the name */
<a name="5317"></a>        dirname = obj.dir_.name;
<a name="5318"></a>
<a name="5319"></a>        /* capitalize the first letter, if desired */
<a name="5320"></a>        if (initCap)
<a name="5321"></a>            dirname = dirname.substr(1,1).toUpper() + dirname.substr(2);
<a name="5322"></a>
<a name="5323"></a>        /* show the name with a hyperlink or not, as configured */
<a name="5324"></a>        if (libGlobal.exitListerObj.enableHyperlinks)
<a name="5325"></a>            say(aHref(dirname, dirname));
<a name="5326"></a>        else
<a name="5327"></a>            say(dirname);
<a name="5328"></a>    }
<a name="5329"></a>
<a name="5330"></a>    /* this lister shows destination names */
<a name="5331"></a>    listerShowsDest = true
<a name="5332"></a>
<a name="5333"></a>    /*
<a name="5334"></a>     *   My special options flag: at least one object in the list has a
<a name="5335"></a>     *   destination name.  The caller should set this flag in our options
<a name="5336"></a>     *   if applicable.
<a name="5337"></a>     */
<a name="5338"></a>    hasDestNameFlag = ListerCustomFlag(1)
<a name="5339"></a>    hasBackNameFlag = ListerCustomFlag(2)
<a name="5340"></a>    nextCustomFlag = ListerCustomFlag(3)
<a name="5341"></a>;
<a name="5342"></a>
<a name="5343"></a>/*
<a name="5344"></a> *   Show a list of other exits to a given destination.  We'll show the
<a name="5345"></a> *   list parenthetically, if there's a list to show.  The objects to be
<a name="5346"></a> *   listed are Direction objects.
<a name="5347"></a> */
<a name="5348"></a>otherExitLister: Lister
<a name="5349"></a>    showListPrefixWide(cnt, pov, parent) { " (or "; }
<a name="5350"></a>    showListSuffixWide(cnt, pov, parent) { ")"; }
<a name="5351"></a>
<a name="5352"></a>    isListed(obj) { return true; }
<a name="5353"></a>    listCardinality(obj) { return 1; }
<a name="5354"></a>
<a name="5355"></a>    showListItem(obj, options, pov, infoTab)
<a name="5356"></a>    {
<a name="5357"></a>        if (libGlobal.exitListerObj.enableHyperlinks)
<a name="5358"></a>            say(aHref(obj.name, obj.name));
<a name="5359"></a>        else
<a name="5360"></a>            say(obj.name);
<a name="5361"></a>    }
<a name="5362"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5363"></a>    {
<a name="5364"></a>        /*
<a name="5365"></a>         *   simply show "or" for all items (these lists are usually
<a name="5366"></a>         *   short, so omit any commas)
<a name="5367"></a>         */
<a name="5368"></a>        if (curItemNum != totalItems)
<a name="5369"></a>            " or ";
<a name="5370"></a>    }
<a name="5371"></a>;
<a name="5372"></a>
<a name="5373"></a>/*
<a name="5374"></a> *   Show room exits as part of a room description, using the "verbose"
<a name="5375"></a> *   sentence-style notation.
<a name="5376"></a> */
<a name="5377"></a>lookAroundExitLister: ExitLister
<a name="5378"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5379"></a>    {
<a name="5380"></a>        /* add a paragraph break before the exit listing */
<a name="5381"></a>        "&lt;.roompara&gt;";
<a name="5382"></a>
<a name="5383"></a>        /* inherit default handling */
<a name="5384"></a>        inherited(cnt, pov, parent);
<a name="5385"></a>    }
<a name="5386"></a>;
<a name="5387"></a>
<a name="5388"></a>/*
<a name="5389"></a> *   Show room exits as part of a room description, using the "terse"
<a name="5390"></a> *   notation.
<a name="5391"></a> */
<a name="5392"></a>lookAroundTerseExitLister: ExitLister
<a name="5393"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5394"></a>    {
<a name="5395"></a>        "&lt;.roompara&gt;&lt;.parser&gt;Obvious exits: ";
<a name="5396"></a>    }
<a name="5397"></a>    showListItem(obj, options, pov, infoTab)
<a name="5398"></a>    {
<a name="5399"></a>        /* show the direction name */
<a name="5400"></a>        showListItemDirName(obj, true);
<a name="5401"></a>    }
<a name="5402"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5403"></a>    {
<a name="5404"></a>        "&lt;./parser&gt; ";
<a name="5405"></a>    }
<a name="5406"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5407"></a>    {
<a name="5408"></a>        /* just show a comma between items */
<a name="5409"></a>        if (curItemNum != totalItems)
<a name="5410"></a>            ", ";
<a name="5411"></a>    }
<a name="5412"></a>
<a name="5413"></a>    /* this lister does not show destination names */
<a name="5414"></a>    listerShowsDest = nil
<a name="5415"></a>;
<a name="5416"></a>
<a name="5417"></a>/*
<a name="5418"></a> *   Show room exits in response to an explicit request (such as an EXITS
<a name="5419"></a> *   command).
<a name="5420"></a> */
<a name="5421"></a>explicitExitLister: ExitLister
<a name="5422"></a>    showListEmpty(pov, parent)
<a name="5423"></a>    {
<a name="5424"></a>        "There {are|were} no obvious exits. ";
<a name="5425"></a>    }
<a name="5426"></a>;
<a name="5427"></a>
<a name="5428"></a>/*
<a name="5429"></a> *   Show room exits in the status line (used in HTML mode only)
<a name="5430"></a> */
<a name="5431"></a>statuslineExitLister: ExitLister
<a name="5432"></a>    showListEmpty(pov, parent)
<a name="5433"></a>    {
<a name="5434"></a>        "&lt;&lt;statusHTML(3)&gt;&gt;&lt;b&gt;Exits:&lt;/b&gt; &lt;i&gt;None&lt;/i&gt;&lt;&lt;statusHTML(4)&gt;&gt;";
<a name="5435"></a>    }
<a name="5436"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5437"></a>    {
<a name="5438"></a>        "&lt;&lt;statusHTML(3)&gt;&gt;&lt;b&gt;Exits:&lt;/b&gt; ";
<a name="5439"></a>    }
<a name="5440"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5441"></a>    {
<a name="5442"></a>        "&lt;&lt;statusHTML(4)&gt;&gt;";
<a name="5443"></a>    }
<a name="5444"></a>    showListItem(obj, options, pov, infoTab)
<a name="5445"></a>    {
<a name="5446"></a>        "&lt;&lt;aHref(obj.dir_.name, obj.dir_.name, 'Go ' + obj.dir_.name,
<a name="5447"></a>                 AHREF_Plain)&gt;&gt;";
<a name="5448"></a>    }
<a name="5449"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5450"></a>    {
<a name="5451"></a>        /* just show a space between items */
<a name="5452"></a>        if (curItemNum != totalItems)
<a name="5453"></a>            " &amp;nbsp; ";
<a name="5454"></a>    }
<a name="5455"></a>
<a name="5456"></a>    /* this lister does not show destination names */
<a name="5457"></a>    listerShowsDest = nil
<a name="5458"></a>;
<a name="5459"></a>
<a name="5460"></a>/*
<a name="5461"></a> *   Implied action announcement grouper.  This takes a list of
<a name="5462"></a> *   ImplicitActionAnnouncement reports and returns a single message string
<a name="5463"></a> *   describing the entire list of actions.
<a name="5464"></a> */
<a name="5465"></a>implicitAnnouncementGrouper: object
<a name="5466"></a>    /*
<a name="5467"></a>     *   Configuration option: keep all failures in a list of implied
<a name="5468"></a>     *   announcements.  If this is true, then we'll write things like
<a name="5469"></a>     *   "trying to unlock the door and then open it"; if nil, we'll
<a name="5470"></a>     *   instead write simply "trying to unlock the door".
<a name="5471"></a>     *
<a name="5472"></a>     *   By default, we keep only the first of a group of failures.  A
<a name="5473"></a>     *   group of failures is always recursively related, so the first
<a name="5474"></a>     *   announcement refers to the command that actually failed; the rest
<a name="5475"></a>     *   of the announcements are for the enclosing actions that triggered
<a name="5476"></a>     *   the first action.  All of the enclosing actions failed as well,
<a name="5477"></a>     *   but only because the first action failed.
<a name="5478"></a>     *
<a name="5479"></a>     *   Announcing all of the actions is too verbose for most tastes,
<a name="5480"></a>     *   which is why we set the default here to nil.  The fact that the
<a name="5481"></a>     *   first action in the group failed means that we necessarily won't
<a name="5482"></a>     *   carry out any of the enclosing actions, so the enclosing
<a name="5483"></a>     *   announcements don't tell us much.  All they really tell us is why
<a name="5484"></a>     *   we're running the action that actually failed, but that's almost
<a name="5485"></a>     *   always obvious, so suppressing them is usually fine.
<a name="5486"></a>     */
<a name="5487"></a>    keepAllFailures = nil
<a name="5488"></a>
<a name="5489"></a>    /* build the composite message */
<a name="5490"></a>    compositeMessage(lst)
<a name="5491"></a>    {
<a name="5492"></a>        local txt;
<a name="5493"></a>        local ctx = new ListImpCtx();
<a name="5494"></a>
<a name="5495"></a>        /* add the text for each item in the list */
<a name="5496"></a>        for (txt = '', local i = 1, local len = lst.length() ; i &lt;= len ; ++i)
<a name="5497"></a>        {
<a name="5498"></a>            local curTxt;
<a name="5499"></a>
<a name="5500"></a>            /* get this item */
<a name="5501"></a>            local cur = lst[i];
<a name="5502"></a>
<a name="5503"></a>            /* we're not in a 'try' or 'ask' sublist yet */
<a name="5504"></a>            ctx.isInSublist = nil;
<a name="5505"></a>
<a name="5506"></a>            /* set the underlying context according to this item */
<a name="5507"></a>            ctx.setBaseCtx(cur);
<a name="5508"></a>
<a name="5509"></a>            /*
<a name="5510"></a>             *   Generate the announcement for this element.  Generate the
<a name="5511"></a>             *   announcement from the message property for this item using
<a name="5512"></a>             *   our running list context.
<a name="5513"></a>             */
<a name="5514"></a>            curTxt = cur.getMessageText(
<a name="5515"></a>                cur.getAction().getOriginalAction(), ctx);
<a name="5516"></a>
<a name="5517"></a>            /*
<a name="5518"></a>             *   If this one is an attempt only, and it's followed by one
<a name="5519"></a>             *   or more other attempts, the attempts must all be
<a name="5520"></a>             *   recursively related (in other words, the first attempt was
<a name="5521"></a>             *   an implied action required by the second attempt, which
<a name="5522"></a>             *   was required by the third, and so on).  They have to be
<a name="5523"></a>             *   recursively related, because otherwise we wouldn't have
<a name="5524"></a>             *   kept trying things after the first failed attempt.
<a name="5525"></a>             *
<a name="5526"></a>             *   To make the series of failed attempts sound more natural,
<a name="5527"></a>             *   group them into a single "trying to", and keep only the
<a name="5528"></a>             *   first failure: rather than "trying to unlock the door,
<a name="5529"></a>             *   then trying to open the door", write "trying to unlock the
<a name="5530"></a>             *   door and then open it".
<a name="5531"></a>             *
<a name="5532"></a>             *   An optional configuration setting makes us keep only the
<a name="5533"></a>             *   first failed operation, so we'd instead write simply
<a name="5534"></a>             *   "trying to unlock the door".
<a name="5535"></a>             *
<a name="5536"></a>             *   Do the same grouping for attempts interrupted for an
<a name="5537"></a>             *   interactive question.
<a name="5538"></a>             */
<a name="5539"></a>            while ((cur.justTrying &amp;&amp; i &lt; len &amp;&amp; lst[i+1].justTrying)
<a name="5540"></a>                   || (cur.justAsking &amp;&amp; i &lt; len &amp;&amp; lst[i+1].justAsking))
<a name="5541"></a>            {
<a name="5542"></a>                local addTxt;
<a name="5543"></a>
<a name="5544"></a>                /*
<a name="5545"></a>                 *   move on to the next item - we're processing it here,
<a name="5546"></a>                 *   so we don't need to handle it again in the main loop
<a name="5547"></a>                 */
<a name="5548"></a>                ++i;
<a name="5549"></a>                cur = lst[i];
<a name="5550"></a>
<a name="5551"></a>                /* remember that we're in a try/ask sublist */
<a name="5552"></a>                ctx.isInSublist = true;
<a name="5553"></a>
<a name="5554"></a>                /* add the list entry for this action, if desired */
<a name="5555"></a>                if (keepAllFailures)
<a name="5556"></a>                {
<a name="5557"></a>                    /* get the added text */
<a name="5558"></a>                    addTxt = cur.getMessageText(
<a name="5559"></a>                        cur.getAction().getOriginalAction(), ctx);
<a name="5560"></a>
<a name="5561"></a>                    /*
<a name="5562"></a>                     *   if both the text so far and the added text are
<a name="5563"></a>                     *   non-empty, string them together with 'and then';
<a name="5564"></a>                     *   if one or the other is empty, use the non-nil one
<a name="5565"></a>                     */
<a name="5566"></a>                    if (addTxt != '' &amp;&amp; curTxt != '')
<a name="5567"></a>                        curTxt += ' and then ' + addTxt;
<a name="5568"></a>                    else if (addTxt != '')
<a name="5569"></a>                        curTxt = addTxt;
<a name="5570"></a>                }
<a name="5571"></a>            }
<a name="5572"></a>
<a name="5573"></a>            /* add a separator before this item if it isn't the first */
<a name="5574"></a>            if (txt != '' &amp;&amp; curTxt != '')
<a name="5575"></a>                txt += ', then ';
<a name="5576"></a>
<a name="5577"></a>            /* add the current item's text */
<a name="5578"></a>            txt += curTxt;
<a name="5579"></a>        }
<a name="5580"></a>
<a name="5581"></a>        /* if we ended up with no text, the announcement is silent */
<a name="5582"></a>        if (txt == '')
<a name="5583"></a>            return '';
<a name="5584"></a>
<a name="5585"></a>        /* wrap the whole list in the usual full standard phrasing */
<a name="5586"></a>        return standardImpCtx.buildImplicitAnnouncement(txt);
<a name="5587"></a>    }
<a name="5588"></a>;
<a name="5589"></a>
<a name="5590"></a>/*
<a name="5591"></a> *   Suggested topic lister.
<a name="5592"></a> */
<a name="5593"></a>class SuggestedTopicLister: Lister
<a name="5594"></a>    construct(asker, askee, explicit)
<a name="5595"></a>    {
<a name="5596"></a>        /* remember the actors */
<a name="5597"></a>        askingActor = asker;
<a name="5598"></a>        targetActor = askee;
<a name="5599"></a>
<a name="5600"></a>        /* remember whether this is explicit or implicit */
<a name="5601"></a>        isExplicit = explicit;
<a name="5602"></a>
<a name="5603"></a>        /* cache the actor's scope list */
<a name="5604"></a>        scopeList = asker.scopeList();
<a name="5605"></a>    }
<a name="5606"></a>
<a name="5607"></a>    showListPrefixWide(cnt, pov, parent)
<a name="5608"></a>    {
<a name="5609"></a>        /* add the asking and target actors as global message parameters */
<a name="5610"></a>        gMessageParams(askingActor, targetActor);
<a name="5611"></a>
<a name="5612"></a>        /* show the prefix; include a paren if not in explicit mode */
<a name="5613"></a>        "&lt;&lt;isExplicit ? '' : '('&gt;&gt;{You askingActor/he} could ";
<a name="5614"></a>    }
<a name="5615"></a>    showListSuffixWide(cnt, pov, parent)
<a name="5616"></a>    {
<a name="5617"></a>        /* end the sentence; include a paren if not in explicit mode */
<a name="5618"></a>        ".&lt;&lt;isExplicit? '' : ')'&gt;&gt; ";
<a name="5619"></a>    }
<a name="5620"></a>    showListEmpty(pov, parent)
<a name="5621"></a>    {
<a name="5622"></a>        /*
<a name="5623"></a>         *   say that the list is empty if it was explicitly requested;
<a name="5624"></a>         *   say nothing if the list is being added by the library
<a name="5625"></a>         */
<a name="5626"></a>        if (isExplicit)
<a name="5627"></a>        {
<a name="5628"></a>            gMessageParams(askingActor, targetActor);
<a name="5629"></a>            "&lt;&lt;isExplicit ? '' : '('&gt;&gt;{You askingActor/he} {have} nothing
<a name="5630"></a>            specific in mind {right now|just then} to discuss with
<a name="5631"></a>            {the targetActor/him}.&lt;&lt;isExplicit ? '' : ')'&gt;&gt; ";
<a name="5632"></a>        }
<a name="5633"></a>    }
<a name="5634"></a>
<a name="5635"></a>    showListSeparator(options, curItemNum, totalItems)
<a name="5636"></a>    {
<a name="5637"></a>        /* use "or" as the conjunction */
<a name="5638"></a>        if (curItemNum + 1 == totalItems)
<a name="5639"></a>            ", or ";
<a name="5640"></a>        else
<a name="5641"></a>            inherited(options, curItemNum, totalItems);
<a name="5642"></a>    }
<a name="5643"></a>
<a name="5644"></a>    /* list suggestions that are currently active */
<a name="5645"></a>    isListed(obj) { return obj.isSuggestionActive(askingActor, scopeList); }
<a name="5646"></a>
<a name="5647"></a>    /* each item counts as one item grammatically */
<a name="5648"></a>    listCardinality(obj) { return 1; }
<a name="5649"></a>
<a name="5650"></a>    /* suggestions have no contents */
<a name="5651"></a>    contentsListed(obj) { return nil; }
<a name="5652"></a>
<a name="5653"></a>    /* get the list group */
<a name="5654"></a>    listWith(obj) { return obj.suggestionGroup; }
<a name="5655"></a>
<a name="5656"></a>    /* mark as seen - nothing to do for suggestions */
<a name="5657"></a>    markAsSeen(obj, pov) { }
<a name="5658"></a>
<a name="5659"></a>    /* show the item - show the suggestion's theName */
<a name="5660"></a>    showListItem(obj, options, pov, infoTab)
<a name="5661"></a>    {
<a name="5662"></a>        /* note that we're showing the suggestion */
<a name="5663"></a>        obj.noteSuggestion();
<a name="5664"></a>
<a name="5665"></a>        /* show the name */
<a name="5666"></a>        say(obj.fullName);
<a name="5667"></a>    }
<a name="5668"></a>
<a name="5669"></a>    /* don't use semicolons, even in long lists */
<a name="5670"></a>    longListSepTwo { listSepTwo; }
<a name="5671"></a>    longListSepMiddle { listSepMiddle; }
<a name="5672"></a>    longListSepEnd { listSepEnd; }
<a name="5673"></a>
<a name="5674"></a>    /* flag: this is an explicit listing (i.e., a TOPICS command) */
<a name="5675"></a>    isExplicit = nil
<a name="5676"></a>
<a name="5677"></a>    /* the actor who's asking for the topic list (usually the PC) */
<a name="5678"></a>    askingActor = nil
<a name="5679"></a>
<a name="5680"></a>    /* the actor we're talking to */
<a name="5681"></a>    targetActor = nil
<a name="5682"></a>
<a name="5683"></a>    /* our cached scope list for the actor */
<a name="5684"></a>    scopeList = nil
<a name="5685"></a>;
<a name="5686"></a>
<a name="5687"></a>/* ASK/TELL suggestion list group base class */
<a name="5688"></a>class SuggestionListGroup: ListGroupPrefixSuffix
<a name="5689"></a>    showGroupItem(sublister, obj, options, pov, infoTab)
<a name="5690"></a>    {
<a name="5691"></a>        /*
<a name="5692"></a>         *   show the short name of the item - the group prefix will have
<a name="5693"></a>         *   shown the appropriate long name
<a name="5694"></a>         */
<a name="5695"></a>        say(obj.name);
<a name="5696"></a>    }
<a name="5697"></a>;
<a name="5698"></a>
<a name="5699"></a>/* ASK ABOUT suggestion list group */
<a name="5700"></a>suggestionAskGroup: SuggestionListGroup
<a name="5701"></a>    groupPrefix = "ask {it targetActor/him} about "
<a name="5702"></a>;
<a name="5703"></a>
<a name="5704"></a>/* TELL ABOUT suggestion list group */
<a name="5705"></a>suggestionTellGroup: SuggestionListGroup
<a name="5706"></a>    groupPrefix = "tell {it targetActor/him} about "
<a name="5707"></a>;
<a name="5708"></a>
<a name="5709"></a>/* ASK FOR suggestion list group */
<a name="5710"></a>suggestionAskForGroup: SuggestionListGroup
<a name="5711"></a>    groupPrefix = "ask {it targetActor/him} for "
<a name="5712"></a>;
<a name="5713"></a>
<a name="5714"></a>/* GIVE TO suggestions list group */
<a name="5715"></a>suggestionGiveGroup: SuggestionListGroup
<a name="5716"></a>    groupPrefix = "give {it targetActor/him} "
<a name="5717"></a>;
<a name="5718"></a>
<a name="5719"></a>/* SHOW TO suggestions */
<a name="5720"></a>suggestionShowGroup: SuggestionListGroup
<a name="5721"></a>    groupPrefix = "show {it targetActor/him} "
<a name="5722"></a>;
<a name="5723"></a>
<a name="5724"></a>/* YES/NO suggestion group */
<a name="5725"></a>suggestionYesNoGroup: SuggestionListGroup
<a name="5726"></a>    showGroupList(pov, lister, lst, options, indent, infoTab)
<a name="5727"></a>    {
<a name="5728"></a>        /*
<a name="5729"></a>         *   if we have one each of YES and NO responses, make the entire
<a name="5730"></a>         *   list "say yes or no"; otherwise, use the default behavior
<a name="5731"></a>         */
<a name="5732"></a>        if (lst.length() == 2
<a name="5733"></a>            &amp;&amp; lst.indexWhich({x: x.ofKind(SuggestedYesTopic)}) != nil
<a name="5734"></a>            &amp;&amp; lst.indexWhich({x: x.ofKind(SuggestedNoTopic)}) != nil)
<a name="5735"></a>        {
<a name="5736"></a>            /* we have a [yes, no] group - use the simple message */
<a name="5737"></a>            "say yes or no";
<a name="5738"></a>        }
<a name="5739"></a>        else
<a name="5740"></a>        {
<a name="5741"></a>            /* inherit the default behavior */
<a name="5742"></a>            inherited(pov, lister, lst, options, indent, infoTab);
<a name="5743"></a>        }
<a name="5744"></a>    }
<a name="5745"></a>    groupPrefix = "say";
<a name="5746"></a>;
</pre>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/16/2013 from TADS version 3.1.3</div>
</body>
</html>
