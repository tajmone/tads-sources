<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>conversationManager</title></head><body>
<table class=ban><tr><td align=left><span class=title>conversationManager</span><span class=type>object</span><td align=right><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#163">163</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   Conversation manager output filter.  We look for special tags in the   output stream: <p>   &lt;.reveal key&gt; - add 'key' to the knowledge token lookup table.  The   'key' is an arbitrary string, which we can look up in the table to   determine if the key has even been revealed.  This can be used to make   a response conditional on another response having been displayed,   because the key will only be added to the table when the text   containing the &lt;.reveal key&gt; sequence is displayed. <p>   &lt;.convnode name&gt; - switch the current responding actor to conversation   node 'name'. <p>   &lt;.convstay&gt; - keep the responding actor in the same conversation node   as it was in at the start of the current response <p>   &lt;.topics&gt; - schedule a topic inventory for the end of the turn (just   before the next command prompt)
<p>
<code><b>conversationManager</b> :  &nbsp; <a href="../object/OutputFilter.html">OutputFilter</a> &nbsp; <a href="../object/PreinitObject.html">PreinitObject</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>conversationManager</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/OutputFilter.html">OutputFilter</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/PreinitObject.html">PreinitObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/ModuleExecObject.html">ModuleExecObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
<a href="#customTags">customTags</a>&nbsp;
<a href="#idToActor">idToActor</a>&nbsp;
<a href="#pendingTopicInventory">pendingTopicInventory</a>&nbsp;
<a href="#respondingActor">respondingActor</a>&nbsp;
<a href="#revealedNameTab">revealedNameTab</a>&nbsp;
<a href="#tagPat">tagPat</a>&nbsp;
</code><p>
<code>
</code><p>
<code>
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#execAfterMe">execAfterMe</a>&nbsp;
<a href="../object/ModuleExecObject.html#execBeforeMe">execBeforeMe</a>&nbsp;
<a href="../object/ModuleExecObject.html#hasInitialized_">hasInitialized_</a>&nbsp;
<a href="../object/ModuleExecObject.html#isDoingExec_">isDoingExec_</a>&nbsp;
<a href="../object/ModuleExecObject.html#isExecuted_">isExecuted_</a>&nbsp;
</code><p>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#beginResponse">beginResponse</a>&nbsp;
<a href="#doCustomTag">doCustomTag</a>&nbsp;
<a href="#execute">execute</a>&nbsp;
<a href="#filterText">filterText</a>&nbsp;
<a href="#finishResponse">finishResponse</a>&nbsp;
<a href="#scheduleTopicInventory">scheduleTopicInventory</a>&nbsp;
<a href="#setRevealed">setRevealed</a>&nbsp;
<a href="#showOrScheduleTopicInventory">showOrScheduleTopicInventory</a>&nbsp;
<a href="#topicInventoryDaemon">topicInventoryDaemon</a>&nbsp;
</code><p>
<code>
</code><p>
<code>
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#_execute">_execute</a>&nbsp;
<a href="../object/ModuleExecObject.html#classExec">classExec</a>&nbsp;
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<a name="customTags"></a>
<table class=decl><tr><td><code>customTags</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#181">181</a>]</table><div class=desc>   Custom extended tags.  Games and library extensions can add their   own tag processing as needed, by using 'modify' to extend this   object.  There are two things you have to do to add your own tags: <p>   First, add a 'customTags' property that defines a regular   expression for your added tags.  This will be incorporated into   the main pattern we use to look for tags.  Simply specify a   string that lists your tags separated by "|" characters, like   this: <p>   customTags = 'foo|bar' <p>   Second, define a doCustomTag() method to process the tags.  The   filter routine will call your doCustomTag() method whenever it   finds one of your custom tags in the output stream. <p>
</div>
<a name="idToActor"></a>
<table class=decl><tr><td><code>idToActor</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#495">495</a>]</table><div class=desc>a vector of actors, indexed by their convMgrID values<p>
</div>
<a name="pendingTopicInventory"></a>
<table class=decl><tr><td><code>pendingTopicInventory</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#536">536</a>]</table><div class=desc>flag: we have a pending prompt-time topic inventory request<p>
</div>
<a name="respondingActor"></a>
<table class=decl><tr><td><code>respondingActor</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#466">466</a>]</table><div class=desc>   The current responding actor.  Actors should set this when they're   about to show a response to an ASK, TELL, etc. <p>
</div>
<a name="revealedNameTab"></a>
<table class=decl><tr><td><code>revealedNameTab</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#492">492</a>]</table><div class=desc>   The global lookup table of all revealed keys.  This table is keyed   by the string naming the revelation; the value associated with   each key is not used (we always just set it to true). <p>
</div>
<a name="tagPat"></a>
<table class=decl><tr><td><code>tagPat</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#342">342</a>]</table><div class=desc>regular expression pattern for our tags<p>
</div>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="beginResponse"></a>
<table class=decl><tr><td><code>beginResponse (actor)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#395">395</a>]</table><div class=desc>   Note that an actor is about to give a response through a   TopicEntry object.  We'll remember the actor so that we'll know   which actor is involved in a &lt;.convnode&gt; operation. <p>
</div>
<a name="doCustomTag"></a>
<table class=decl><tr><td><code>doCustomTag (tag, arg)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#182">182</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="execute"></a>
<table class=decl><tr><td><code>execute ( )</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#498">498</a>]</table><div class=desc>preinitialize<p>
</div>
<a name="filterText"></a>
<table class=decl><tr><td><code>filterText (ostr, txt)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#185">185</a>]</table><div class=desc>filter text written to the output stream<p>
</div>
<a name="finishResponse"></a>
<table class=decl><tr><td><code>finishResponse (actor, node)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#421">421</a>]</table><div class=desc>   Finish the response - call this after we finish handling the   response.  There must be a subsequent matching call to this   routine whenever beginResponse() is called. <p>   'node' is the default new ConvNode the actor for the responding   actor.  If another ConvNode was explicitly set in the course of   handling the response, this is ignored, since the explicit   setting overrides this default. <p>
</div>
<a name="scheduleTopicInventory"></a>
<table class=decl><tr><td><code>scheduleTopicInventory ( )</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#357">357</a>]</table><div class=desc>   Schedule a topic inventory request.  Game code can call this at   any time to request that the player character's topic inventory   be shown automatically just before the next command prompt.  In   most cases, game code won't call this directly, but will request   the same effect using the &lt;.topics&gt; tag in topic response text. <p>
</div>
<a name="setRevealed"></a>
<table class=decl><tr><td><code>setRevealed (tag)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#482">482</a>]</table><div class=desc>   Mark a tag as revealed.  This adds an entry for the tag to the   revealedNameTab table.  We simply set the table entry to 'true';   the presence of the tag in the table constitutes the indication   that the tag has been revealed. <p>   (Games and library extensions can use 'modify' to override this   and store more information in the table entry.  For example, you   could store the time when the information was first revealed, or   the location where it was learned.  If you do override this, just   be sure to set the revealedNameTab entry for the tag to a non-nil   and non-zero value, so that any code testing the presence of the   table entry will see that the slot is indeed set.) <p>
</div>
<a name="showOrScheduleTopicInventory"></a>
<table class=decl><tr><td><code>showOrScheduleTopicInventory (actor, otherActor)</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#374">374</a>]</table><div class=desc>   Show or schedule a topic inventory request.  If the current   action has a non-default command report, schedule it; otherwise,   show it now. <p>   If there's a non-default report, don't suggest the topics now;   instead, schedule a topic inventory for the end of the turn.   When we have a non-default report, the report could change the   ConvNode for the actor, so we don't want to show the topic   inventory until we've had a chance to process all of the reports. <p>
</div>
<a name="topicInventoryDaemon"></a>
<table class=decl><tr><td><code>topicInventoryDaemon ( )</code><td align=right><code><a href="../file/actor.t.html">actor.t</a>[<a href="../source/actor.t.html#518">518</a>]</table><div class=desc>   Prompt daemon: show topic inventory when appropriate.  When a   response explicitly asks us to show a topic inventory using the   &lt;.topics&gt; tag, or when other game code asks us to show topic   inventory by calling scheduleTopicInventory(), we'll show the   inventory just before the command input prompt. <p>
</div>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/16/2013 from TADS version 3.1.3</div>
</body>
</html>
