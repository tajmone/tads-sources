<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>langMessageBuilder</title></head><body>
<table class=ban><tr><td align=left><span class=title>langMessageBuilder</span><span class=type>object</span><td align=right><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#3758">3758</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   The English-specific message builder.
<p>
<code><b>langMessageBuilder</b> :  &nbsp; <a href="../object/MessageBuilder.html">MessageBuilder</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>langMessageBuilder</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/MessageBuilder.html">MessageBuilder</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/OutputFilter.html">OutputFilter</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/PreinitObject.html">PreinitObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/ModuleExecObject.html">ModuleExecObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
<a href="#fixedTenseProp_">fixedTenseProp_</a>&nbsp;
<a href="#lastSubject_">lastSubject_</a>&nbsp;
<a href="#lastSubjectName_">lastSubjectName_</a>&nbsp;
<a href="#paramList_">paramList_</a>&nbsp;
<a href="#pastEnding_">pastEnding_</a>&nbsp;
<a href="#patEndOfSentence">patEndOfSentence</a>&nbsp;
<a href="#patIdObjApostS">patIdObjApostS</a>&nbsp;
<a href="#patIdObjSlashIdApostS">patIdObjSlashIdApostS</a>&nbsp;
<a href="#patParamWithExclam">patParamWithExclam</a>&nbsp;
<a href="#patSpecial">patSpecial</a>&nbsp;
<a href="#patSSlashLetterEd">patSSlashLetterEd</a>&nbsp;
<a href="#patTenseSwitching">patTenseSwitching</a>&nbsp;
</code><p>
<p>Inherited from <code>MessageBuilder</code> :<br>
<code>
<a href="../object/MessageBuilder.html#lastParamObj_">lastParamObj_</a>&nbsp;
<a href="../object/MessageBuilder.html#lastTargetObj_">lastTargetObj_</a>&nbsp;
<a href="../object/MessageBuilder.html#nameTable_">nameTable_</a>&nbsp;
<a href="../object/MessageBuilder.html#paramTable_">paramTable_</a>&nbsp;
<a href="../object/MessageBuilder.html#patAllCaps">patAllCaps</a>&nbsp;
<a href="../object/MessageBuilder.html#patIdObj">patIdObj</a>&nbsp;
<a href="../object/MessageBuilder.html#patIdObjSlashId">patIdObjSlashId</a>&nbsp;
<a href="../object/MessageBuilder.html#patIdSlash">patIdSlash</a>&nbsp;
<a href="../object/MessageBuilder.html#patUpper">patUpper</a>&nbsp;
</code><p>
<code>
</code><p>
<code>
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#execAfterMe">execAfterMe</a>&nbsp;
<a href="../object/ModuleExecObject.html#execBeforeMe">execBeforeMe</a>&nbsp;
<a href="../object/ModuleExecObject.html#hasInitialized_">hasInitialized_</a>&nbsp;
<a href="../object/ModuleExecObject.html#isDoingExec_">isDoingExec_</a>&nbsp;
<a href="../object/ModuleExecObject.html#isExecuted_">isExecuted_</a>&nbsp;
</code><p>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#generateMessage">generateMessage</a>&nbsp;
<a href="#getTargetProp">getTargetProp</a>&nbsp;
<a href="#langRewriteParam">langRewriteParam</a>&nbsp;
<a href="#processOrig">processOrig</a>&nbsp;
<a href="#processResult">processResult</a>&nbsp;
</code><p>
<p>Inherited from <code>MessageBuilder</code> :<br>
<code>
<a href="../object/MessageBuilder.html#execute">execute</a>&nbsp;
<a href="../object/MessageBuilder.html#filterText">filterText</a>&nbsp;
<a href="../object/MessageBuilder.html#genLiteral">genLiteral</a>&nbsp;
<a href="../object/MessageBuilder.html#quoteMessage">quoteMessage</a>&nbsp;
</code><p>
<code>
</code><p>
<code>
</code><p>
<p>Inherited from <code>ModuleExecObject</code> :<br>
<code>
<a href="../object/ModuleExecObject.html#_execute">_execute</a>&nbsp;
<a href="../object/ModuleExecObject.html#classExec">classExec</a>&nbsp;
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<a name="fixedTenseProp_"></a>
<table class=decl><tr><td><code>fixedTenseProp_</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4249">4249</a>]</table><div class=desc>   This property is used to temporarily store either a boolean value   indicating whether the last encountered parameter string had an   exclamation mark at the end of any word, or a property to be   invoked by Thing.propWithPresentMessageBuilder_.  This field is   for internal use only; authors shouldn't have any reason to access   it directly. <p>
</div>
<a name="lastSubject_"></a>
<table class=decl><tr><td><code>lastSubject_</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4053">4053</a>]</table><div class=desc>   The most recent target object used in the nominative case.  We   note this so that we can supply reflexive mappings when the same   object is re-used in the objective case.  This allows us to map   things like "you can't take you" to the better-sounding "you   can't take yourself". <p>
</div>
<a name="lastSubjectName_"></a>
<table class=decl><tr><td><code>lastSubjectName_</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4056">4056</a>]</table><div class=desc>the parameter name of the last subject ('dobj', 'actor', etc)<p>
</div>
<a name="paramList_"></a>
<table class=decl><tr><td><code>paramList_</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#3777">3777</a>]</table><div class=desc>   The English message substitution parameter table. <p>   Note that we specify two additional elements for each table entry   beyond the standard language-independent complement: <p>   info[4] = reflexive property - this is the property to invoke   when the parameter is used reflexively (in other words, its   target object is the same as the most recent target object used   in the nominative case).  If this is nil, the parameter has no   reflexive form. <p>   info[5] = true if this is a nominative usage, nil if not.  We use   this to determine which target objects are used in the nominative   case, so that we can remember those objects for subsequent   reflexive usages. <p>
</div>
<a name="pastEnding_"></a>
<table class=decl><tr><td><code>pastEnding_</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4239">4239</a>]</table><div class=desc>   This property is used to temporarily store the past-tense ending   of a verb to be displayed by Thing.verbEndingSMessageBuilder_.   It's for internal use only; game authors shouldn't have any reason   to access it directly. <p>
</div>
<a name="patEndOfSentence"></a>
<table class=decl><tr><td><code>patEndOfSentence</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4125">4125</a>]</table><div class=desc>end-of-sentence match pattern<p>
</div>
<a name="patIdObjApostS"></a>
<table class=decl><tr><td><code>patIdObjApostS</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4159">4159</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="patIdObjSlashIdApostS"></a>
<table class=decl><tr><td><code>patIdObjSlashIdApostS</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4157">4157</a>]</table><div class=desc>some pre-compiled search patterns we use a lot<p>
</div>
<a name="patParamWithExclam"></a>
<table class=decl><tr><td><code>patParamWithExclam</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4161">4161</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="patSpecial"></a>
<table class=decl><tr><td><code>patSpecial</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4027">4027</a>]</table><div class=desc>   Pre-compiled regular expression pattern matching any sequence with   a special meaning in a message string. <p>   We match either a stuttered opening brace, or a single opening   brace followed by any sequence of characters that doesn't contain   a closing brace followed by a closing brace. <p>
</div>
<a name="patSSlashLetterEd"></a>
<table class=decl><tr><td><code>patSSlashLetterEd</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4162">4162</a>]</table><div class=desc><i>no description available</i><p>
</div>
<a name="patTenseSwitching"></a>
<table class=decl><tr><td><code>patTenseSwitching</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4040">4040</a>]</table><div class=desc>   Pre-compiled regular expression pattern matching our special   tense-switching syntax. <p>   We match a single opening brace, followed by any sequence of   characters that doesn't contain a closing brace or a vertical bar,   followed by a vertical bar, followed by any sequence of characters   that doesn't contain a closing brace or a vertical bar, followed   by a closing brace. <p>
</div>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="generateMessage"></a>
<table class=decl><tr><td><code>generateMessage (orig)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#3912">3912</a>]</table><div class=desc>   Add a hook to the generateMessage method, which we use to   pre-process the source string before expanding the substitution   parameters. <p>
</div>
<a name="getTargetProp"></a>
<table class=decl><tr><td><code>getTargetProp (targetObj, paramObj, info)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4069">4069</a>]</table><div class=desc>   Get the target object property mapping.  If the target object is   the same as the most recent subject object (i.e., the last object   used in the nominative case), and this parameter has a reflexive   form property, we'll return the reflexive form property.   Otherwise, we'll return the standard property mapping. <p>   Also, if there was an exclamation mark at the end of any word in   the tag, we'll return a property returning a fixed-tense form of   the property for the tag. <p>
</div>
<a name="langRewriteParam"></a>
<table class=decl><tr><td><code>langRewriteParam (paramStr)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4184">4184</a>]</table><div class=desc>   Rewrite a parameter string for a language-specific syntax   extension. <p>   For English, we'll handle the possessive apostrophe-s suffix   specially, by allowing the apostrophe-s to be appended to the   target object name.  If we find an apostrophe-s on the target   object name, we'll move it to the preceding identifier name: <p>   the dobj's -&gt; the's dobj <br> the dobj's/he -&gt; the's dobj/he <br> he/the dobj's -&gt; he/the's dobj <p>   We also use this method to check for the presence of an   exclamation mark at the end of any word in the parameter string   (triggering the fixed-tense handling), and to detect a parameter   string matching the {s/?ed} syntax, where ? is any letter, and   rewrite it literally as 's/?ed' literally. <p>
</div>
<a name="processOrig"></a>
<table class=decl><tr><td><code>processOrig (str)</code><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#3941">3941</a>]</table><div class=desc>   Pre-process a source string containing substitution parameters,   before generating the expanded message from it. <p>   We use this hook to implement the special tense-switching syntax   {&lt;present&gt;|&lt;past&gt;}.  Although it superficially looks like an   ordinary substitution parameter, we actually can't use the normal   parameter substitution framework for that, because we want to   allow the &lt;present&gt; and &lt;past&gt; substrings themselves to contain   substitution parameters, and the normal framework doesn't allow   for recursive substitution. <p>   We simply replace every sequence of the form {&lt;present&gt;|&lt;past&gt;}   with either &lt;present&gt; or &lt;past&gt;, depending on the current   narrative tense.  We then substitute braces for square brackets in   the resulting string.  This allows treating every bracketed tag   inside the tense-switching sequence as a regular substitution   parameter. <p>   For example, the sequence "{take[s]|took}" appearing in the   message string would be replaced with "take{s}" if the current   narrative tense is present, and would be replaced with "took" if   the current narrative tense is past.  The string "take{s}", if   selected, would in turn be expanded to either "take" or "takes",   depending on the grammatical person of the subject, as per the   regular substitution mechanism. <p>
</div>
<a name="processResult"></a>
<table class=decl><tr><td><code>processResult (txt)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/en_us.t.html">en_us.t</a>[<a href="../source/en_us.t.html#4130">4130</a>]</table><div class=desc>   Process result text. <p>
</div>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/16/2013 from TADS version 3.1.3</div>
</body>
</html>
