<html>
<head><link rel=stylesheet type="text/css" href="../libref.css"><title>Goal</title></head><body>
<table class=ban><tr><td align=left><span class=title>Goal</span><span class=type>class</span><td align=right><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#105">105</a>]</table><p>
<table class=nav><tr>
<td><a href="#_SuperClassTree_">Superclass<br>Tree</a>
<td><a href="#_SubClassTree_">Subclass<br>Tree</a>
<td><a href="#_ObjectSummary_">Global<br>Objects</a>
<td><a href="#_PropSummary_">Property<br>Summary</a>
<td><a href="#_MethodSummary_">Method<br>Summary</a>
<td><a href="#_Properties_">Property<br>Details</a>
<td><a href="#_Methods_">Method<br>Details</a>
</table><div class=fdesc>
   A Goal represents an open task: something that the player is trying   to achieve.  A Goal is an abstract object, not part of the simulated   world of the game. <p>   Each goal is associated with a hint topic (usually shown as a   question, such as "How do I get past the guard?") and an ordered list   of hints.  The hints are usually ordered from most general to most   specific.  The idea is to let the player control how big a hint they   get; we start with a small nudge and work towards giving away the   puzzle completely, so the player can stop as soon as they see   something that helps. <p>   At any given time, a goal can be in one of three states: <p>   - Open: this means that the player is (or ought to be) aware of the   goal, but the goal hasn't yet been achieved.  Determining this   awareness is up to the goal.  In some cases, a goal is opened as soon   as the player has seen a particular object or entered a particular   area; in other cases, a goal might be opened by a scripted event,   such as a speech by an NPC telling the player they have to accomplish   something.  A goal could even be opened by viewing a hint for another   goal, because that hint could explain a gating goal that the player   might not otherwise been able to know about. <p>   - Undiscovered: this means that the player doesn't yet have any   reason to know about the goal. <p>   - Closed: this means that the player has accomplished the goal, or in   some cases that the goal has become irrelevant. <p>   The hint system only shows goals that are Open.  We don't show Closed   goals because the player presumably has no need of them any longer;   we don't show Undiscovered goals to avoid giving away developments   later in the game before they become relevant.
<p>
<code>class
<b>Goal</b> :  &nbsp; <a href="../object/MenuTopicItem.html">MenuTopicItem</a> &nbsp; <a href="../object/HintMenuObject.html">HintMenuObject</a></code>
</div>
<a name="_SuperClassTree_"></a><p><div class=mjhd><span class=hdln>Superclass Tree</span> &nbsp; (in declaration order)</div><p>
<code><b>Goal</b></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/MenuTopicItem.html">MenuTopicItem</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/MenuItem.html">MenuItem</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/MenuObject.html">MenuObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp; <a href="../object/HintMenuObject.html">HintMenuObject</a></code><br>
<code> &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; object</code><br>
<a name="_SubClassTree_"></a><p><div class=mjhd><span class=hdln>Subclass Tree</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_ObjectSummary_"></a><p><div class=mjhd><span class=hdln>Global Objects</span> &nbsp; </div><p>
<i>(none)</i>
<a name="_PropSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Properties</span> &nbsp; </div><p>
<code>
<a href="#closeWhen">closeWhen</a>&nbsp;
<a href="#closeWhenAchieved">closeWhenAchieved</a>&nbsp;
<a href="#closeWhenDescribed">closeWhenDescribed</a>&nbsp;
<a href="#closeWhenKnown">closeWhenKnown</a>&nbsp;
<a href="#closeWhenRevealed">closeWhenRevealed</a>&nbsp;
<a href="#closeWhenSeen">closeWhenSeen</a>&nbsp;
<a href="#closeWhenTrue">closeWhenTrue</a>&nbsp;
<a href="#goalFullyDisplayed">goalFullyDisplayed</a>&nbsp;
<a href="#goalState">goalState</a>&nbsp;
<a href="#isActiveInMenu">isActiveInMenu</a>&nbsp;
<a href="#location">location</a>&nbsp;
<a href="#menuContents">menuContents</a>&nbsp;
<a href="#openWhen">openWhen</a>&nbsp;
<a href="#openWhenAchieved">openWhenAchieved</a>&nbsp;
<a href="#openWhenDescribed">openWhenDescribed</a>&nbsp;
<a href="#openWhenKnown">openWhenKnown</a>&nbsp;
<a href="#openWhenRevealed">openWhenRevealed</a>&nbsp;
<a href="#openWhenSeen">openWhenSeen</a>&nbsp;
<a href="#openWhenTrue">openWhenTrue</a>&nbsp;
<a href="#title">title</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuTopicItem</code> :<br>
<code>
<a href="../object/MenuTopicItem.html#chunkSize">chunkSize</a>&nbsp;
<a href="../object/MenuTopicItem.html#heading">heading</a>&nbsp;
<a href="../object/MenuTopicItem.html#lastDisplayed">lastDisplayed</a>&nbsp;
<a href="../object/MenuTopicItem.html#menuTopicListEnd">menuTopicListEnd</a>&nbsp;
<a href="../object/MenuTopicItem.html#nextMenuTopicLink">nextMenuTopicLink</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuItem</code> :<br>
<code>
<a href="../object/MenuItem.html#bgcolor">bgcolor</a>&nbsp;
<a href="../object/MenuItem.html#curKeyList">curKeyList</a>&nbsp;
<a href="../object/MenuItem.html#curMenu">curMenu</a>&nbsp;
<a href="../object/MenuItem.html#fgcolor">fgcolor</a>&nbsp;
<a href="../object/MenuItem.html#fullScreenMode">fullScreenMode</a>&nbsp;
<a href="../object/MenuItem.html#indent">indent</a>&nbsp;
<a href="../object/MenuItem.html#isOpen">isOpen</a>&nbsp;
<a href="../object/MenuItem.html#keyList">keyList</a>&nbsp;
<a href="../object/MenuItem.html#prevMenuLink">prevMenuLink</a>&nbsp;
<a href="../object/MenuItem.html#topbarbg">topbarbg</a>&nbsp;
<a href="../object/MenuItem.html#topbarfg">topbarfg</a>&nbsp;
<a href="../object/MenuItem.html#topMenu">topMenu</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuObject</code> :<br>
<code>
<a href="../object/MenuObject.html#contents">contents</a>&nbsp;
<a href="../object/MenuObject.html#menuOrder">menuOrder</a>&nbsp;
</code><p>
<p>Inherited from <code>HintMenuObject</code> :<br>
<code>
<a href="../object/HintMenuObject.html#topicOrder">topicOrder</a>&nbsp;
</code><p>
<a name="_MethodSummary_"></a><p><div class=mjhd><span class=hdln>Summary of Methods</span> &nbsp; </div><p>
<code>
<a href="#displaySubItem">displaySubItem</a>&nbsp;
<a href="#updateContents">updateContents</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuTopicItem</code> :<br>
<code>
<a href="../object/MenuTopicItem.html#getNextTopicXML">getNextTopicXML</a>&nbsp;
<a href="../object/MenuTopicItem.html#getTopicXML">getTopicXML</a>&nbsp;
<a href="../object/MenuTopicItem.html#getXML">getXML</a>&nbsp;
<a href="../object/MenuTopicItem.html#redrawWinHtml">redrawWinHtml</a>&nbsp;
<a href="../object/MenuTopicItem.html#showMenuHtml">showMenuHtml</a>&nbsp;
<a href="../object/MenuTopicItem.html#showMenuText">showMenuText</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuItem</code> :<br>
<code>
<a href="../object/MenuItem.html#display">display</a>&nbsp;
<a href="../object/MenuItem.html#enterSubMenu">enterSubMenu</a>&nbsp;
<a href="../object/MenuItem.html#formatXML">formatXML</a>&nbsp;
<a href="../object/MenuItem.html#getChildIndex">getChildIndex</a>&nbsp;
<a href="../object/MenuItem.html#getKeysXML">getKeysXML</a>&nbsp;
<a href="../object/MenuItem.html#getNextMenu">getNextMenu</a>&nbsp;
<a href="../object/MenuItem.html#getPrevMenu">getPrevMenu</a>&nbsp;
<a href="../object/MenuItem.html#refreshTopMenuBanner">refreshTopMenuBanner</a>&nbsp;
<a href="../object/MenuItem.html#removeStatusLine">removeStatusLine</a>&nbsp;
<a href="../object/MenuItem.html#removeTopMenuBanner">removeTopMenuBanner</a>&nbsp;
<a href="../object/MenuItem.html#showMenu">showMenu</a>&nbsp;
<a href="../object/MenuItem.html#showTopMenuBanner">showTopMenuBanner</a>&nbsp;
</code><p>
<p>Inherited from <code>MenuObject</code> :<br>
<code>
<a href="../object/MenuObject.html#addToContents">addToContents</a>&nbsp;
<a href="../object/MenuObject.html#compareForMenuSort">compareForMenuSort</a>&nbsp;
<a href="../object/MenuObject.html#execute">execute</a>&nbsp;
<a href="../object/MenuObject.html#initializeContents">initializeContents</a>&nbsp;
<a href="../object/MenuObject.html#initializeLocation">initializeLocation</a>&nbsp;
</code><p>
<p>Inherited from <code>HintMenuObject</code> :<br>
<code>
<a href="../object/HintMenuObject.html#compareForTopicSort">compareForTopicSort</a>&nbsp;
</code><p>
<a name="_Properties_"></a><p><div class=mjhd><span class=hdln>Properties</span> &nbsp; </div><p>
<a name="closeWhen"></a>
<table class=decl><tr><td><code>closeWhen</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#247">247</a>]</table><div class=desc>   Determine if there's any condition that should close this goal.   We'll check closeWhenSeen, closeWhenDescribed, and all of the   other closeWhenXxx conditions; if any of these return true, then   we'll return true. <p>
</div>
<a name="closeWhenAchieved"></a>
<table class=decl><tr><td><code>closeWhenAchieved</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#181">181</a>]</table><div class=desc>   An optional Achievement object that closes this goal.  Once the   achievement is completed, this goal's state will automatically be   set to Closed.  This makes it easy to associate the goal with a   puzzle: once the puzzle is solved, there's no need to show hints   for the goal any more. <p>
</div>
<a name="closeWhenDescribed"></a>
<table class=decl><tr><td><code>closeWhenDescribed</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#162">162</a>]</table><div class=desc>close the goal when the given object is described<p>
</div>
<a name="closeWhenKnown"></a>
<table class=decl><tr><td><code>closeWhenKnown</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#193">193</a>]</table><div class=desc>an optional Topic or Thing that closes this goal when known<p>
</div>
<a name="closeWhenRevealed"></a>
<table class=decl><tr><td><code>closeWhenRevealed</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#203">203</a>]</table><div class=desc>an optional &lt;.reveal&gt; tag that closes this goal when revealed<p>
</div>
<a name="closeWhenSeen"></a>
<table class=decl><tr><td><code>closeWhenSeen</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#153">153</a>]</table><div class=desc>   An option object that, when seen by the player character, closes   this goal.  Many goals will be things like "how do I find the   X?", in which case it's nice to close the goal when the X is   found. <p>
</div>
<a name="closeWhenTrue"></a>
<table class=decl><tr><td><code>closeWhenTrue</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#215">215</a>]</table><div class=desc>an optional general-purpose check that closes the goal<p>
</div>
<a name="goalFullyDisplayed"></a>
<table class=decl><tr><td><code>goalFullyDisplayed</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#271">271</a>]</table><div class=desc>   Has this goal been fully displayed?  The hint system automatically   sets this to true when the last item in our hint list is   displayed. <p>   You can use this, for example, to automatically remove the hint   from the hint menu after it's been fully displayed.  (You might   want to do this with a hint for a red herring, for example.  After   the player has learned that the red herring is a red herring, they   probably won't need to see that particular line of hints again, so   you can remove the clutter in the menu by closing the hint after   it's been fully displayed.)  To do this, simply add this to the   Goal object: <p> <br>   closeWhenTrue = (goalFullyDisplayed) <p>
</div>
<a name="goalState"></a>
<table class=decl><tr><td><code>goalState</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#348">348</a>]</table><div class=desc>   This goal's current state.  We'll start off undiscovered.  When a   goal should be open from the very start of the game, this should   be overridden and set to OpenGoal. <p>
</div>
<a name="isActiveInMenu"></a>
<table class=decl><tr><td><code>isActiveInMenu</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#341">341</a>]</table><div class=desc>we're active in our parent menu if our goal state is Open<p>
</div>
<a name="location"></a>
<table class=decl><tr><td><code>location</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#120">120</a>]</table><div class=desc>   Our parent menu - this is usually a HintMenu object.  In very   simple hint systems, this could simply be a top-level hint menu   container; more typically, the hint system will be structured   into a menu tree that organizes the hint topics into several   different submenus, for easier navigatino. <p>
</div>
<a name="menuContents"></a>
<table class=decl><tr><td><code>menuContents</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#134">134</a>]</table><div class=desc>   The list of hints for this topic.  This should be ordered from   most general to most specific; we offer the hints in the order   they appear in this list, so the earlier hints should give away   as little as possible, while the later hints should get   progressively closer to just outright giving away the answer. <p>   Each entry in the list can be a simple (single-quoted) string, or   it can be a Hint object.  In most cases, a string will do.  A   Hint object is only needed when displaying the hint has some side   effect, such as opening a new Goal. <p>
</div>
<a name="openWhen"></a>
<table class=decl><tr><td><code>openWhen</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#233">233</a>]</table><div class=desc>   Determine if there's any condition that should open this goal.   This checks openWhenSeen, openWhenDescribed, and all of the other   openWhenXxx conditions; if any of these return true, then we'll   return true. <p>   Note that this should generally NOT be overridden in individual   instances; normally, instances would define openWhenTrue instead.   However, some games might find that they use the same special   condition over and over in many goals, often enough to warrant   adding a new openWhenXxx property to Goal.  In these cases, you   can use 'modify Goal' to override openWhen to add the new   condition: simply define openWhen as (inherited || newCondition),   where 'newCondition' is the new special condition you want to   add. <p>
</div>
<a name="openWhenAchieved"></a>
<table class=decl><tr><td><code>openWhenAchieved</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#172">172</a>]</table><div class=desc>   An optional Achievement object that opens this goal.  This goal   will be opened automatically once the goal is achieved, if the   goal was previously undiscovered.  This makes it easy to set up a   hint topic that becomes available after a particular puzzle is   solved, which is useful when a new puzzle only becomes known to   the player after a gating puzzle has been solved. <p>
</div>
<a name="openWhenDescribed"></a>
<table class=decl><tr><td><code>openWhenDescribed</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#159">159</a>]</table><div class=desc>   this is like openWhenSeen, but opens the topic when the given   object is described (with EXAMINE) <p>
</div>
<a name="openWhenKnown"></a>
<table class=decl><tr><td><code>openWhenKnown</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#190">190</a>]</table><div class=desc>   An optional Topic or Thing that opens this goal when the object   becomes "known" to the player character.  This will open the goal   as soon as gPlayerChar.knowsAbout(openWhenKnown) returns true.   This makes it easy to open a goal as soon as the player comes   across some information in the game. <p>
</div>
<a name="openWhenRevealed"></a>
<table class=decl><tr><td><code>openWhenRevealed</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#200">200</a>]</table><div class=desc>   An optional &lt;.reveal&gt; tag name that opens this goal.  If this is   set to a non-nil string, we'll automatically open this goal when   the tag has been revealed via &lt;.reveal&gt; (or gReveal()). <p>
</div>
<a name="openWhenSeen"></a>
<table class=decl><tr><td><code>openWhenSeen</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#145">145</a>]</table><div class=desc>   An optional object that, when seen by the player character, opens   this goal.  It's often convenient to declare a goal open as soon   as the player enters a particular area or has encountered a   particular object.  For such cases, simply set this property to   the room or object that opens the goal, and we'll automatically   mark the goal as Open the next time the player asks for a hint   after seeing the referenced object. <p>
</div>
<a name="openWhenTrue"></a>
<table class=decl><tr><td><code>openWhenTrue</code><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#212">212</a>]</table><div class=desc>   An optional arbitrary check that opens the goal.  If this returns   true, we'll open the goal.  This check is made in addition to the   other checks (openWhenSeen, openWhenDescribed, etc).  This can be   used for any custom check that doesn't fit into one of the   standard openWhenXxx properties. <p>
</div>
<a name="title"></a>
<table class=decl><tr><td><code>title</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#111">111</a>]</table><div class=desc>   The topic question associated with the goal.  The hint system   shows a list of the topics for the goals that are currently open,   so that the player can decide what area they want help on. <p>
</div>
<a name="_Methods_"></a><p><div class=mjhd><span class=hdln>Methods</span> &nbsp; </div><p>
<a name="displaySubItem"></a>
<table class=decl><tr><td><code>displaySubItem (idx, lastBeforeInput, eol)</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#330">330</a>]</table><div class=desc>display a sub-item, keeping track of when we've shown them all<p>
</div>
<a name="updateContents"></a>
<table class=decl><tr><td><code>updateContents ( )</code><span class=rem>OVERRIDDEN</span><td align=right><code><a href="../file/hintsys.t.html">hintsys.t</a>[<a href="../source/hintsys.t.html#299">299</a>]</table><div class=desc>   Check our menu state and update it if necessary.  Each time our   parent menu is about to display, it'll call this on its sub-items   to let them update their current states.  This method can promote   the state to Open or Closed if the necessary conditions for the   goal have been met. <p>   Sometimes it's more convenient to set a goal's state explicitly   from a scripted event; for example, if the goal is associated   with a scored achievement, awarding the goal's achievement will   set the goal's state to Closed.  In these cases, there's no need   to use this method, since you're managing the goal's state   explicitly.  The purpose of this method is to make it easy to   catch goal state changes that can be reached by several different   routes; in these cases, you can just write a single test for   those conditions in this method rather than trying to catch every   possible route to the new conditions and writing code in all of   those. <p>   The default implementation looks at our openWhenSeen property.   If this property is not nil, then we'll check the object   referenced in this property; if our current state is   Undiscovered, and the object referenced by openWhenSeen has been   seen by the player character, then we'll change our state to   Open.  We'll make the corresponding check for openWhenDescribed. <p>
</div>
<div class=ftr>TADS 3 Library Manual<br>Generated on 5/16/2013 from TADS version 3.1.3</div>
</body>
</html>
